<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Operators to compute new fields" href="../operators.html" /><link rel="prev" title="&amp;ModelSpecification" href="modelSpec.html" />

    <!-- Generated with Sphinx 6.1.3 and Furo 2022.12.07 -->
        <title>&amp;Process - fieldextra v13_0_0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">fieldextra v13_0_0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">fieldextra v13_0_0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Program usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../products.html">Supported products and data representations</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="intro.html">Control file</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="runSpec.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;RunSpecification</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="globRes.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalResource</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="globSet.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="netcdf.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;NetCDFImport</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="inspectSpec.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;InspectSpecification</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="modelSpec.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;ModelSpecification</span></code></a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operators.html">Operators to compute new fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Description of support files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../output.html">Description of output format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grib1.html">Description of some GRIB1 conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grib2.html">Description of GRIB2 local use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta.html">Handling of meta-information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutOpsTags.html">About operators and tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Description of tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lexicon.html">Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summary.html">Summary of namelist objects and their usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test.html">:nl:nl:`Test`</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="process">
<h1><a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a><a class="headerlink" href="#process" title="Permalink to this heading">#</a></h1>
<section id="module-Process">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#module-Process" title="Permalink to this heading">#</a></h2>
<p>Fieldextra supports the simultaneous generation of multiple products.
The operations required to generate each product are defined by a set
of <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> blocks in the namelist file. Multiple <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> blocks are
associated with a specified product using the name of the output file
(<a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a>); until a new output file name is defined, all <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a>
blocks belong to the same product definition (following the order
of <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> blocks in the control file).</p>
<p>The <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> block can be repeated as many times as necessary. Each
output file must be declared with one or more associated input files
(see <a class="reference internal" href="#section-4-3-1"><span class="std std-ref">Input files</span></a> and <a class="reference internal" href="#section-4-3-2"><span class="std std-ref">Output files</span></a>). The
data collected in a specific output file is extracted from the set of
associated input files (see <a class="reference internal" href="#section-4-3-3"><span class="std std-ref">Extracted fields</span></a>). Operations
on extracted fields and computation of derived fields are applied before
writing the output on disk (see <a class="reference internal" href="#section-4-3-4"><span class="std std-ref">Operations applied on extracted fields</span></a>
and <a class="reference internal" href="#section-4-3-5"><span class="std std-ref">Generated fields and associated operations</span></a>).</p>
<p>The typical sequence of <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> blocks for a specific <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">Process</span>  <span class="n">in_file</span><span class="o">=</span> <span class="o">...</span>                                    <span class="o">|</span> <span class="n">This</span> <span class="n">can</span> <span class="n">be</span> <span class="n">repeated</span> <span class="n">when</span>
          <span class="n">out_file</span><span class="o">=</span> <span class="o">...</span>    <span class="o">/</span>                              <span class="o">|</span> <span class="n">multiple</span> <span class="nb">input</span> <span class="n">contribute</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">in_field</span><span class="o">=</span> <span class="o">...</span>     <span class="o">/</span>     <span class="p">(</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">occurences</span><span class="p">)</span>   <span class="o">|</span> <span class="n">to</span> <span class="n">the</span> <span class="n">same</span> <span class="n">output</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp1_field</span><span class="o">=</span> <span class="o">...</span>   <span class="o">/</span>     <span class="p">(</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">occurences</span><span class="p">)</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp2_field</span><span class="o">=</span> <span class="o">...</span>   <span class="o">/</span>     <span class="p">(</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">occurences</span><span class="p">)</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp3_field</span><span class="o">=</span> <span class="o">...</span>   <span class="o">/</span>     <span class="p">(</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">occurences</span><span class="p">)</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp4_field</span><span class="o">=</span> <span class="o">...</span>   <span class="o">/</span>     <span class="p">(</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">occurences</span><span class="p">)</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp5_field</span><span class="o">=</span> <span class="o">...</span>   <span class="o">/</span>     <span class="p">(</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">occurences</span><span class="p">)</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">out_field</span><span class="o">=</span> <span class="o">...</span>    <span class="o">/</span>     <span class="p">(</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">occurences</span><span class="p">)</span>
</pre></div>
</div>
<p>This sequence can be repeated as many times as necessary. The same input
and output files will be used until new file names are explicitely
specified; all other variables are reset to their default value before
reading the next <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> block.</p>
<p>A case with two input files contributing to a single output is presented
below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">Process</span>  <span class="n">in_file</span>  <span class="o">=</span> <span class="n">file_1</span>       <span class="o">&lt;</span> <span class="n">Specification</span> <span class="n">of</span> <span class="mi">1</span><span class="n">st</span> <span class="nb">input</span> <span class="n">file</span>
          <span class="n">out_file</span> <span class="o">=</span> <span class="o">...</span>          <span class="o">&lt;</span> <span class="n">Specification</span> <span class="n">of</span> <span class="n">output</span> <span class="n">file</span>

<span class="o">&amp;</span><span class="n">Process</span> <span class="n">in_field</span> <span class="o">=</span> <span class="n">field_1</span>   <span class="o">/</span>   <span class="o">&lt;</span> <span class="n">Specification</span> <span class="n">of</span> <span class="n">fields</span> <span class="n">to</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">in_field</span> <span class="o">=</span> <span class="n">field_2</span>   <span class="o">/</span>     <span class="n">extract</span> <span class="kn">from</span> <span class="nn">first</span> <span class="nb">input</span> <span class="n">file</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">in_field</span> <span class="o">=</span> <span class="n">field_3</span>   <span class="o">/</span>

<span class="o">&amp;</span><span class="n">Process</span>  <span class="n">in_file</span>  <span class="o">=</span> <span class="n">file_2</span>       <span class="o">&lt;</span> <span class="n">Specification</span> <span class="n">of</span> <span class="mi">2</span><span class="n">nd</span> <span class="nb">input</span> <span class="n">file</span>
          <span class="n">out_file</span> <span class="o">=</span> <span class="o">...</span>          <span class="o">&lt;</span> <span class="n">Specification</span> <span class="n">of</span> <span class="n">output</span> <span class="n">file</span> <span class="p">(</span><span class="n">repeated</span><span class="p">)</span>

<span class="o">&amp;</span><span class="n">Process</span> <span class="n">in_field</span> <span class="o">=</span> <span class="n">field_4</span>   <span class="o">/</span>   <span class="o">&lt;</span> <span class="n">Specification</span> <span class="n">of</span> <span class="n">fields</span> <span class="n">to</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">in_field</span> <span class="o">=</span> <span class="n">field_5</span>   <span class="o">/</span>     <span class="n">extract</span> <span class="kn">from</span> <span class="nn">second</span> <span class="nb">input</span> <span class="n">file</span>

<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp1_field</span> <span class="o">=</span> <span class="n">field_1</span> <span class="o">/</span>   <span class="o">&lt;</span> <span class="n">First</span> <span class="n">iteration</span><span class="o">.</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp1_field</span> <span class="o">=</span> <span class="n">field_5</span> <span class="o">/</span>     <span class="n">Specification</span> <span class="n">of</span> <span class="n">fields</span> <span class="n">to</span> <span class="n">transfer</span> <span class="ow">or</span> <span class="n">generate</span><span class="p">;</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">tmp1_field</span> <span class="o">=</span> <span class="n">field_6</span> <span class="o">/</span>     <span class="n">field_1</span><span class="o">...</span> <span class="n">field_5</span> <span class="n">are</span> <span class="n">at</span> <span class="n">disposal</span><span class="o">.</span>

<span class="o">&amp;</span><span class="n">Process</span> <span class="n">out_field</span> <span class="o">=</span> <span class="n">field_1</span>  <span class="o">/</span>   <span class="o">&lt;</span> <span class="n">Last</span> <span class="n">iteration</span><span class="o">.</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">out_field</span> <span class="o">=</span> <span class="n">field_5</span>  <span class="o">/</span>     <span class="n">Specification</span> <span class="n">of</span> <span class="n">fields</span> <span class="n">to</span> <span class="n">transfer</span> <span class="ow">or</span> <span class="n">generate</span><span class="p">;</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">out_field</span> <span class="o">=</span> <span class="n">field_6</span>  <span class="o">/</span>     <span class="n">field_1</span><span class="p">,</span> <span class="n">field_5</span><span class="p">,</span> <span class="ow">and</span> <span class="n">field_6</span> <span class="n">are</span> <span class="n">at</span> <span class="n">disposal</span><span class="o">.</span>
<span class="o">&amp;</span><span class="n">Process</span> <span class="n">out_field</span> <span class="o">=</span> <span class="n">field_7</span>  <span class="o">/</span>     <span class="n">All</span> <span class="n">fields</span> <span class="n">specified</span> <span class="n">here</span> <span class="n">are</span> <span class="n">written</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span>
</pre></div>
</div>
<p>When <a class="reference internal" href="runSpec.html#RunSpecification.strict_nl_parsing" title="&amp;RunSpecification.strict_nl_parsing"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;RunSpecification.strict_nl_parsing</span></code></a> is true (which is the default), fieldextra requires that
all <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> definitions associated to each single output follow the order given
in the previous example: first the input/output characteristics are specified
together with the fields to extract, for each contributing input/output pairs,
and only then are the processing iterations specified, in the order of the
iterations that are made.</p>
<p>As explained in detail further on, it is possible to use some shortcuts to
write more compact namelists. In particular it is possible to use an implicit
time loop in the definition of <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a>, and to suppress the out_field group
when all extracted fields have to be available in <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a>.</p>
</section>
<section id="input-files">
<span id="section-4-3-1"></span><h2>Input files<a class="headerlink" href="#input-files" title="Permalink to this heading">#</a></h2>
<p>Regular input (i.e. input not declared as INCORE) is implemented for
the following formats:</p>
<ol class="arabic">
<li><p>GRIB edition 1 or 2, including files mixing the type of GRIB
records. The DWD GRIB library is used to decode GRIB 1 records,
and ECMWF ecCodes is used to decode GRIB 2 records.
Non-standard GRIB 1 modifications used in the COSMO consortia
are supported.</p></li>
<li><p>NetCDF, following the CF 1.6 conventions, with the following
limitations:</p>
<ul>
<li><div class="line-block">
<div class="line">at most one time dimension</div>
<div class="line">(axis=’T’, or standard_name=’time’, or name=’time’)</div>
</div>
</li>
<li><div class="line-block">
<div class="line">at least one X and one Y dimensions</div>
<div class="line">(X: axis=’X’, or standard_name in {‘grid_longitude’,’longitude’…}</div>
<div class="line">or units in {‘degrees_east’,’degree_east’ …};</div>
<div class="line">Y: axis=’Y’, or standard_name in {‘grid_latitude’,’latitude’…}</div>
<div class="line">or units in {‘degrees_north’,’degree_north’ …})</div>
</div>
</li>
<li><p>ignore variables not associated with exactly one X and one
Y dimensions</p></li>
<li><p>ignore variables not associated with a unique valid field
short name</p></li>
</ul>
<p>The dimensions recognized by fieldextra are X, Y, Z, T and the EPS
member dimension.</p>
<p>The NetCDF data is processed as a set of 2d horizontal slices,
i.e. variables with fixed dimensions except X and Y, sorted
according to: time dimension, variables identificator, any
other dimensions (from outer loop to inner loop).</p>
<p>Required field attributes which are missing in the imported
NetCDF file can be set in the namelist header, in particular
by using <a class="reference internal" href="netcdf.html#NetCDFImport.dim_default_attribute" title="&amp;NetCDFImport.dim_default_attribute"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;NetCDFImport.dim_default_attribute</span></code></a> and <a class="reference internal" href="netcdf.html#NetCDFImport.var_default_attribute" title="&amp;NetCDFImport.var_default_attribute"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;NetCDFImport.var_default_attribute</span></code></a>.</p>
<p>The rules to define the short name associated with a NetCDF
variable are: use the <a class="reference internal" href="netcdf.html#module-NetCDFImport" title="&amp;NetCDFImport"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;NetCDFImport</span></code></a> translation table when
available (varname_translation), otherwise use the short name
attribute, otherwise use the variable name itself.
Once a field short has been defined, the NetCDF variable name
is used as field tag; by setting in_duplicate_field=.true.,
this supports working with multiple instances of the same field
in the input file.</p>
</li>
<li><p>BLK_TABLE release 1.8 or higher, with a verbosity level of 2
or higher. The following limitations apply:</p>
<ul class="simple">
<li><p>do not support options epsinfo, pdfinfo, and depreciated;</p></li>
<li><p>shifted grid is not coded in BLK_TABLE, it is assumed that
all fields are defined on mass points;</p></li>
<li><p>reference system is not coded in BLK_TABLE, it is assumed
that all vector fields are defined with respect to geog.
reference system.</p></li>
</ul>
</li>
</ol>
<p>When a choice exists between NetCDF and GRIB2 for the format of the
input files, one should consider the fact that GRIB2 supports more
automated meta-information checks; in this sense, GRIB2 is a better
choice when the consistency of the processing chain has a high
priority.</p>
<p>The following assumptions are made about the content of regular
input files:</p>
<ol class="arabic simple">
<li><p>all fields are valid for the same date;</p></li>
<li><p>each multi-level field is defined for a unique level type;</p></li>
<li><p>when file names only differ by a suffix {.*,c,z,p,s,o,n},
the associated validation dates are identical;</p></li>
<li><p>all fields belong to the same EPS member (if relevant).</p></li>
</ol>
<p>If some of the conditions 1 to 4 are not fulfilled, error messages
of type ‘Bad estimation of internal storage…’ may be issued;
explicitly setting the internal storage size will solve this issue
(see in_size_vdate and in_size_field).</p>
<p>Input files are processed twice: first to collect data for pseudo-output
(INCORE, INSPECT), then to collect data for other output.</p>
<p>Processing order of input files is defined by the following rules:</p>
<dl>
<dt>Case A<span class="classifier"><a class="reference internal" href="#Process.in_read_order" title="&amp;Process.in_read_order"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_read_order</span></code></a> is not set</span></dt><dd><ol class="arabic simple">
<li><p>files with the same time stamp are grouped together
(a file defined both with and without a time stamp is
recognized as a unique input file and sorting is based
on the time stamp value);</p></li>
<li><p>within a group defined by rule (1), files are sorted
according to file path in increasing alphanumeric order;</p></li>
<li><p>groups are sorted according to their common time stamp:
group with empty time stamp is put first,
groups with absolute time stamp are put next,
groups with relative time stamp are put last;
within each of these classes, the order of the groups
follows increasing alphanumeric order of associated
time stamp;</p></li>
<li><p>re-order some special files
(pure input: <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a> not declared as <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a>)</p>
<ol class="arabic simple">
<li><p>move non pure input at the end of the group containing
the last contributing pure input, respecting otherwise
the order defined by (1-2);</p></li>
<li><p>files marked with in_read_first=.true. are moved
at the very start of the list;</p></li>
</ol>
</li>
<li><p>INCORE pseudo-file is accessed on-demand, and, for each
output, before the first contributing standard input file.</p></li>
</ol>
</dd>
<dt>Case B<span class="classifier"><a class="reference internal" href="#Process.in_read_order" title="&amp;Process.in_read_order"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_read_order</span></code></a> is set</span></dt><dd><p>in this case, <a class="reference internal" href="#Process.in_read_order" title="&amp;Process.in_read_order"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_read_order</span></code></a> must be set for all
input files, and in_sort_first is not allowed</p>
<ol class="arabic simple">
<li><p>files are processed following increasing values of
<a class="reference internal" href="#Process.in_read_order" title="&amp;Process.in_read_order"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_read_order</span></code></a>;</p></li>
<li><p>within a group of files having the same value of
<a class="reference internal" href="#Process.in_read_order" title="&amp;Process.in_read_order"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_read_order</span></code></a>, rules 1-3 of case A applies;</p></li>
<li><p>INCORE pseudo-file is accessed on-demand, and, for each
output, before the first contributing standard input file.</p></li>
</ol>
</dd>
</dl>
<p>These rules support the following features:</p>
<ul>
<li><p>concurrent computation of model and postprocessing (rules 1 &amp; 3):</p>
<p>as long as alphanumeric order of time stamps corresponds to
increasing dates, which is the case for the naming conventions
of COSMO, fieldextra expects the input files in the same order
as they are produced by the COSMO model.</p>
</li>
<li><p>just on time mode (rules 1 &amp; 3):</p>
<p>data is stored and processed independently for each validation
date, but order of data in output file respects natural order.</p>
</li>
<li><p>iterative product generation within the same run (rule 4.1):</p>
<p>a first set of rules can be applied to generate an temporary
GRIB file on disk, which is read and processed by another set
of rules later on but within the same run (only a single
intermediate step is supported!); this can be used e.g. to
compute a set of products on different subdomains, derived
from a single set of expensive computations.</p>
</li>
<li><p>minimization of memory footprint for problems where the same
INCORE data is dispatched in multiple output:
on-demand access of INCORE means that the memory allocation
of each receiving output is done at the last possible moment.</p></li>
</ul>
<p>Policy on missing input file is controlled by the values of
wait_time, mx_wait_time, and clone_missing_input (one of
skip [default], clone, wait and exit, wait and clone).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_file">
<span class="sig-name descname"><span class="pre">in_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;input</span> <span class="pre">file</span> <span class="pre">name&gt;</span></em><a class="headerlink" href="#Process.in_file" title="Permalink to this definition">#</a></dt>
<dd><p>The name __INCORE__ is reserved</p>
</dd></dl>

<p>It is often necessary to apply the same operations to a set of
files, each file of the set being characterized by a unique
validation date or representing a different EPS member.
Instead of repeating the <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> group, a mechanism supports
the definition of an implicit loop on the input file name.
This mechanism relies on the file name conventions defined for
the COSMO model.</p>
<p>Note that all files belonging to the same set must have the
same type.</p>
<section id="time-loop">
<h3>time loop<a class="headerlink" href="#time-loop" title="Permalink to this heading">#</a></h3>
<p>If input files associated with different dates are processed,
a generic name using one of the following keyword may be used:</p>
<ul>
<li><div class="line-block">
<div class="line">(lead time loop)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;hh&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;hhh&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;ddhh&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;ddhhmmss&gt;</span></code>,</div>
</div>
</li>
<li><div class="line-block">
<div class="line">(validation date loop)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;yyyy:start_year&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;yyyymmddhh:start_date&gt;</span></code>,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;yyyymmddhhmm:start_date&gt;</span></code>,</div>
</div>
</li>
<li><div class="line-block">
<div class="line">(reference date loop)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyy:start_year&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyymmddhh:start_date&gt;</span></code>,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyymmddhhmm:start_date&gt;</span></code>,</div>
</div>
</li>
<li><div class="line-block">
<div class="line">(time step loop)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;nnnnnnnn&gt;</span></code></div>
</div>
</li>
</ul>
<p>These keywords are primary used to group similar input files,
which supports more compact namelist and help optimize some
internal operations. Usually, besides the file name, no special
meaning is associated with the keyword. In particular,
keywords which are only differentiated through the presence
of the ‘reference_’ string can be used indifferently.</p>
<p>In some cases, however, the associated time stamp is interpreted
as meta-information for the input files records, according to
what is noted in the previous table. Currently, this is the
case when: (1) clone_missing_input is true, to replace missing
files.</p>
<p>Only a single time loop keyword is supported within a generic name,
any additional keyword remains untransformed.</p>
<p>The list of input files is defined by specifying a list of
times, either explicitly …</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tlist">
<span class="sig-name descname"><span class="pre">tlist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;time&gt;,&lt;time&gt;,...</span></em><a class="headerlink" href="#Process.tlist" title="Permalink to this definition">#</a></dt>
<dd><p>-1 means no time list</p>
</dd></dl>

<p>or implicitly …</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tstart">
<span class="sig-name descname"><span class="pre">tstart</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;start</span> <span class="pre">time&gt;</span></em><a class="headerlink" href="#Process.tstart" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tstop">
<span class="sig-name descname"><span class="pre">tstop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;stop</span> <span class="pre">time&gt;</span></em><a class="headerlink" href="#Process.tstop" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tincr">
<span class="sig-name descname"><span class="pre">tincr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;increment&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#Process.tincr" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>The list of input files is created by replacing the time keyword
by each value of the list in turn, according to the following
rules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;hh&gt;</span></code> : time stamp is a two digits hour - specified times are
interpreted as hours</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;hhh&gt;</span></code> : time stamp is a three digits hour - specified times are
interpreted as hours</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;ddhh&gt;</span></code> : time stamp is a two digits day followed by a two
digits hour - specified times are interpreted as hours</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;ddhhmmss&gt;</span></code> : time stamp is a two digits day followed by two
digits hour, minute and second - specified times are
interpreted as seconds (but must represent full minutes)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;yyyy:start_year&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyy:start_year&gt;</span></code> :
time stamp is a 4 digits year - specified times are
interpreted as years</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;yyyymmddhh:start_date&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyymmddhh:start_date&gt;</span></code> :
time stamp is a 4 digits year followed by two digits month,
day and hour - specified times are interpreted as hours and
added to start_date (which must use the same representation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;yyyymmddhhmm:start_date&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyymmddhhmm:start_date&gt;</span></code> :
time stamp is a 4 digits year followed by two digits month,
day, hour and minute - specified times are interpreted as
minutes and added to start_date (which must use the same
representation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;nnnnnnnn&gt;</span></code> : time stamp is expressed in number of time steps</p></li>
</ul>
<p>Temporal granularity of input fields down to one minute is
supported.</p>
</section>
<section id="eps-loop">
<h3>eps loop<a class="headerlink" href="#eps-loop" title="Permalink to this heading">#</a></h3>
<p>If input files associated with different EPS members are processed,
a generic name using one of the following keyword may be used:</p>
<ul>
<li><div class="line-block">
<div class="line">(EPS member identity)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;mm&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;mmm&gt;</span></code></div>
</div>
</li>
</ul>
<p>As for the previous discussion about the time loop, the same remarks
about the meaning of these keywords apply.</p>
<p>Only a single eps loop keyword is supported within a generic name,
any additional keyword remains untransformed.</p>
<p>The list of input files is defined by specifying a list of
members, either explicitely …</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.epslist">
<span class="sig-name descname"><span class="pre">epslist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;eps</span> <span class="pre">member&gt;,&lt;eps</span> <span class="pre">member&gt;,...</span></em><a class="headerlink" href="#Process.epslist" title="Permalink to this definition">#</a></dt>
<dd><p>-1 means no eps list</p>
</dd></dl>

<p>or implicitly …</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.epsstart">
<span class="sig-name descname"><span class="pre">epsstart</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;start</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em><a class="headerlink" href="#Process.epsstart" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.epsstop">
<span class="sig-name descname"><span class="pre">epsstop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;stop</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em><a class="headerlink" href="#Process.epsstop" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.epsincr">
<span class="sig-name descname"><span class="pre">epsincr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;increment</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#Process.epsincr" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>The list of input files is created by replacing the keyword by a
two (<code class="docutils literal notranslate"><span class="pre">&lt;mm&gt;</span></code>) or three (<code class="docutils literal notranslate"><span class="pre">&lt;mmm&gt;</span></code>) digits string, for each member of the
epslist in turn.</p>
</section>
<section id="other-characteristics">
<h3>other characteristics<a class="headerlink" href="#other-characteristics" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_type">
<span class="sig-name descname"><span class="pre">in_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;input</span> <span class="pre">file</span> <span class="pre">type&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'PLAIN'</span></em><a class="headerlink" href="#Process.in_type" title="Permalink to this definition">#</a></dt>
<dd><p>In addition to plain input files, this program may also access pseudo
files used as intermediate storage. In this case the value of in_type
has to be set.
Possible values of in_type are:</p>
<dl class="simple">
<dt>INCORE  :</dt><dd><p>pseudo input type to support direct access to fields
stored in INCORE storage (see 4.3.2 below). The
parameter <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a> must not be set in this case.</p>
</dd>
<dt>PLAIN   :</dt><dd><p>plain input file; the format currently supported are
WMO GRIB, edition 1 and 2, NetCDF (CF convention), and
BLK_TABLE release 1.8 or higher.</p>
</dd>
</dl>
<p>It may be necessary to change the programatic sorting of input files,
as described at the beginning of this section, in order to reduce the
memory footprint of some applications (see 2.5). This is possible by
using one of the following mutually exclusive variables:</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_read_first">
<span class="sig-name descname"><span class="pre">in_read_first</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">logical</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.false.</span></em><a class="headerlink" href="#Process.in_read_first" title="Permalink to this definition">#</a></dt>
<dd><p>forces the associated input file to be processed just
after INCORE pseudo-input. Not compatible with input also declared as
output in another procesing block.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_read_order">
<span class="sig-name descname"><span class="pre">in_read_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;strictly</span> <span class="pre">positive</span> <span class="pre">integer&gt;</span></em><a class="headerlink" href="#Process.in_read_order" title="Permalink to this definition">#</a></dt>
<dd><p>default undefined</p>
<p>the input files will be processed following increasing
order of in_read_order, but, in any cases, after INCORE pseudo-input;
within a group having the same in_read_order value, the order is the
programatic order. When used, each standard input file must be
associated with a value of in_read_order. Values must be set to
ensure that any input also declared as output in another procesing
block is processed after all ‘pure’ input files.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_dictionary">
<span class="sig-name descname"><span class="pre">in_dictionary</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">string</span></em><a class="headerlink" href="#Process.in_dictionary" title="Permalink to this definition">#</a></dt>
<dd><p>supersede value of default_dictionary</p>
<p>Re-define the active dictionary used to decode and process the fields
extracted from the associated input file.</p>
<p>When available, it is checked that the values of MODEL_TYPE and of
PRODUCT_CATEGORY are compatible with the characteristics of the decoded
record.</p>
<p>The special value __AUTO__ is used to defer the choice of the dictionary
till a record is decoded, independently for each record. The dictionary
is selected on the basis of the decoded model type and product category,
in the list of dictionaries specified in <a class="reference internal" href="globRes.html#module-GlobalResource" title="&amp;GlobalResource"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalResource</span></code></a>
is associated with a model type (keyword MODEL_TYPE) and, optionaly, with
a list of product category (keyword PRODUCT_CATEGORY), and these
information are used to select the active dictionary:
first a dictionary with an exact match is looked for. If not found, a
dictionary with PRODUCT_CATEGORY set to blank and a matching model type
is looked for. If not found, a dictionary with MODEL_TYPE set to blank
is looked for.
The special value __AUTO__ mainly supports the use of fieldextra as a
computation engine in a wrapper script. It can only be used in conjunction
with in_field=’__ALL__’.</p>
<p>It is not allowed to collect fields associated with different dictionaries
in the same output (see also ‘ignore_model_identity’).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.default_product_category">
<span class="sig-name descname"><span class="pre">default_product_category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">string</span></em><a class="headerlink" href="#Process.default_product_category" title="Permalink to this definition">#</a></dt>
<dd><p>default product category for associated input</p>
<p>The default product category is used to supplement missing or unrecognized
information in the input records of the associated file.</p>
<p>See the definition of <a class="reference internal" href="globSet.html#GlobalSettings.default_product_category" title="&amp;GlobalSettings.default_product_category"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.default_product_category</span></code></a> for the list of
supported values and a discussion on the use of this parameter.</p>
</dd></dl>

</section>
</section>
<section id="output-files">
<span id="section-4-3-2"></span><h2>Output files<a class="headerlink" href="#output-files" title="Permalink to this heading">#</a></h2>
<p>For each output file, the set of contributing input is built using
the definitions found in the <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> block(s) where this output is
mentioned; the set of input fields available for the production of
this ouput is limited to the contributing input files.</p>
<p>The set of contributing input depends on the usage of time and eps
keywords in the definition of the input and the output, on the
usage of <a class="reference internal" href="#Process.tlag" title="&amp;Process.tlag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tlag</span></code></a> and on the usage of <a class="reference internal" href="#Process.out_group_eps" title="&amp;Process.out_group_eps"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_group_eps</span></code></a>, as explained below.</p>
<p>Normally, the production of any specified output is done only once all
contributing input files have been processed, or, at the latest, at the
end of the program. However, to optimize the memory footprint, the
program will try in some cases to generate the output file ‘on the fly’,
by appending new data to the output file each time a contributing input
has been processed. This is the so-called ‘just on time’ mode.</p>
<dl class="simple">
<dt><strong>‘just on time mode’</strong></dt><dd><ul class="simple">
<li><p>by default, automatically set, independently for each output
(but <a class="reference internal" href="#Process.out_type_justontime" title="&amp;Process.out_type_justontime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_justontime</span></code></a> allows explicit control)</p></li>
<li><p>this mode controls the way multiple validation times are
processed: either in one pass at the end of the program,
or each time the data for a specific validation time have
been collected. In this latter case the memory footprint
of the program may be drastically reduced.</p></li>
<li><p>The following conditions must be satisfied for this mode
to be active:</p>
<ul>
<li><p>output supports just on time mode (supports the use
of <a class="reference internal" href="#Process.out_type_justontime" title="&amp;Process.out_type_justontime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_justontime</span></code></a>, see output characteristics in
<a class="reference internal" href="../output.html#chapter-7"><span class="std std-ref">Description of output format</span></a>)</p></li>
<li><p>all time operators are set to identity</p></li>
<li><p>no computed fields requiring parents on multiple time levels</p></li>
<li><p>no use of out_postproc_module (could contain time operator)</p></li>
<li><p>no use of time stamp in <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a> definition</p></li>
<li><p>all contributing input files, with the exception of INCORE,
are declared with the same non trivial time keyword and are
associated with the same time list.</p></li>
</ul>
</li>
</ul>
</dd>
</dl>
<p>For real time applications, such as the post-processing of the direct
model output in a production suite, fieldextra can be configured to
generate partial output concurrently to the further processing of new
input files. This can be achieved by using the so called</p>
<dl class="simple">
<dt><strong>‘snapshot mode’</strong></dt><dd><p>the program runs concurrently to the production of input files
and wait for input files as necessary (controlled by <a class="reference internal" href="runSpec.html#RunSpecification.wait_time" title="&amp;RunSpecification.wait_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;RunSpecification.wait_time</span></code></a> and
<a class="reference internal" href="runSpec.html#RunSpecification.mx_wait_time" title="&amp;RunSpecification.mx_wait_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;RunSpecification.mx_wait_time</span></code></a>). The production of intermediate (incomplete) output may
be triggered by the use of out_type_snapshot.</p>
</dd>
</dl>
<p>To guarantee the integrity of output files during production, the
postfix ‘.iolck’ is appended to the output file name during the io
operations.</p>
<p>When output files are iteratively produced, it is possible to flag
all output files which are not yet complete. This is achieved by
setting <a class="reference internal" href="runSpec.html#RunSpecification.out_noready_postfix" title="&amp;RunSpecification.out_noready_postfix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;RunSpecification.out_noready_postfix</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_file">
<span class="sig-name descname"><span class="pre">out_file</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;output</span> <span class="pre">file</span> <span class="pre">name&gt;</span></em><a class="headerlink" href="#Process.out_file" title="Permalink to this definition">#</a></dt>
<dd><p>The names __INCORE__ and __INSPECT__ are reserved</p>
</dd></dl>

<section id="time-and-eps-loop">
<h3>time and eps loop<a class="headerlink" href="#time-and-eps-loop" title="Permalink to this heading">#</a></h3>
<p>As for the definition of <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a>, it is possible to use a generic
name for <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a>, using one of the following keyword:</p>
<dl class="simple">
<dt>time related, refer to <a class="reference internal" href="#Process.tstart" title="&amp;Process.tstart"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tstart</span></code></a> or <a class="reference internal" href="#Process.tlist" title="&amp;Process.tlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tlist</span></code></a> :</dt><dd><p><code class="docutils literal notranslate"><span class="pre">&lt;hh&gt;</span></code> <a class="footnote-reference brackets" href="#id6" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, <code class="docutils literal notranslate"><span class="pre">&lt;hhh&gt;</span></code> <a class="footnote-reference brackets" href="#id6" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, <code class="docutils literal notranslate"><span class="pre">&lt;ddhh&gt;</span></code> <a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, <code class="docutils literal notranslate"><span class="pre">&lt;ddhhmmss&gt;</span></code> <a class="footnote-reference brackets" href="#id6" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>,
<code class="docutils literal notranslate"><span class="pre">&lt;yyyy:start_year&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyy:start_year&gt;</span></code>
<code class="docutils literal notranslate"><span class="pre">&lt;yyyymmddhh:start_date&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyymmddhh:start_date&gt;</span></code>
<code class="docutils literal notranslate"><span class="pre">&lt;yyyymmddhhmm:start_date&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;reference_yyyymmddhhmm:start_date&gt;</span></code>
<code class="docutils literal notranslate"><span class="pre">&lt;nnnnnnnn&gt;</span></code> <a class="footnote-reference brackets" href="#id6" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
</dd>
<dt>eps related, refer to <a class="reference internal" href="#Process.epsstart" title="&amp;Process.epsstart"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.epsstart</span></code></a> or <a class="reference internal" href="#Process.epslist" title="&amp;Process.epslist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.epslist</span></code></a> :</dt><dd><p><code class="docutils literal notranslate"><span class="pre">&lt;mm&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;mmm&gt;</span></code></p>
</dd>
</dl>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id3">3</a>,<a role="doc-backlink" href="#id4">4</a>,<a role="doc-backlink" href="#id5">5</a>)</span>
<p>These time related keywords support a constant shift
in their definition. This shift can be both positive or negative and
is expressed as in the following example: <code class="docutils literal notranslate"><span class="pre">&lt;ddhh+shift&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;ddhh-shift&gt;</span></code>.
This functionality supports in particular the construction of lagged
ensemble.</p>
</aside>
</aside>
<p>As for <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a>, the list of output files is constructed by replacing
the eps or time keyword with each element of the specified eps or time
list in turn (as specified by <a class="reference internal" href="#Process.epslist" title="&amp;Process.epslist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.epslist</span></code></a>, <a class="reference internal" href="#Process.epsstart" title="&amp;Process.epsstart"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.epsstart</span></code></a>… or <a class="reference internal" href="#Process.tlist" title="&amp;Process.tlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tlist</span></code></a>, <a class="reference internal" href="#Process.tstart" title="&amp;Process.tstart"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tstart</span></code></a>…).
In case of time keyword, the units for the values of the time list
are defined according to the <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a> time keyword, if present;
otherwise the <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a> time keyword defines these units.</p>
<p>These keywords are primary used to group similar output files created
with the same operations, which supports more compact namelist and
help optimize some internal operations. However, this feature also
supports some additional functionalities, such as distributing the
input file records in multiple output (see <a class="reference internal" href="#Process.out_shuffle_time" title="&amp;Process.out_shuffle_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_shuffle_time</span></code></a> and <a class="reference internal" href="#Process.out_shuffle_eps" title="&amp;Process.out_shuffle_eps"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_shuffle_eps</span></code></a>).</p>
<p>When the set of contributing input files has been defined by an
implicit time loop (generic name), it is possible to restrict the
set of output files, when <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a> is defined by a generic name,
and the set of active dates collected in each output, by defining
a new time list :</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_tstart">
<span class="sig-name descname"><span class="pre">out_tstart</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;start</span> <span class="pre">time</span> <span class="pre">for</span> <span class="pre">filtering</span> <span class="pre">output&gt;</span></em><a class="headerlink" href="#Process.out_tstart" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_tstop">
<span class="sig-name descname"><span class="pre">out_tstop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;stop</span> <span class="pre">time</span> <span class="pre">for</span> <span class="pre">filtering</span> <span class="pre">output&gt;</span></em><a class="headerlink" href="#Process.out_tstop" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_tincr">
<span class="sig-name descname"><span class="pre">out_tincr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;increment</span> <span class="pre">for</span> <span class="pre">filtering</span> <span class="pre">output&gt;</span></em><a class="headerlink" href="#Process.out_tincr" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>The effects of this time list are:</p>
<ol class="arabic simple">
<li><p>Restrict the set of produced output files to those having a
time stamp part of the list (files without time stamp are not
filtered out);</p></li>
<li><p>For each output, restrict the set of collected dates to the ones
present in the contributing input files with a matching time stamp
(files without time stamp are not filtered out). Note that any
operator defined for the production of the output (e.g. <a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a> )
has access to all time levels, the filter acting only after the
generation of the output fields.</p></li>
</ol>
<p>The set of input fields available for the production of some output
is restricted by the set of input files associated with the concerned
output. When the output file contains a time or eps keyword in its
definition, the default rule is to associate the files with the same
time or eps keyword.
This default behaviour does not support the case where multiple time
levels or multiple EPS members are required to compute the output
fields (e.g. use of <a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a>, computation of EPS derived fields). For
this reason the default rule can be changed by the usage of <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process:tlag</span></code>
or <a class="reference internal" href="#Process.out_group_eps" title="&amp;Process.out_group_eps"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_group_eps</span></code></a>, as explained below.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tlag">
<span class="sig-name descname"><span class="pre">tlag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;start</span> <span class="pre">time&gt;[,&lt;stop</span> <span class="pre">time&gt;[,&lt;increment&gt;]]</span></em><a class="headerlink" href="#Process.tlag" title="Permalink to this definition">#</a></dt>
<dd><p>The variable <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process:tlag</span></code> defines a set of times through an implicit time loop;
the following conditions must be respected:</p>
<ul class="simple">
<li><p>start time &lt;= 0, start time &lt;= stop time, increment &gt; 0</p></li>
<li><p>0 must be part of the set of time</p></li>
</ul>
<p>The set of times defined through <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process:tlag</span></code> specifies the set of input files
contributing to each output, expressed as time differences relatively
to the time stamp defined for each concerned output:</p>
<p>Let’s T be the time associated with the current output.
Let’s tlag(1), tlag(2), … be the list of times derived from tlag.
The contributing input files are those built with the time stamps
T+tlag(1), T+tlag(2), … , T+tlag(n)</p>
<p>All associated time levels (and only these) are available for any
operator; however, only the time level associated with T is written
in the concerned output file.</p>
<p>Two optional syntax are also supported:</p>
<ul>
<li><p>When <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process:tlag</span></code> is only defined through &lt;start time&gt;, the other components
take the values</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">stop</span> <span class="n">time</span><span class="o">&gt;</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&lt;</span><span class="n">increment</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="o">&lt;</span><span class="n">start</span> <span class="n">time</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>When &lt;increment&gt; is missing, but &lt;stop time&gt; is present, the increment
takes the value</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">increment</span><span class="o">&gt;</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Furthermore, in this case (and only in this case) contributing
input files associated with T+tlag(i) may be missing without
triggering an exception. This syntax should be used when working
with irregular list of times.</p>
</li>
</ul>
<p>The variable tlag is mostly used in relation with a temporal operator
(<a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a>), when the fields in each output file are the result of some
temporal transformation, but a unique output file is desired for each
time level; in this situation, it is important to make sure that the
set of contributing times specified by <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process:tlag</span></code> is compatible with the
set of times levels required by <a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a>, as specified in <a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a> argument.</p>
<p>Note that <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process:tlag</span></code> can only be set when both <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a> and <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a> are
defined as generic name, with a time keyword.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_group_eps">
<span class="sig-name descname"><span class="pre">out_group_eps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;.TRUE.</span> <span class="pre">or</span> <span class="pre">.FALSE.&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_group_eps" title="Permalink to this definition">#</a></dt>
<dd><p>Controls the interpretation of <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> blocks using eps keywords
in the definition of outfile. By default, each output defined in
such a <a class="reference internal" href="#module-Process" title="&amp;Process"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a> block is only associated with the input having
the same EPS identity (or with any input without eps keyword); this
prohibits the usage of operators requiring access to all EPS
members.
By setting out_group_eps to true, a unique common internal storage
is used for all outfile sharing the same EPS keyword; this removes
the previously stated limitation on the supported operators.</p>
<p>A typical application of this feature is to implement a transformation
of a set of EPS members, with each member in a unique file, where the
transformation uses EPS reduction operators (e.g. mean, deviation).</p>
<p>When setting <a class="reference internal" href="#Process.in_size_field" title="&amp;Process.in_size_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_size_field</span></code></a>, consider all fields contributing to the
common internal storage (this means in particular multiplying the
number of extracted fields by the number of distinct EPS members in
the contributing input).</p>
<p>When a problem is detected in the production of one of the output,
the production of all other associated output is interrupted.</p>
</dd></dl>

<p>The following operators are used to split an input file into multiple output,
grouping fields with the same characteristics in the same output.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_shuffle_time">
<span class="sig-name descname"><span class="pre">out_shuffle_time</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;.TRUE.</span> <span class="pre">or</span> <span class="pre">.FALSE.&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_shuffle_time" title="Permalink to this definition">#</a></dt>
<dd><p>By setting <a class="reference internal" href="#Process.out_shuffle_time" title="&amp;Process.out_shuffle_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_shuffle_time</span></code></a> to true, the fields are dispatched in
different output on the basis of their reference date, validation
date or lead time. A time keyword must be used in the definition
of <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a>, and a list of times must be specified. The way the
fields are grouped depends on the time keyword:</p>
<ul class="simple">
<li><p>when using &lt;yyyy:start_year&gt;, fields with the same year
of validity are grouped together;</p></li>
<li><p>when using one of &lt;yyyymmddhh:start_date&gt; or
&lt;yyyymmddhhmm:start_date&gt;, fields with the same validation
date are grouped together;</p></li>
<li><p>when using &lt;reference_yyyy:start_year&gt;, fields with the
same year of reference are grouped together;</p></li>
<li><p>when using one of &lt;reference_yyyymmddhh:start_date&gt; or
&lt;reference_yyyymmddhhmm:start_date&gt;, fields with the same
reference date are grouped together;</p></li>
<li><p>when using &lt;hh&gt;, &lt;hhh&gt;, &lt;ddhh&gt; or &lt;ddhhmmss&gt;, fields with
the same lead time are grouped together.</p></li>
</ul>
<p>Constant fields are dispatched in all output.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_shuffle_eps">
<span class="sig-name descname"><span class="pre">out_shuffle_eps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;.TRUE.</span> <span class="pre">or</span> <span class="pre">.FALSE.&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_shuffle_eps" title="Permalink to this definition">#</a></dt>
<dd><p>By setting <a class="reference internal" href="#Process.out_shuffle_eps" title="&amp;Process.out_shuffle_eps"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_shuffle_eps</span></code></a> to true, the fields are distributed
in different output on the basis of their EPS member values. An
EPS member keyword must be used in the definition of <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a>,
and a list of EPS members must be specified. EPS fields not
associated with a specific EPS member value (e.g. mean), and
non EPS fields are dispatched in all output.</p>
</dd></dl>

</section>
<section id="in-field-manipulation">
<h3>in field manipulation<a class="headerlink" href="#in-field-manipulation" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_duplicate_field">
<span class="sig-name descname"><span class="pre">in_duplicate_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;.TRUE.</span> <span class="pre">or</span> <span class="pre">.FALSE.&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.in_duplicate_field" title="Permalink to this definition">#</a></dt>
<dd><p>By default a single instance of each 2d field is allowed in the
<a class="reference internal" href="#Process.in_field" title="&amp;Process.in_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_field</span></code></a> iteration (a 2d field is characterized by its short name,
level, eps identity…). This can be changed by setting
<a class="reference internal" href="#Process.in_duplicate_field" title="&amp;Process.in_duplicate_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_duplicate_field</span></code></a> to true.</p>
<p>When <a class="reference internal" href="#Process.in_duplicate_field" title="&amp;Process.in_duplicate_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_duplicate_field</span></code></a> is true, tags in the <a class="reference internal" href="#Process.in_field" title="&amp;Process.in_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_field</span></code></a> iteration
may be inherited from the input file or may be programatically set,
as explained in <a class="reference internal" href="#Process.tag" title="&amp;Process.tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tag</span></code></a>.
This is required to discriminate between multiple instances of the same field.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_autotag">
<span class="sig-name descname"><span class="pre">out_autotag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;.TRUE.</span> <span class="pre">or</span> <span class="pre">.FALSE.&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_autotag" title="Permalink to this definition">#</a></dt>
<dd><p>Tags are programatically set when <a class="reference internal" href="#Process.out_autotag" title="&amp;Process.out_autotag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_autotag</span></code></a> is true. Each input
field not associated with a user defined tag or an inherited tag is
tagged with ‘__autotag_fn_#__’, # being the order of occurence
of the corresponding field in the input stream and fn the field
short name.</p>
</dd></dl>

<p>The association between contributing input records and inherited
or automatic tags is documented in ‘fieldextra.diagnostic’ when
<a class="reference internal" href="runSpec.html#RunSpecification.additional_diagnostic" title="&amp;RunSpecification.additional_diagnostic"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;RunSpecification.additional_diagnostic</span></code></a> is set to true.</p>
<p>A specific instance of a field can be selected in the <a class="reference internal" href="#Process.in_field" title="&amp;Process.in_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_field</span></code></a>
iteration by setting <a class="reference internal" href="#Process.use_tag" title="&amp;Process.use_tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_tag</span></code></a> to the value of the inherited or
automatic tag.</p>
<p>Note that it is necessary to explicitely set the number of
contributing fields when setting <a class="reference internal" href="#Process.in_duplicate_field" title="&amp;Process.in_duplicate_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_duplicate_field</span></code></a>, by
using <a class="reference internal" href="#Process.in_size_field" title="&amp;Process.in_size_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_size_field</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_size_field">
<span class="sig-name descname"><span class="pre">in_size_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">[&lt;size1&gt;,]</span> <span class="pre">&lt;size2&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0,0</span></em><a class="headerlink" href="#Process.in_size_field" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_size_vdate">
<span class="sig-name descname"><span class="pre">in_size_vdate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;size&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#Process.in_size_vdate" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>The size of the internal storage is automatically evaluated on the
assumption mentioned at the beginning of the section <a class="reference internal" href="#section-4-3-1"><span class="std std-ref">Input files</span></a>. If some of these assumptions are not respected, it may
be necessary to manually set these values. These parameters can also
be used to minimize the memory footprint when the program is unable
to precisely estimate the required storage (<code class="docutils literal notranslate"><span class="pre">selection_mode=EXCLUDE</span></code>,
<code class="docutils literal notranslate"><span class="pre">selection_mode=INCLUDE_ALL</span></code>, <code class="docutils literal notranslate"><span class="pre">in_field=__ALL__</span></code>).</p>
<p>The value of <a class="reference internal" href="#Process.in_size_field" title="&amp;Process.in_size_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_size_field</span></code></a> specifies the field dimension of the
storage size (each 2d field takes one slot), and the value of
<a class="reference internal" href="#Process.in_size_vdate" title="&amp;Process.in_size_vdate"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_size_vdate</span></code></a>  specifies the validation date dimension of the
storage size.</p>
<p>When two <a class="reference internal" href="#Process.in_size_field" title="&amp;Process.in_size_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_size_field</span></code></a> values are specified, the first value refers
to the size of the storage required for the first contributing input
file, and the second value refers to the total required size; this is
used to support memory optimization <a class="reference internal" href="#Process.in_read_first" title="&amp;Process.in_read_first"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_read_first</span></code></a>.</p>
<p>These values must not be exact, but should define an upper bound
of the required storage size.</p>
</section>
<section id="controling-load-balance">
<h3>controling load balance<a class="headerlink" href="#controling-load-balance" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_cost">
<span class="sig-name descname"><span class="pre">out_cost</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;positive</span> <span class="pre">integer&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#Process.out_cost" title="Permalink to this definition">#</a></dt>
<dd><p>To improve the load balance of the code running in parallel mode, a
relative cost can be given to each output. The relative cost is
expressed as a strictly positive integer, larger values meaning more
expensive products. A cost of 1 is defined per default.</p>
<p>See <a class="reference internal" href="../usage.html#section-2-6"><span class="std std-ref">Shared memory multitasking</span></a> for more details.</p>
</dd></dl>

</section>
<section id="re-gridding">
<h3>re-gridding<a class="headerlink" href="#re-gridding" title="Permalink to this heading">#</a></h3>
<p>As a general rule, all fields collected for a specific output must be defined
on a common grid. Exceptions are for fields defined on a staggered grid, and
when the target grid is a subset of the grid associated with the input field.</p>
<p>It is possible to re-grid any input fields from its native grid to a common
base grid; one has to specify a re-gridding algorithm, and each input field
flagged with <code class="docutils literal notranslate"><span class="pre">regrid=.true.</span></code> (or all fields when  <a class="reference internal" href="#Process.in_regrid_all" title="&amp;Process.in_regrid_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_all</span></code></a> is true) will
be interpolated on the common base grid just after being extracted from the
input file (see detailed description below).</p>
<p>The following possibilities are available when working with fields defined
on staggered grid:</p>
<ol class="arabic simple">
<li><p>The user re-grid the fields defined on the staggered grid by using the
<a class="reference internal" href="#Process.in_regrid_method" title="&amp;Process.in_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_method</span></code></a> operator described below. This method is global,
meaning that de-staggering is computed once when collecting the
concerned fields, the de-staggered field being dispatch in all
output using this field.</p></li>
<li><p>The user re-grid the fields defined on the staggered grid by using the
horizontal operator <code class="docutils literal notranslate"><span class="pre">hoper='destagger'</span></code> (see <a class="reference internal" href="#Process.hoper" title="&amp;Process.hoper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.hoper</span></code></a>). This
operator can be used in any processing iteration; with the use of tags,
this operator support having both staggered and un-staggered version
of the same field (or of derived fields) in the same output.</p></li>
<li><p>The user specifies the model base grid with in_regrid_target=’tag’,
without defining a re-gridding algorithm; the program will keep track
of the field native grid when a supported staggering is detected, but
will not re-grid these fields (this option is only possible when the
chosen output type supports staggered grids, e.g. GRIB1 or BLK_TABLE,
or when the staggered fields are only used temporarily to compute some
derived quantity).</p></li>
<li><p>The user specifies the model base grid with <code class="docutils literal notranslate"><span class="pre">in_regrid_target='__AUTO__'</span></code>,
without defining a re-gridding algorithm; this is in principle equivalent
to 3., the model base grid being in this case defined as the grid
associated with the first collected field. This switch is mainly used
to support wrapper scripts and should be used with caution (some operators
require an absolute positioning of the parent fields with respect to the
model base grid, and may produce erroneous results when defining some
arbitrary base grid).</p></li>
</ol>
<p>The following possibilities are available when the target grid is a subset
of the grid associated with the input field:</p>
<ol class="arabic simple">
<li><p>The user re-grid the fields defined on the original grid by using the
<a class="reference internal" href="#Process.in_regrid_method" title="&amp;Process.in_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_method</span></code></a> operator described below.</p></li>
<li><p>The user specifies the common target grid with <code class="docutils literal notranslate"><span class="pre">in_regrid_target='tag'</span></code>,
without defining a re-gridding algorithm (tag refers to some INCORE
field); all input fields will be cropped to match <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>.</p></li>
</ol>
<p>This latter mechanism (point 2 above) can also be used when working with
fields which are both staggered and defined on a larger domain than the
target domain. However, in this case, the de-staggering is not always
unambiguously defined; the convention is then to use a positive staggering.</p>
<p>Further opportunity to re-grid all collected fields associated with a specific
output is provided by the operator  <a class="reference internal" href="#Process.out_regrid_target" title="&amp;Process.out_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_regrid_target</span></code></a>  (see description later on).</p>
<p>When both  <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>  and  <a class="reference internal" href="#Process.in_regrid_method" title="&amp;Process.in_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_method</span></code></a>  are defined, field interpolation
will take place:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_regrid_target">
<span class="sig-name descname"><span class="pre">in_regrid_target</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;target</span> <span class="pre">grid</span> <span class="pre">for</span> <span class="pre">re-gridding,</span> <span class="pre">or</span> <span class="pre">common</span> <span class="pre">base</span> <span class="pre">grid&gt;</span></em><a class="headerlink" href="#Process.in_regrid_target" title="Permalink to this definition">#</a></dt>
<dd><p>This can be one of</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;__AUTO\__&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&lt;tag&gt;&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&lt;grid&gt;,&lt;xmin&gt;,&lt;ymin&gt;,&lt;xmax&gt;,&lt;ymax&gt;,&lt;dx&gt;,&lt;dy&gt;&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&lt;grid&gt;,&lt;xmin&gt;,&lt;ymin&gt;,&lt;xmax&gt;,&lt;ymax&gt;,&lt;dx&gt;,&lt;dy&gt;,&lt;pollon&gt;,&lt;pollat&gt;&quot;</span></code></p></li>
</ul>
<p>with:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&lt;tag&gt;</span></code>:</dt><dd><p>tag of incore field used to define output grid</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;grid&gt;</span></code>:</dt><dd><p>target coordinates (one of “swiss”,”boaga-west”,”boaga-east”, “geolatlon”,”rotlatlon”)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;xmin&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;ymin&gt;</span></code>:</dt><dd><p>coord. of start point (south-west)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;xmax&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;ymax&gt;</span></code>:</dt><dd><p>coord. of end point (north-east)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;dx&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;dy&gt;</span></code>:</dt><dd><p>increments in each direction (&gt; 0)</p>
</dd>
</dl>
<p>and for grid=”rotlatlon”</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&lt;pollat&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;pollon&gt;</span></code>:</dt><dd><p>latitude and longitude of rotated N pole</p>
</dd>
</dl>
<p>coordinates translate as:</p>
<ul class="simple">
<li><p>x refers to West-East direction</p></li>
<li><p>y refers to South-North direction</p></li>
</ul>
<p>where all values are integers expressed in units of</p>
<ul class="simple">
<li><p>[m] for swiss, boaga-west, boaga-east</p></li>
<li><p>[10**-6 degree] for geolatlon, rotlatlon</p></li>
</ul>
<p>allowed range for x and y are defined in the following table</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>target coordinates</p></th>
<th class="head"><p>x (longitude) range</p></th>
<th class="head"><p>y (latitude) range</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>geolation, rotlation</p></td>
<td><p>[0,360000000[</p></td>
<td><p>]-90000000,90000000[</p></td>
</tr>
<tr class="row-odd"><td><p>swiss</p></td>
<td><p>]100000,1100000[</p></td>
<td><p>]-200000,500000[</p></td>
</tr>
<tr class="row-even"><td><p>boaga-west</p></td>
<td><p>]1000000,2000000[</p></td>
<td><p>]4000000,5500000[</p></td>
</tr>
<tr class="row-odd"><td><p>boaga-east</p></td>
<td><p>]2000000,3000000[</p></td>
<td><p>]4000000,5500000[</p></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_regrid_method">
<span class="sig-name descname"><span class="pre">in_regrid_method</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;re-gridding</span> <span class="pre">algorithm(s)&gt;</span></em><a class="headerlink" href="#Process.in_regrid_method" title="Permalink to this definition">#</a></dt>
<dd><p>applied just after data extraction</p>
<p>This can be one of</p>
<ul>
<li><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code></div>
<div class="line">refer to the definition of the regridding method in the active <a class="reference internal" href="modelSpec.html#module-ModelSpecification" title="&amp;ModelSpecification"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;ModelSpecification</span></code></a> (see <a class="reference internal" href="modelSpec.html#ModelSpecification.regrid_method" title="&amp;ModelSpecification.regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;ModelSpecification.regrid_method</span></code></a>)</div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;regrid_method&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;f1&gt;,...:&lt;regrid_method&gt;[,&lt;f2&gt;...:&lt;regrid_method&gt;</span> <span class="pre">...]</span></code>  (only for regrid_method in &amp;ModelSpecification)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&lt;regrid_method&gt;</span></code> can have one of the following forms:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;from_unstructured_grid,&lt;method&gt;[,&lt;argument&gt;]&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&lt;method&gt;,[&lt;neighbourhood&gt;,&lt;neighbourhood_radius&gt;[,&lt;exp_scale&gt;]]&quot;</span></code></p></li>
</ul>
<p>There are multiple methods available, depending on whether we want to re-grid from unstructured or regular grid.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">&lt;method&gt;</span></code></p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p><strong>Re-gridding from unstructured grid</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;rbf&quot;</span></code></p></td>
<td><p>radial basis functions;
supports one optional real argument,
defining the scale factor</p>
<p>‘expert guess’ table for the scale factor:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R02B06</p></td>
<td><p>40km</p></td>
<td><p>0.5</p></td>
</tr>
<tr class="row-odd"><td><p>R02B07</p></td>
<td><p>20km</p></td>
<td><p>0.35</p></td>
</tr>
<tr class="row-even"><td><p>R02B08</p></td>
<td></td>
<td><p>0.2</p></td>
</tr>
<tr class="row-odd"><td><p>R02B09</p></td>
<td></td>
<td><p>0.05</p></td>
</tr>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;byc&quot;</span></code></p></td>
<td><p>barycentric interpolation, meaning
* continuous
* interpolates the data exactly
* no over- and undershoots</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;nnb&quot;</span></code></p></td>
<td><p>nearest neighbour interpolation</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p><strong>Re-gridding from unstructured grid</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;bilinear&quot;</span></code></p></td>
<td><p>bilinear interpolation, using summits of
enclosing source mesh element as control
points
(no other arguments required)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;next_neighbour&quot;</span></code></p></td>
<td><p>value of next neighbour on source grid
(neighbourhood required)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;average&quot;</span></code></p></td>
<td><p>arithmetic mean of values at neighbouring
source points
(neighbourhood required)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;dist_average&quot;</span></code></p></td>
<td><p>inverse distance weighted mean of values
at neighbouring source points
(neighbourhood required)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;log_average&quot;</span></code></p></td>
<td><p>geometric mean of values at neighbouring
source points
(neighbourhood required)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;exp_weight&quot;</span></code></p></td>
<td><p>weighted mean of values at neighbouring
source points; weights given by
exp(-distance(source,target)/exp_scale)
(neighbourhood &amp; exp_scale required)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;linear_fit&quot;</span></code></p></td>
<td><p>approximation by bivariate polynomial of
degree 1
(neighbourhood required)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&quot;dominant&quot;</span></code></p></td>
<td><p>histogram-based determination of the
dominant neighbouring value; only values
in the interval (0,50] are considered and
a bar width of 1 is chosen to set up the
histogram)
(neighbourhood required)</p></td>
</tr>
</tbody>
</table>
</div>
<p>The remaining fill-ins translate as follows</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&lt;neighbourhood&gt;</span></code></dt><dd><p>how to associate source and target points (one of <code class="docutils literal notranslate"><span class="pre">&quot;square&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;circle&quot;</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;neighbourhood_radius&gt;</span></code></dt><dd><p>radius of neighbourhood, in units of target mesh size</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;exp_scale&gt;</span></code></dt><dd><p>factor defining exponential weight</p>
</dd>
</dl>
<p>For <a class="reference internal" href="modelSpec.html#ModelSpecification.regrid_method" title="&amp;ModelSpecification.regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;ModelSpecification.regrid_method</span></code></a>, re-gridding method applicability can be restricted to a set of fields,
as specified by an optional list of one or more comma separated field
short names (<code class="docutils literal notranslate"><span class="pre">&lt;f1&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;f2&gt;</span></code>…); the default re-gridding method is specified
by omitting this list or by using the special short name <code class="docutils literal notranslate"><span class="pre">&quot;__ALL__&quot;</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_regrid_all">
<span class="sig-name descname"><span class="pre">in_regrid_all</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">logical</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">false</span></em><a class="headerlink" href="#Process.in_regrid_all" title="Permalink to this definition">#</a></dt>
<dd><p>switch to re-grid all input fields</p>
<p>When <a class="reference internal" href="#Process.in_regrid_all" title="&amp;Process.in_regrid_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_all</span></code></a> is true, all input fields are re-gridded; otherwise, only the
fields marked with <code class="docutils literal notranslate"><span class="pre">regrid=.true.</span></code> are re-gridded (see the description of regrid
later on).</p>
</dd></dl>

<p>Both re-gridding from regular grids and from unstructured grids are supported.
The definition of the target grid is done with <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>.
The choice of the re-gridding method is set with <a class="reference internal" href="#Process.in_regrid_method" title="&amp;Process.in_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_method</span></code></a>; multiple
methods may be defined, including a default method and a set of field specific
methods (using the <code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code> mechanism).
When re-gridding from unstructured grid, the description of the source grid
must be made available through <a class="reference internal" href="globRes.html#module-GlobalResource" title="&amp;GlobalResource"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalResource</span></code></a>; this case is currently only
implemented for the ICON grid (use <a class="reference internal" href="globRes.html#GlobalResource.icon_grid_description" title="&amp;GlobalResource.icon_grid_description"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalResource.icon_grid_description</span></code></a>
to load the description of the source grid).</p>
<p>Re-gridding on a regular grid is required before further processing of any field
defined on an unstructured grid.</p>
<p>Source points where the field is undefined never contribute to the interpolated
value; this means in particular that the ‘next_neighbour’ method may select
a contributing grid point which is <em>not</em> the nearest neighbour (e.g. when the
value of the field to interpolate at the nearest grid point is undefined)</p>
<p>A different re-gridding algorithm may be defined for each input / output pair.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>distances are to be understood as distance in (i,j) space, and not as geometric distances.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>bilinear interpolation has to be prefered to linear_fit when the target
grid resolution is significantly finer than the source grid resolution.
Result of bilinear interpolation is also more robust than result of a
(localized) linear fit, which depends on the definition of the
neighbourhood, and may produce values outside of the range of
the source values.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the following special cases are automatically detected, and a more
efficient algorithm is used:</p>
<dl class="simple">
<dt>(crop)</dt><dd><p>target mesh is a sub-mesh of input mesh, and the interpolation
method is “next_neighbour”</p>
</dd>
<dt>(2d shift)</dt><dd><p>target mesh is obtained by shifting the source mesh by an
amount smaller than the mesh size, either in i or in j
direction, and the interpolation method is a (weighted)
mean of the two nearest points (in particular one of
“average” or “dist_average” must be used)</p>
</dd>
</dl>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when ‘additional_diagnostic’ is set to true, the following information
is available in the file fieldextra.diagnostic (when re-gridding from
a regular grid):</p>
<ul class="simple">
<li><p>location of target grid in source coordinate system</p></li>
<li><p>location of center of source grid in target coordinate system</p></li>
<li><p>neighbourhood size in terms of source grid element size</p></li>
<li><p>average number of source points contributing to each target value</p></li>
</ul>
<p>It is advised to check this information when defining a new re-gridding
transformation!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it is possible to work on a subdomain of the grid specified by
<a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>, by setting the values of imin, imax, jmin, jmax
(see later on for the definition of these parameters)</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when re-gridding from unstructured grid to regular grid with the
“rbf” method, it is possible (but not recommended) to specify the
scale factor. When not specified, the scale factor is internally
computed, and the (range of) computed value can be printed out by
setting ictools_debug_level=1 in <a class="reference internal" href="runSpec.html#module-RunSpecification" title="&amp;RunSpecification"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;RunSpecification</span></code></a> (look for
“min/max shape parameter:” in fieldextra standard diagnostic,
the shape parameter being the inverse of the scale factor).</p>
</div>
</section>
<section id="ensembles">
<h3>Ensembles<a class="headerlink" href="#ensembles" title="Permalink to this heading">#</a></h3>
<p>Fieldextra supports composed EPS, i.e. ensembles build by merging different
model runs. For example, it can be a lagged ensemble, built from a collection
of determinist runs with differing start times, or it can be the merging of
two or more standard EPS runs.</p>
<p>Each model run contributing to such a composed EPS is tagged by a unique
‘group’ value.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.epsgroup">
<span class="sig-name descname"><span class="pre">epsgroup</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;group</span> <span class="pre">id;</span> <span class="pre">strictly</span> <span class="pre">positive</span> <span class="pre">integer&gt;</span></em><a class="headerlink" href="#Process.epsgroup" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.epsgroup_size">
<span class="sig-name descname"><span class="pre">epsgroup_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;nbr.</span> <span class="pre">of</span> <span class="pre">EPS</span> <span class="pre">members</span> <span class="pre">associated</span> <span class="pre">with</span> <span class="pre">epsgroup;</span> <span class="pre">integer&gt;</span></em><a class="headerlink" href="#Process.epsgroup_size" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.epscomposed_size">
<span class="sig-name descname"><span class="pre">epscomposed_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;total</span> <span class="pre">nbr.</span> <span class="pre">of</span> <span class="pre">EPS</span> <span class="pre">members</span> <span class="pre">in</span> <span class="pre">composed</span> <span class="pre">system;</span> <span class="pre">integer&gt;</span></em><a class="headerlink" href="#Process.epscomposed_size" title="Permalink to this definition">#</a></dt>
<dd><p>When set, the product category of all fields contributing to the specified
output is set to eps_member, and the member identity is built from the
specified epsgroup value and from the existing member identity (if any).
The value of <a class="reference internal" href="#Process.epsgroup_size" title="&amp;Process.epsgroup_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.epsgroup_size</span></code></a> and <a class="reference internal" href="#Process.epscomposed_size" title="&amp;Process.epscomposed_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.epscomposed_size</span></code></a> must always be set.</p>
</dd></dl>

</section>
<section id="global-operations">
<h3>Global operations<a class="headerlink" href="#global-operations" title="Permalink to this heading">#</a></h3>
<p>Besides the iterative processing of each extracted fields, described in
<a class="reference internal" href="#section-4-3-4"><span class="std std-ref">Operations applied on extracted fields</span></a> and <a class="reference internal" href="#section-4-3-5"><span class="std std-ref">Generated fields and associated operations</span></a>, it is possible to define some global operations
applied just before producing the output data …</p>
<p><strong>n to m operator, for transformations not well suited for an implementation</strong></p>
<p>based on a combination of standard operators.  These n to m operators can be
implemented within fxtr_operator_generic or fxtr_operator_specific, and are
triggered by setting the value of out_postproc_module.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_postproc_module">
<span class="sig-name descname"><span class="pre">out_postproc_module</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">procedure</span> <span class="pre">to</span> <span class="pre">apply&gt;</span></em><a class="headerlink" href="#Process.out_postproc_module" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p><strong>re-gridding operator, to re-grid all fields available in the last processing iteration.</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_regrid_target">
<span class="sig-name descname"><span class="pre">out_regrid_target</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;target</span> <span class="pre">grid</span> <span class="pre">for</span> <span class="pre">re-gridding&gt;</span></em><a class="headerlink" href="#Process.out_regrid_target" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_regrid_method">
<span class="sig-name descname"><span class="pre">out_regrid_method</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;re-gridding</span> <span class="pre">algorithm&gt;</span></em><a class="headerlink" href="#Process.out_regrid_method" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>with the following optional attributes:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_regrid_method_distance">
<span class="sig-name descname"><span class="pre">out_regrid_method_distance</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;weight_ij=positive_integer,weight_z=positive_integer&gt;</span></em><a class="headerlink" href="#Process.out_regrid_method_distance" title="Permalink to this definition">#</a></dt>
<dd><p>generalized distance</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_regrid_topography">
<span class="sig-name descname"><span class="pre">out_regrid_topography</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;source:incore_tag_s,target=incore_tag_t&gt;</span></em><a class="headerlink" href="#Process.out_regrid_topography" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_regrid_method_filter">
<span class="sig-name descname"><span class="pre">out_regrid_method_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;source:incore_tag_s,target=incore_tag_t&gt;</span></em><a class="headerlink" href="#Process.out_regrid_method_filter" title="Permalink to this definition">#</a></dt>
<dd><p>filter to select contributing source points</p>
</dd></dl>

<p>The same usage as for <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a> / <a class="reference internal" href="#Process.in_regrid_method" title="&amp;Process.in_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_method</span></code></a> is supported
(including <code class="docutils literal notranslate"><span class="pre">out_regrid_method='default'</span></code>). In addition, a different
distance than the the lateral distance in ij-space can be specifid
(<a class="reference internal" href="#Process.out_regrid_method_distance" title="&amp;Process.out_regrid_method_distance"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_regrid_method_distance</span></code></a>) and the set of source points contributing
to each target point can be further restricted (<a class="reference internal" href="#Process.out_regrid_method_filter" title="&amp;Process.out_regrid_method_filter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_regrid_method_filter</span></code></a>).</p>
<p>When <a class="reference internal" href="#Process.out_regrid_method_distance" title="&amp;Process.out_regrid_method_distance"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_regrid_method_distance</span></code></a> is specified, the distance “distance_ij” in
(i,j) space used by the regridding operator is replaced by a generalized distance.
The generalized distance is defined by:</p>
<p><code class="docutils literal notranslate"><span class="pre">weight_ij*distance_ij</span> <span class="pre">+</span> <span class="pre">weight_z*d_height</span></code></p>
<p>where <code class="docutils literal notranslate"><span class="pre">d_height</span></code> is the height difference between source and target topography</p>
<p>The value of <a class="reference internal" href="#Process.out_regrid_topography" title="&amp;Process.out_regrid_topography"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_regrid_topography</span></code></a> must be set when <a class="reference internal" href="#Process.out_regrid_method_distance" title="&amp;Process.out_regrid_method_distance"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_regrid_method_distance</span></code></a>
is used. Both incore_tag_s and incore_tag_t must refer to INCORE fields
representing the source topography (incore_tag_s) or the target topography
(incore_tag_t).</p>
<dl class="simple">
<dt>Usage of generalized distance is restricted to the following methods:</dt><dd><p>next_neighbour, dist_average, exp_weight .</p>
</dd>
</dl>
<p>When <a class="reference internal" href="#Process.out_regrid_method_filter" title="&amp;Process.out_regrid_method_filter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_regrid_method_filter</span></code></a> is specified, the source points contributing
to each target point are those with the same value of “incore_tag_s” as the
target value of “incore_tag_t”. Both incore_tag_s and incore_tag_t must refer
to INCORE fields taking integer values, defined everywhere, and associated with
the source grid (incore_tag_s) or the target grid (incore_tag_t).</p>
<p>Note that the set of source points contributing to each target point is always
restricted to the neighbourhood specified in <a class="reference internal" href="#Process.out_regrid_method" title="&amp;Process.out_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_regrid_method</span></code></a>, independently
on the use or not of <a class="reference internal" href="#Process.out_regrid_method_filter" title="&amp;Process.out_regrid_method_filter"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_regrid_method_filter</span></code></a>.</p>
<dl class="simple">
<dt>Usage of filter is restricted to the following methods:</dt><dd><p>next_neighbour, average, dist_average, log_average, exp_weight, linear_fit,
dominant .</p>
</dd>
</dl>
<p>It is possible to specifiy a domain subset in addition to the regridding
algorithm, but only if the subset is compatible with a rectangular domain.
In such a case, re-gridding is performed after the data reduction associated
with the domain subset.</p>
<p>The domain subset may be a rectangle with a non trivial stride (<code class="docutils literal notranslate"><span class="pre">iinc/=1</span></code> or
<code class="docutils literal notranslate"><span class="pre">jinc/=1</span></code>); this can be used to implement a field upscaling (see the note
about <code class="docutils literal notranslate"><span class="pre">tiled_*</span></code> operators).</p>
<p>Data reduction to the smaller sudomain contributing to the target grid,
including the halo for applying <a class="reference internal" href="#Process.out_regrid_method" title="&amp;Process.out_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_regrid_method</span></code></a>, is automatically applied.
However, this automated data reduction is inactive when a domain subset is
explicitely specified, or when the amount of data reduction is not significant.</p>
</section>
<section id="meta-information">
<h3>Meta-information<a class="headerlink" href="#meta-information" title="Permalink to this heading">#</a></h3>
<p>Some meta-information can be reset for all fields contributing to
the curent output</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_model_name">
<span class="sig-name descname"><span class="pre">out_model_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;registred</span> <span class="pre">model</span> <span class="pre">name;</span> <span class="pre">string&gt;</span></em><a class="headerlink" href="#Process.out_model_name" title="Permalink to this definition">#</a></dt>
<dd><p>Reset value of model name and model type; value must be a registred model
name (see the list in the description of <a class="reference internal" href="globSet.html#GlobalSettings.default_model_name" title="&amp;GlobalSettings.default_model_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.default_model_name</span></code></a>).</p>
<p>A side effect of re-setting the model name is to change the value of
any other meta-information associated with the chosen model name; this
concerns the originatingCenter, the originatingSubcenter, and the
generatingProcessIdentifier. Furthermore, the product category of the
processed field must be compatible with the new model name.</p>
<p>When the originatingCenter is changed, make sure that all local meta-
information codes are still valid; if necessary, use <a class="reference internal" href="#Process.out_auxiliary_metainfo" title="&amp;Process.out_auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_auxiliary_metainfo</span></code></a>
to also adapt these local codes.</p>
<p>The effect of <a class="reference internal" href="#Process.out_model_name" title="&amp;Process.out_model_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_model_name</span></code></a> has precedence over all resetting operators
defined in <a class="reference internal" href="globSet.html#module-GlobalSettings" title="&amp;GlobalSettings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings</span></code></a>, but not over operators defined in the same
block (e.g. <a class="reference internal" href="#Process.out_auxiliary_metainfo" title="&amp;Process.out_auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_auxiliary_metainfo</span></code></a>) or over field specific resetting
operators (e.g. set_auxiliary_metainfo).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_genproc_type">
<span class="sig-name descname"><span class="pre">out_genproc_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;registred</span> <span class="pre">generating</span> <span class="pre">process</span> <span class="pre">type;</span> <span class="pre">string&gt;</span></em><a class="headerlink" href="#Process.out_genproc_type" title="Permalink to this definition">#</a></dt>
<dd><p>Reset value of generating process type; value must be a registred
generating process type (see the list in <a class="reference internal" href="#Process.set_genproc_type" title="&amp;Process.set_genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_genproc_type</span></code></a>)</p>
<p>The effect of <a class="reference internal" href="#Process.out_genproc_type" title="&amp;Process.out_genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_genproc_type</span></code></a> has precedence over all resetting
operators defined in <a class="reference internal" href="globSet.html#module-GlobalSettings" title="&amp;GlobalSettings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings</span></code></a>, but not over the field specific
operator <a class="reference internal" href="#Process.set_genproc_type" title="&amp;Process.set_genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_genproc_type</span></code></a>.</p>
<p>See also the definition of <a class="reference internal" href="#Process.set_genproc_type" title="&amp;Process.set_genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_genproc_type</span></code></a> for more information.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_product_category">
<span class="sig-name descname"><span class="pre">out_product_category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;registred</span> <span class="pre">product</span> <span class="pre">category;</span> <span class="pre">string&gt;</span></em><a class="headerlink" href="#Process.out_product_category" title="Permalink to this definition">#</a></dt>
<dd><p>Reset value of product category; value must be a registred product category
(see the list in the description of “default_product_category”)</p>
<p>The effect of <a class="reference internal" href="#Process.out_product_category" title="&amp;Process.out_product_category"><code class="xref py py-attr docutils literal notranslate"><span class="pre">out_product_category</span></code></a> has precedence over all resetting
operators defined in <a class="reference internal" href="globSet.html#module-GlobalSettings" title="&amp;GlobalSettings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings</span></code></a>, but not over the field specific
operator “set_product_category”.</p>
<p>See also the definition of set_product_category for more information.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_vertical_coordinate">
<span class="sig-name descname"><span class="pre">out_vertical_coordinate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag</span> <span class="pre">of</span> <span class="pre">INCORE</span> <span class="pre">field&gt;</span></em><a class="headerlink" href="#Process.out_vertical_coordinate" title="Permalink to this definition">#</a></dt>
<dd><p>Reset vertical coordinates information, using the information associated with
the specified INCORE field.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_auxiliary_metainfo">
<span class="sig-name descname"><span class="pre">out_auxiliary_metainfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;sring&gt;[,&lt;string&gt;</span> <span class="pre">...]</span> <span class="pre">(each</span> <span class="pre">string</span> <span class="pre">expressed</span> <span class="pre">as</span> <span class="pre">key=value)</span></em><a class="headerlink" href="#Process.out_auxiliary_metainfo" title="Permalink to this definition">#</a></dt>
<dd><p>Reset specified field meta-information; override any key=value specified
in <a class="reference internal" href="globSet.html#GlobalSettings.auxiliary_metainfo" title="&amp;GlobalSettings.auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.auxiliary_metainfo</span></code></a>.</p>
</dd></dl>

</section>
<section id="fields-filtering">
<h3>Fields filtering<a class="headerlink" href="#fields-filtering" title="Permalink to this heading">#</a></h3>
<p>The set of fields effectively used for the current output file
can be filtred</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_filter_cst">
<span class="sig-name descname"><span class="pre">out_filter_cst</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;filtering</span> <span class="pre">condition;</span> <span class="pre">string&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">blank</span></em><a class="headerlink" href="#Process.out_filter_cst" title="Permalink to this definition">#</a></dt>
<dd><p>Filter the data written in the output file; acts on fields declared
as constant in the time dimension.</p>
<p>Can be either:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;always&quot;</span></code></dt><dd><p>always dismiss constant fields</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;keep_in_first_output&quot;</span></code></dt><dd><p>dismiss constant fields, except in the first output of a temporal serie
(i.e. when <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a> is a generic name using a time stamp in its definition).</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_filter_time">
<span class="sig-name descname"><span class="pre">out_filter_time</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;filtering</span> <span class="pre">condition;</span> <span class="pre">string&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">blank</span></em><a class="headerlink" href="#Process.out_filter_time" title="Permalink to this definition">#</a></dt>
<dd><p>Filter the data written in the output file in the time dimension.
Unlike out_tstart… this operator does not depend on the presence
and on the values of time stamps in the definition of <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a> and
of <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a>. It is typically used when input files contain  multiple
validation dates and the mechanism provided by out_tstart… can
not be used.</p>
<p>The exact format is <code class="docutils literal notranslate"><span class="pre">out_filter_time</span> <span class="pre">=</span> <span class="pre">'&lt;mode&gt;;</span> <span class="pre">&lt;t1&gt;,...</span> <span class="pre">[;&lt;units&gt;]'</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;t1&gt;,...</span></code> is a comma separated list of positive integers representing dates or times.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> is one of the following:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;keep_time_of_day&quot;</span></code></dt><dd><p>only keep time levels with a validation date matching one of the time in
<code class="docutils literal notranslate"><span class="pre">t1,...</span></code> where <code class="docutils literal notranslate"><span class="pre">t1,...</span></code> are interpreted as time of day. Setting <code class="docutils literal notranslate"><span class="pre">&lt;units&gt;</span></code> is required in this case.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;keep_validation_date&quot;</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">t1</span></code> are interpreted as absolute date YYYYMMDDHHmm, in terms of year, month, day, hour, minute. <code class="docutils literal notranslate"><span class="pre">&lt;units&gt;</span></code> are ignored in this case.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">&lt;units&gt;</span></code> is either <code class="docutils literal notranslate"><span class="pre">&quot;hour&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;minute&quot;</span></code>, indicating how <code class="docutils literal notranslate"><span class="pre">t1,...</span></code> should be interpreted.</p>
</dd></dl>

</section>
<section id="algorithm-supports">
<h3>Algorithm supports<a class="headerlink" href="#algorithm-supports" title="Permalink to this heading">#</a></h3>
<p>Some computation algorithms require the specification of associated
parameters or support different realisations. This is controlled by the
following parameters …</p>
<p><strong>computation of EPS derived products</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_mismemb_limit">
<span class="sig-name descname"><span class="pre">out_mode_mismemb_limit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;threshold</span> <span class="pre">for</span> <span class="pre">missing</span> <span class="pre">member</span> <span class="pre">related</span> <span class="pre">exception&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100[%]</span></em><a class="headerlink" href="#Process.out_mode_mismemb_limit" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_mismemb_abort">
<span class="sig-name descname"><span class="pre">out_mode_mismemb_abort</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;action</span> <span class="pre">by</span> <span class="pre">missing</span> <span class="pre">member</span> <span class="pre">exception&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.T.</span></em><a class="headerlink" href="#Process.out_mode_mismemb_abort" title="Permalink to this definition">#</a></dt>
<dd><p>When computing eps derived products, an exception is detected when the number
of available members is smaller than any one of the following values</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(out_mode_mismemb_limit/100)</span> <span class="pre">*</span> <span class="pre">ensemble_size</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></li>
</ul>
<p>The action taken when an exception is detected depends on the value of <a class="reference internal" href="#Process.out_mode_mismemb_abort" title="&amp;Process.out_mode_mismemb_abort"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_mismemb_abort</span></code></a>
: either abort production of corresponding product,
when this variable is true, or silently set the resulting values to undefined.
Note that the evaluation of the missing members exception is done independently
for each validation date (in particular to support lagged EPS).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_weighted_member">
<span class="sig-name descname"><span class="pre">out_mode_weighted_member</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;use</span> <span class="pre">weighted</span> <span class="pre">EPS</span> <span class="pre">members&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.F.</span></em><a class="headerlink" href="#Process.out_mode_weighted_member" title="Permalink to this definition">#</a></dt>
<dd><p>Use cluster population as member weight when set to true</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_normalized_stdev">
<span class="sig-name descname"><span class="pre">out_mode_normalized_stdev</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;normalize</span> <span class="pre">standard</span> <span class="pre">deviation&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.F.</span></em><a class="headerlink" href="#Process.out_mode_normalized_stdev" title="Permalink to this definition">#</a></dt>
<dd><p>When set to true, the EPS standard deviation is normalized by the value of the
EPS mean (the value is set to undefined when the mean is too close to zero).</p>
</dd></dl>

<p><strong>computation of synthetic satellite products</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_rttov_cloud">
<span class="sig-name descname"><span class="pre">out_mode_rttov_cloud</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;type</span> <span class="pre">of</span> <span class="pre">clouds</span> <span class="pre">in</span> <span class="pre">rttov</span> <span class="pre">computation&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'none'</span></em><a class="headerlink" href="#Process.out_mode_rttov_cloud" title="Permalink to this definition">#</a></dt>
<dd><p>One of {‘none’,’simple’,’complex’}. Should only be set to ‘none’ when no
cloudy products are computed. See description of synthetic satellite products
in section 5.1 for more details.</p>
</dd></dl>

<p><strong>computation of air density</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_ignore_wloading">
<span class="sig-name descname"><span class="pre">out_mode_ignore_wloading</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;ignore</span> <span class="pre">water</span> <span class="pre">loading&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.T.</span></em><a class="headerlink" href="#Process.out_mode_ignore_wloading" title="Permalink to this definition">#</a></dt>
<dd><p>When set to false, the list of hydrometeors available in the active model
must be explicitely specified by setting the variable “hydrometeor” in
&amp;ModelSpecification</p>
</dd></dl>

<p><strong>computation of algorithm for lapse rate base height correction</strong> (<code class="docutils literal notranslate"><span class="pre">voper=translate_simple</span></code>)</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_hcor_dhmin">
<span class="sig-name descname"><span class="pre">out_mode_hcor_dhmin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;min.</span> <span class="pre">topo</span> <span class="pre">difference&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50.</span></em><a class="headerlink" href="#Process.out_mode_hcor_dhmin" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p><strong>computation of divergence trend term CAT_DVT</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_dvt_scale">
<span class="sig-name descname"><span class="pre">out_mode_dvt_scale</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;scaling</span> <span class="pre">factor&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.</span></em><a class="headerlink" href="#Process.out_mode_dvt_scale" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p><strong>computation of relative humidity</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_rh_clipped">
<span class="sig-name descname"><span class="pre">out_mode_rh_clipped</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;relative</span> <span class="pre">humidity</span> <span class="pre">clipped</span> <span class="pre">at</span> <span class="pre">100%&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.T.</span></em><a class="headerlink" href="#Process.out_mode_rh_clipped" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p><strong>computation of heat index</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_hi_adjusted">
<span class="sig-name descname"><span class="pre">out_mode_hi_adjusted</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.F.</span></em><a class="headerlink" href="#Process.out_mode_hi_adjusted" title="Permalink to this definition">#</a></dt>
<dd><p>apply NOAA adjustments to heat index</p>
</dd></dl>

<p><strong>computation of maximal sunshine duration</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_sun_topo">
<span class="sig-name descname"><span class="pre">out_mode_sun_topo</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.F.</span></em><a class="headerlink" href="#Process.out_mode_sun_topo" title="Permalink to this definition">#</a></dt>
<dd><p>consider topo derived horizon</p>
</dd></dl>

<p><strong>computation of height of zero degree centigrade isotherm</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_h0cl_extrapolate">
<span class="sig-name descname"><span class="pre">out_mode_h0cl_extrapolate</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.F.</span></em><a class="headerlink" href="#Process.out_mode_h0cl_extrapolate" title="Permalink to this definition">#</a></dt>
<dd><p>extrapolate below lowest model level</p>
</dd></dl>

<p><strong>computation of wet bulb temperature</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_tw_iterative">
<span class="sig-name descname"><span class="pre">out_mode_tw_iterative</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.F.</span></em><a class="headerlink" href="#Process.out_mode_tw_iterative" title="Permalink to this definition">#</a></dt>
<dd><p>compute wet bulb temperature with a secant method</p>
</dd></dl>

<p><strong>neighbourhood probability algorithm</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_nbhprob_shape">
<span class="sig-name descname"><span class="pre">out_mode_nbhprob_shape</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;shape</span> <span class="pre">of</span> <span class="pre">neighbourhood&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#Process.out_mode_nbhprob_shape" title="Permalink to this definition">#</a></dt>
<dd><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>value</p></th>
<th class="head"><p>shape</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>cylindrical shape</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>ellipsoidal shape</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>maximum in time shape</p></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_nbhprob_rxy">
<span class="sig-name descname"><span class="pre">out_mode_nbhprob_rxy</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;spatial</span> <span class="pre">radius;</span> <span class="pre">no</span> <span class="pre">default&gt;</span></em><a class="headerlink" href="#Process.out_mode_nbhprob_rxy" title="Permalink to this definition">#</a></dt>
<dd><p>in mesh size units</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_nbhprob_rt">
<span class="sig-name descname"><span class="pre">out_mode_nbhprob_rt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;temporal</span> <span class="pre">radius;</span> <span class="pre">no</span> <span class="pre">default&gt;</span></em><a class="headerlink" href="#Process.out_mode_nbhprob_rt" title="Permalink to this definition">#</a></dt>
<dd><p>in units of collected validation times</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_nbhprob_rfade">
<span class="sig-name descname"><span class="pre">out_mode_nbhprob_rfade</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;radius</span> <span class="pre">of</span> <span class="pre">fading</span> <span class="pre">zone;</span> <span class="pre">no</span> <span class="pre">default&gt;</span></em><a class="headerlink" href="#Process.out_mode_nbhprob_rfade" title="Permalink to this definition">#</a></dt>
<dd><p>in mesh size units</p>
</dd></dl>

<p><strong>computation of Kalman filter and MOS correction</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_kfcor_na">
<span class="sig-name descname"><span class="pre">out_mode_kfcor_na</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'undef'</span></em><a class="headerlink" href="#Process.out_mode_kfcor_na" title="Permalink to this definition">#</a></dt>
<dd><p>handling of missing Kalman correction</p>
<p>supported values are listed at <a class="reference internal" href="#Process.out_mode_moscor_na" title="&amp;Process.out_mode_moscor_na"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_moscor_na</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_mode_moscor_na">
<span class="sig-name descname"><span class="pre">out_mode_moscor_na</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'undef'</span></em><a class="headerlink" href="#Process.out_mode_moscor_na" title="Permalink to this definition">#</a></dt>
<dd><p>handling of missing MOS correction</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>value</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘undef’</p></td>
<td><p>set field value to undef</p></td>
</tr>
<tr class="row-odd"><td><p>‘nocor’</p></td>
<td><p>retain uncorrected field value <a class="footnote-reference brackets" href="#id8" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p>‘abort’</p></td>
<td><p>stop processing of field</p></td>
</tr>
</tbody>
</table>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">6</a><span class="fn-bracket">]</span></span>
<p>Since the product category is changed to ‘stat_probability’ when one of the
two operators ‘moscor_logreg’ and ‘moscor_extlogreg’ is applied, the original
field value cannot be retained where MOS information is missing. The
respective field values are set to undef instead.</p>
</aside>
</aside>
</dd></dl>

<p>The description of the concerned operators is done in <a class="reference internal" href="#section-4-3-4"><span class="std std-ref">Operations applied on extracted fields</span></a>.</p>
</section>
<section id="out-type">
<h3>Out type<a class="headerlink" href="#out-type" title="Permalink to this heading">#</a></h3>
<p>The base format of the output file is defined by out_type; additional characteristics
and variants of the base format are controled by out_type_* variables, as explained
below.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type">
<span class="sig-name descname"><span class="pre">out_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;output</span> <span class="pre">file</span> <span class="pre">type;</span> <span class="pre">e.g.</span> <span class="pre">GRIB2,</span> <span class="pre">ASCII_TABLE&gt;</span></em><a class="headerlink" href="#Process.out_type" title="Permalink to this definition">#</a></dt>
<dd><p>Supported values of out_type:</p>
<ol class="arabic">
<li><p>Pseudo output type used as global internal storage</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;INCORE&quot;</span></code>   :</dt><dd><p>used to:</p>
<ul class="simple">
<li><p>associate grid points to specified locations
(require fields HSURF and FR_LAND);</p></li>
<li><p>associate grid points to specified regions
(require any field);</p></li>
<li><p>produce grid point height information for some output
(require field HSURF);</p></li>
<li><p>specify model base grid when working with staggered fields
(see <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>);</p></li>
<li><p>specify model base grid when working with fields defined on a large domain
(see <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>);</p></li>
<li><p>specify grid and auxiliary fields for re-gridding
(see <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>, &lt;out_regrid_target&gt;);</p></li>
<li><p>merge different fields and define associated mask
(see <a class="reference internal" href="#Process.merge_with" title="&amp;Process.merge_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.merge_with</span></code></a>);</p></li>
<li><p>compare different fields and define associated mask
(see <a class="reference internal" href="#Process.compare_with" title="&amp;Process.compare_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_with</span></code></a>);</p></li>
<li><p>provide access to additional constant fields
(see below).</p></li>
</ul>
<p>Automatic derivation of some constant fields is provided when the required parent
is available in INCORE, as described in the table below. These fields are generated
on the fly when requested (i.e. they are computed when collecting fields from INCORE
storage).
This mechanism is only active when all components of the fields to derive are missing
in INCORE (e.g. HHL will not be derived if HFL is already present in INCORE).</p>
<p>When a tag is associated with the parent field, the derived field inherits this tag.</p>
<ol class="arabic">
<li><p>These fields are always generated when parent is available;
they are generated in the listed order, and are immediately available for successive operations <a class="footnote-reference brackets" href="#id12" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>derived field</p></th>
<th class="head"><p>parent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HSURF (surface height [m])</p></td>
<td><p>FIS</p></td>
</tr>
<tr class="row-odd"><td><p>RLAT &amp; RLON (geog. lat/lon [deg])</p></td>
<td><p>HSURF</p></td>
</tr>
</tbody>
</table>
</div>
</li>
<li><p>These fields are generated on-demand when parent is available</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>derived field</p></th>
<th class="head"><p>parent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SWISS_WE &amp; SWISS_SN (Swiss coord. [m])</p></td>
<td><p>RLAT, RLON</p></td>
</tr>
<tr class="row-odd"><td><p>BOAGAW_WE &amp; BOAGAW_SN (Gauss-Boaga coord., west sector [m])</p></td>
<td><p>RLAT, RLON</p></td>
</tr>
<tr class="row-even"><td><p>BOAGAE_WE &amp; BOAGAE_SN (Gauss-Boaga coord., east sector [m])</p></td>
<td><p>RLAT, RLON</p></td>
</tr>
<tr class="row-odd"><td><p>P0FL, HHL &amp; HFL (pressure in [Pa], height in [m])</p></td>
<td><p>HSURF <a class="footnote-reference brackets" href="#id13" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p>HEIGHT &#64; full model levels [m]</p></td>
<td><p>HEIGHT &#64; half lev <a class="footnote-reference brackets" href="#id14" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a></p></td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id12" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">7</a><span class="fn-bracket">]</span></span>
<p>this means, e.g., that HSURF, RLAT and RLON are generated when FIS
is available in INCORE</p>
</aside>
<aside class="footnote brackets" id="id13" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">8</a><span class="fn-bracket">]</span></span>
<p>only for COSMO model, with hybrid vertical coordinates, when
vertical coordinate coefficients are available</p>
</aside>
<aside class="footnote brackets" id="id14" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">9</a><span class="fn-bracket">]</span></span>
<p>only for COSMO model, when vertical coordinates are present</p>
</aside>
</aside>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it is possible to have multiple instances of these special fields in INCORE,
but the fields associated with the reference grid must be marked by setting
“reference_field” to false for all other instances.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the parameter <a class="reference internal" href="#Process.out_file" title="&amp;Process.out_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_file</span></code></a> may be omitted when out_type=’INCORE’</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>mixing INCORE fields with other fields defined on a sub-mesh is supported (see the documentation of <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>).</p>
</div>
</dd>
</dl>
</li>
<li><p>Pseudo output type used to extract the characteristics of the records contained
in the associated input files</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">INSPECT</span></code> :</dt><dd><p>the information produced is defined by the settings in <a class="reference internal" href="inspectSpec.html#module-InspectSpecification" title="&amp;InspectSpecification"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;InspectSpecification</span></code></a>
and is stored in ASCII file fieldextra.inspect, in current working directory.</p>
</dd>
</dl>
<p>When the only output in a namelist is the INSPECT pseudo-output, fewer consistency
checks are performed in fieldextra and field transcoding is inactive. This supports
a more transparent inspection of the input records. A contrario, this means that the
INSPECT output produced in combination with other output reports interpreted values.</p>
</li>
<li><p>Spezialized ASCII output of common interest</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code>     :</dt><dd><p>set of events (fields values at a point in space-time), one event per line</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">METEOG</span></code>      :</dt><dd><p>meteogram at a set of locations (old pseudo-ANETZ), one field per file</p>
</dd>
</dl>
</li>
<li><p>General purpose ASCII output</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code> :</dt><dd><p>table, CSV, multiple options to arrange the values in the table</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code>   :</dt><dd><p>form (defined by a user specified template, can be used to create XML files)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>   :</dt><dd><p>set of records (2d horizontal slices), can also be imported by fieldextra</p>
</dd>
</dl>
<p>The following are obsolete and will be removed in a future release</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>   :</dt><dd><p>table oriented, columns indexed by fields descriptor</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>   :</dt><dd><p>columns indexed by validation date</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>   :</dt><dd><p>columns indexed by location or location and field, support both formatted and comma separated values (csv)</p>
</dd>
</dl>
</li>
<li><p>General purpose binary output</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>     :</dt><dd><p>WMO FM 92-IX Ext. GRIB (GRIB edition 1)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>     :</dt><dd><p>WMO FM 92-XIII Ext. GRIB (GRIB edition 2)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">NETCDF</span></code>    :</dt><dd><p>NetCDF, according to Climate and Forecast Metadata conventions (CF 1.7)</p>
</dd>
</dl>
</li>
<li><p>Output types that are only of local interest</p>
<p>See chapter 3. in README.user.locale.</p>
</li>
</ol>
</dd></dl>

<section id="out-type-attributes-acting-on-file-production">
<h4>Out type attributes acting on file production<a class="headerlink" href="#out-type-attributes-acting-on-file-production" title="Permalink to this heading">#</a></h4>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_replace">
<span class="sig-name descname"><span class="pre">out_type_replace</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;overwrite</span> <span class="pre">pre-existing</span> <span class="pre">output&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.TRUE.</span></em><a class="headerlink" href="#Process.out_type_replace" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code></p>
<p>By default, any pre-existing output file is over-written. It is possible
to change this behaviour by setting out_type_replace=.false. to concatenate
the new output at the end of the existing file; this is however only supported
under the conditions: (1) out_type_snapshot is not used, (2) output support
append mode.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_justontime">
<span class="sig-name descname"><span class="pre">out_type_justontime</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;'auto',</span> <span class="pre">'no',</span> <span class="pre">or</span> <span class="pre">'yes'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'auto'</span></em><a class="headerlink" href="#Process.out_type_justontime" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>Control the usage of just on time mode. In most cases it is enough to
rely on the ‘auto’ mode; however, there are situations where the ‘auto’
mode incorrectly enable just on time mode. For example:</p>
<ol class="arabic simple">
<li><p>all conditions for just on time are fulfilled (<a class="reference internal" href="#section-4-3-2"><span class="std std-ref">Output files</span></a>), but
some of the <a class="reference internal" href="#Process.in_field" title="&amp;Process.in_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_field</span></code></a> are not available for all processed time
planes, which will generate some sort of ‘missing parent’
exception when just on time is active.</p></li>
</ol>
<p>It could also be that the ‘auto’ mode is too conservative, and
that the memory footprint can be drastically reduced by setting
out_type_justontime to ‘yes’. For example:</p>
<ol class="arabic simple" start="2">
<li><p>input files belong to the same forecast serie, but are
dispatched in distinct subdirectories.</p></li>
</ol>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_snapshot">
<span class="sig-name descname"><span class="pre">out_type_snapshot</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;time&gt;,&lt;time&gt;,...</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#Process.out_type_snapshot" title="Permalink to this definition">#</a></dt>
<dd><p>-1 means no time list</p>
<p>Compatible with any out_type</p>
<p>It is possible to produce snapshots of currently processed output
at specified times. This is for example useful when fieldextra is
running concurrently to the model, and time critical output have
to be generated before the end of the model integration.
The specified list of times refers to the input time loop, as
defined by tlist or tstart, … A snapshot will be produced
just after the processing of each corresponding input files. The
name of each snapshot is build by appending out_snapshot_postfix and
the value of the associated time stamp to the name of the output file.
The value of <a class="reference internal" href="runSpec.html#RunSpecification.out_snapshot_postfix" title="&amp;RunSpecification.out_snapshot_postfix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;RunSpecification.out_snapshot_postfix</span></code></a> must be defined in <a class="reference internal" href="runSpec.html#module-RunSpecification" title="&amp;RunSpecification"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;RunSpecification</span></code></a>.
The value of <a class="reference internal" href="runSpec.html#RunSpecification.out_noready_postfix" title="&amp;RunSpecification.out_noready_postfix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;RunSpecification.out_noready_postfix</span></code></a> is ignored for snapshots.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_toc">
<span class="sig-name descname"><span class="pre">out_type_toc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;generate</span> <span class="pre">table</span> <span class="pre">of</span> <span class="pre">content&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_toc" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>A table of content of the output file may be generated on demand for some
binary output (<code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code>). For each data object stored in the
output file, a description of the object is written in the associated table
of content (a data object is a GRIB record or a NETCDF array).
The description is made from the index of the object in the output file,
the field tag or short name, the dimension of the object, the field long
name and units, and the product description.
The table of content is saved in a file whose name is built from the name
of the output by appending the postfix ‘.toc’.</p>
</dd></dl>

</section>
<section id="out-type-attributes-acting-on-data">
<h4>Out type attributes acting on data<a class="headerlink" href="#out-type-attributes-acting-on-data" title="Permalink to this heading">#</a></h4>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_dupcst">
<span class="sig-name descname"><span class="pre">out_type_dupcst</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;duplicate</span> <span class="pre">constant</span> <span class="pre">fields&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_dupcst" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>Internally, constant fields are associated with each validation date,
but, by default, only the first occurence is produced in output (first
in terms of validation date). When out_type_dupcst is true, each
constant field occurence is produced.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_noundef">
<span class="sig-name descname"><span class="pre">out_type_noundef</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;skip</span> <span class="pre">data</span> <span class="pre">when</span> <span class="pre">all</span> <span class="pre">values</span> <span class="pre">are</span> <span class="pre">undefined&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_noundef" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>By default, data is produced independently of the definition status of
the field values. Setting out_type_noundef to true changes this
behaviour:</p>
<ul class="simple">
<li><p>for record oriented output (GRIB, BLK_TABLE …):
skip record when all values of the associated field are undefined;</p></li>
<li><p>for array oriented output (NetCDF):
skip validation date when all values of all processed fields are
undefined for this validation date;</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_undefcode">
<span class="sig-name descname"><span class="pre">out_type_undefcode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;missing</span> <span class="pre">value</span> <span class="pre">code&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-99999.</span></em><a class="headerlink" href="#Process.out_type_undefcode" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code>, <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code></p>
<p>Missing value code used in ASCII output is defined by out_type_undefcode.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the value of out_type_undefcode can be overriden on a field basis
by setting set_undefcode (<code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code> only).</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_scanmode">
<span class="sig-name descname"><span class="pre">out_type_scanmode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;scanning</span> <span class="pre">mode&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'native'</span></em><a class="headerlink" href="#Process.out_type_scanmode" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code></p>
<p>The mapping of a rectangular domain in some output may be explicitely
specified by <a class="reference internal" href="#Process.out_type_scanmode" title="&amp;Process.out_type_scanmode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_scanmode</span></code></a>:</p>
<ul>
<li><p>the data order follows the original scanning mode ‘native’</p></li>
<li><dl>
<dt>the data order follows a user specified scanning mode</dt><dd><div class="line-block">
<div class="line">‘+i/+j/consecutive_i’ , ‘+i/+j/consecutive_j’,</div>
<div class="line">‘+i/-j/consecutive_i’ , ‘+i/-j/consecutive_j’,</div>
<div class="line">‘-i/+j/consecutive_i’ , ‘-i/+j/consecutive_j’,</div>
<div class="line">‘-i/-j/consecutive_i’ , ‘-i/-j/consecutive_j’,</div>
</div>
</dd>
</dl>
<p>where i represents west-east axis, and j represents south-north axis</p>
</li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_packing">
<span class="sig-name descname"><span class="pre">out_type_packing</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;packing</span> <span class="pre">algorithm&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'standard'</span></em><a class="headerlink" href="#Process.out_type_packing" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code></p>
<p>GRIB output support multiple algorithms to pack the data set.
Currently available are (nbit is an integer in [2…32]):</p>
<p><strong>for GRIB 1 and 2</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'standard'</span></code></dt><dd><p>grid point simple packing, 16 bits per value (default)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'simple,nbit'</span></code></dt><dd><p>grid point simple packing, nbit bits per value</p>
</dd>
</dl>
<p><strong>for GRIB 2 only</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'jpeg,nbit'</span></code></dt><dd><p>grid point JPEG2000, nbit bits per value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'aec,nbit'</span></code></dt><dd><p>adaptive entropy coding, nbit bits per value
(lossless data compression, see GRIB 2 data
representation template 5.42)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>jpeg and aec compression are done on top of simple packing</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>to give an idea of the performance of the different algorithms,
for a single COSMO-1 output file (1283 fields of dim 1158x774),
compared with <code class="docutils literal notranslate"><span class="pre">'simple,16'</span></code>:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'aec,16'</span></code>   generates a file x2.5 smaller, in x1.5 the time</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'jpeg,16'</span></code>  generates a file x3 smaller, in x3 the time</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the value of <a class="reference internal" href="#Process.out_type_packing" title="&amp;Process.out_type_packing"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_packing</span></code></a> can be overriden on a field basis
by setting <a class="reference internal" href="#Process.set_packing" title="&amp;Process.set_packing"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_packing</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_ncformat">
<span class="sig-name descname"><span class="pre">out_type_ncformat</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;NetCDF</span> <span class="pre">file</span> <span class="pre">format&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'nc3_64boffset'</span></em><a class="headerlink" href="#Process.out_type_ncformat" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>This defines the NetCDF file format, one of:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">nc3_classic</span></code>   :</dt><dd><p>classic netCDF-3 format</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nc3_64boffset</span></code> :</dt><dd><p>64-bit offset netCDF-3 format</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nc4_classic</span></code>   :</dt><dd><p>netCDF-4/HDF5 format, restricted to classic model</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the <code class="docutils literal notranslate"><span class="pre">'nc3_classic'</span></code> format is the most compatible, the <code class="docutils literal notranslate"><span class="pre">'nc3_64boffset'</span></code>
format supports files larger than 2 GB, and the <code class="docutils literal notranslate"><span class="pre">'nc4_classic'</span></code>
format supports both files larger than 2 GB and file compression.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>in order to get good performances when choosing <code class="docutils literal notranslate"><span class="pre">'nc4_classic'</span></code>, it
is strongly recommended to set <code class="docutils literal notranslate"><span class="pre">out_type_ncunlimitedtime=.false.</span></code></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_ncunlimitedtime">
<span class="sig-name descname"><span class="pre">out_type_ncunlimitedtime</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">true</span></em><a class="headerlink" href="#Process.out_type_ncunlimitedtime" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>Very bad write performances are observed when producing ‘nc4_classic’
format if the time dimension is unlimited; furthermore, unlimited time
dimension may be detrimental to NetCDF file compression. For these
reasons, it is possible to set <code class="docutils literal notranslate"><span class="pre">out_type_ncunlimitedtime=.false.</span></code>
to prohibit unlimited time dimension.</p>
<p>Note however, that, setting <code class="docutils literal notranslate"><span class="pre">out_type_ncunlimitedtime=.false.</span></code> may lead
to much larger memory footprint at run time (in the case multiple time
levels are stored in the same output).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_ncdeflate">
<span class="sig-name descname"><span class="pre">out_type_ncdeflate</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;compression</span> <span class="pre">factor</span> <span class="pre">in</span> <span class="pre">[1,9]&gt;</span></em><a class="headerlink" href="#Process.out_type_ncdeflate" title="Permalink to this definition">#</a></dt>
<dd><p>default undefined</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_ncshuffle">
<span class="sig-name descname"><span class="pre">out_type_ncshuffle</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">false</span></em><a class="headerlink" href="#Process.out_type_ncshuffle" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code>, but requires <code class="docutils literal notranslate"><span class="pre">out_type_ncformat=&quot;nc4_classic&quot;</span></code></p>
<p>When <a class="reference internal" href="#Process.out_type_ncdeflate" title="&amp;Process.out_type_ncdeflate"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_ncdeflate</span></code></a> is defined, the NetCDF will be compressed.
Variable data is compressed, not metadata such as attributes.
Deflation level 1 is intended to compress faster than level 9.
Deflation level 9 is intended to compress smaller than level 1.
ALl levels use losless data compression.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>shuffling (<code class="docutils literal notranslate"><span class="pre">out_type_ncshuffle=.true.</span></code>) often improves compression
for little cost.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>not using an unlimited dimension for the time
(<code class="docutils literal notranslate"><span class="pre">out_type_ncunlimitedtime=.false.</span></code>) may improve compression.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>very good compression factor may be obtained with the lowest deflation
level. For example, the size of a full laf output from COSMO-1 is
reduced by a factor of about 4 when setting <code class="docutils literal notranslate"><span class="pre">out_type_ncdeflate=1</span></code> and
<code class="docutils literal notranslate"><span class="pre">out_type_ncshuffle=.true.</span></code> (from 5.084GB to 1.330GB, the same file in
GRIB 2 has a size of 2.310GB), for a 3.5 increase in computation time.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_simplenc">
<span class="sig-name descname"><span class="pre">out_type_simplenc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;produce</span> <span class="pre">simple</span> <span class="pre">NetCDF&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_simplenc" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>In some cases a simplified NetCDF output can be generated. This is
in particular the case when:</p>
<ol class="arabic simple">
<li><p>all fields are defined on a geographical latitude / longitude grid:
the use of auxiliary coordinates variables is not needed, and the latitude
and longitude variables are 1-dimensional, resulting in a smaller and
simpler NetCDF output.</p></li>
<li><p>all fields use the same vertical dimension: the name of the vertical
dimension must not be indexed.</p></li>
</ol>
<p>Fieldextra will generate such a simplified NetCDF, when the value of
out_type_simplenc is set to true.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_nodegeneratedim">
<span class="sig-name descname"><span class="pre">out_type_nodegeneratedim</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;ignore</span> <span class="pre">degenerate</span> <span class="pre">dimensions&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_nodegeneratedim" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>A NetCDF data is stored in a n-dimensional array, with the set of n-dimensions
being dependent on the type of field. Normally all relevant dimensions are
considered, even when the dimension is degenerate; this behaviour is changed
by setting <a class="reference internal" href="#Process.out_type_nodegeneratedim" title="&amp;Process.out_type_nodegeneratedim"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_nodegeneratedim</span></code></a> to true.
Example: a single level EPS field is stored in an array of dimensions
(t,m,y,x), m being the perturbation number dimension; if a different output
is used for each member and <code class="docutils literal notranslate"><span class="pre">out_type_nodegeneratedim=.TRUE.</span></code>, the dimensions
(t,y,x) will be used instead.</p>
</dd></dl>

</section>
<section id="out-type-attributes-acting-on-meta-data">
<h4>Out type attributes acting on meta-data<a class="headerlink" href="#out-type-attributes-acting-on-meta-data" title="Permalink to this heading">#</a></h4>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_nousetag">
<span class="sig-name descname"><span class="pre">out_type_nousetag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;always</span> <span class="pre">use</span> <span class="pre">short</span> <span class="pre">name,</span> <span class="pre">ignore</span> <span class="pre">tag&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_nousetag" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_alternate_name">
<span class="sig-name descname"><span class="pre">out_type_alternate_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;use</span> <span class="pre">alternate</span> <span class="pre">short</span> <span class="pre">name&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_alternate_name" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>When the name of the field is coded in the output file, the value of the
short name is used, or, if set, of the field tag. When out_type_nousetag
is true, the value of the tag is always ignored. When <a class="reference internal" href="#Process.out_type_alternate_name" title="&amp;Process.out_type_alternate_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_alternate_name</span></code></a>
is true, and an alternate short name is defined in the active dictionary, the
alternate short name is used instead of the short name.
An alternate short name is defined when the attribute <code class="docutils literal notranslate"><span class="pre">keyUsedInProgram</span></code> is
set in the active dictionary; in this case, the alternate short name is the
associated key.</p>
<dl class="simple">
<dt>Example:</dt><dd><p>in the active dictionary, the key ‘SP’ has the attribute
<code class="docutils literal notranslate"><span class="pre">keyUsedInProgram=FF</span></code>; this means that the name ‘FF’ must be used
in the namelist and all associated resources, and that the default
value of the field name in any output will be ‘FF’. However, by
setting out_type_alternate_name to true, the default value of the
field will be ‘SP’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_autoncname">
<span class="sig-name descname"><span class="pre">out_type_autoncname</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;generate</span> <span class="pre">object</span> <span class="pre">name&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_autoncname" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>Automatically generate NetCDF object name when multiple instances of the
same field name is detected. The object name is generated by appending
the string <code class="docutils literal notranslate"><span class="pre">_n</span></code> to the field name, where n takes one of the value 1, 2 …
This output type is not compatible with just on time mode.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_alternate_code">
<span class="sig-name descname"><span class="pre">out_type_alternate_code</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;use</span> <span class="pre">alternate</span> <span class="pre">pds</span> <span class="pre">code&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_alternate_code" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code></p>
<p>When set to true, alternate GRIB 1 code found in active dictionary will be
used; alternate code is defined in the dictionary by setting the attributes
<code class="docutils literal notranslate"><span class="pre">alternateTable</span></code> and <code class="docutils literal notranslate"><span class="pre">alternateParameter</span></code>. When no alternate code is defined,
the usual code is applied.</p>
<p>A similar feature is offered by <a class="reference internal" href="#Process.use_alternate_code" title="&amp;Process.use_alternate_code"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_alternate_code</span></code></a>, but on a field basis.
The alternate code will be used as soon as one of the two switches is set.</p>
<p>This may be used, e.g., to code probabilities differently than determinist
products, without having to introduce an additional dictionary.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_transcode">
<span class="sig-name descname"><span class="pre">out_type_transcode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;transcode</span> <span class="pre">GRIB</span> <span class="pre">1</span> <span class="pre">pds&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.TRUE.</span></em><a class="headerlink" href="#Process.out_type_transcode" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code></p>
<p>Internally, fieldextra requires the GRIB1 pds to be compliant with the
WMO GRIB1 standard. Therefore, non-standard coding of the pds is translated
on input and restored on output. Setting <code class="docutils literal notranslate"><span class="pre">out_type_transcode</span> <span class="pre">=.false.</span></code> forces
fieldextra to write the GRIB1 pds in the way it is internally represented,
whenever it is possible (otherwise, the original pds values are restored).</p>
<p>Used e.g. for the processing of COSMO soil moisture level information.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_timebnds">
<span class="sig-name descname"><span class="pre">out_type_timebnds</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;produce</span> <span class="pre">time</span> <span class="pre">bounds&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_timebnds" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>Produce time bounds information. In case this is set to true, the cell
method for the time dimension will be added as attribute of each field,
and the time bounds attribute will be added to the time dimension.</p>
<p>This is only compatible with a data set having the following
characteristics: (1) for each field, the type of statistical
processing is the same for each lead time, (2) for each lead
time, all non trivial time range intervals are the same.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_prefered_tunits">
<span class="sig-name descname"><span class="pre">out_type_prefered_tunits</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string1,string2&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#Process.out_type_prefered_tunits" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code></p>
<p>Specify the prefered time units used to code the time range information
(first element) and the lead time (second element) in the output file.</p>
<dl class="simple">
<dt>The following values are supported:</dt><dd><p>{1sec, 1min, 10min, 15min, 30min, 1h, 3h, 6h, 12h, 1day}</p>
</dd>
</dl>
<p>Note that the specified units will only be considered if compatible with the
representation of the associated time value (e.g. a lead time of 30’ can
not be coded in GRIB1 with a ‘1h’ units).</p>
<p>Default value is ‘’ (i.e. no prefered time units specified)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_nogridincr">
<span class="sig-name descname"><span class="pre">out_type_nogridincr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;ignore</span> <span class="pre">grid</span> <span class="pre">increment&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.TRUE.</span></em><a class="headerlink" href="#Process.out_type_nogridincr" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code></p>
<p>Grid increment in GRIB 1 output is coded in millidegrees, and may be inexact
for high resolution grid. Because this information is anyhow redundant and can
be re-computed it is safer to set the corresponding value to 0 (default behaviour).
Defining out_type_nogridincr=.F. forces fieldextra to write the grid increments
values in the GRIB 1 gds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_novcoord">
<span class="sig-name descname"><span class="pre">out_type_novcoord</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;control</span> <span class="pre">coding</span> <span class="pre">of</span> <span class="pre">vcoord</span> <span class="pre">description,</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">{'yes','no','auto'}&gt;</span></em><a class="headerlink" href="#Process.out_type_novcoord" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>For sigma and hybrid coordinates, the description of the vertical coordinates is
coded as a set of coefficients (in each GRIB record, or in a NetCDF variable). When
<a class="reference internal" href="#Process.out_type_novcoord" title="&amp;Process.out_type_novcoord"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_novcoord</span></code></a> is ‘no’, fieldextra will produce this information in each GRIB
record, or in a special ‘vcoord’ NetCDF variable; when <a class="reference internal" href="#Process.out_type_novcoord" title="&amp;Process.out_type_novcoord"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_novcoord</span></code></a> is ‘yes’,
this information is skipped (GRIB 1, NETCDF) or restricted to records associated
with a sigma or hybrid surface (GRIB 2).</p>
<p>In addition, in some special cases, the vertical coordinates coefficients are coded
in the value of the GRIB 2 second surface (for fields with passive second surface).
This feature is turned off when <code class="docutils literal notranslate"><span class="pre">out_type_novcoord</span> <span class="pre">=</span> <span class="pre">&quot;yes&quot;</span></code>.</p>
<p>The default value ‘auto’, when not changed by setting default_out_type_n_novcoord
or default_out_type_g_novcoord in &amp;GlobalSettings, is ‘no’ for GRIB1 and GRIB2 output
(i.e. vcoord are produced), and ‘yes’ for NETCDF output (i.e. no vcoord are produced).</p>
<p>For NETCDF output, support for coding vertical coordinate coefficients is only
available for the COSMO model (release 3.18 or better), independently from the
value of <a class="reference internal" href="#Process.out_type_novcoord" title="&amp;Process.out_type_novcoord"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_novcoord</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_stdlongitude">
<span class="sig-name descname"><span class="pre">out_type_stdlongitude</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;use</span> <span class="pre">standard</span> <span class="pre">coding</span> <span class="pre">of</span> <span class="pre">longitude&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_stdlongitude" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>By default, coding of longitude meta-information in output is in [-180.,180.[;
by setting <a class="reference internal" href="#Process.out_type_stdlongitude" title="&amp;Process.out_type_stdlongitude"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_stdlongitude</span></code></a> to true, longitude will be coded in [0.,360.[.
Note that this switch does not affect the coding of any longitude field (such as
RLON).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_mapcst">
<span class="sig-name descname"><span class="pre">out_type_mapcst</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;reset</span> <span class="pre">constant</span> <span class="pre">fields</span> <span class="pre">meta-info&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.TRUE.</span></em><a class="headerlink" href="#Process.out_type_mapcst" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with any <a class="reference internal" href="#Process.out_type" title="&amp;Process.out_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type</span></code></a></p>
<p>When <a class="reference internal" href="#Process.out_type_mapcst" title="&amp;Process.out_type_mapcst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_mapcst</span></code></a> is true, and when mixing constant and non constant
fields in the same output, the following meta-information associated with
the constant fields are set to the common value of the non constant fields:
the lead time, the type of generating process.
Constant fields meta-information is not changed when no common value is
available. The operation is done at the very beginning of the processing
iterations.</p>
</dd></dl>

</section>
<section id="out-type-attributes-acting-on-data-format">
<h4>Out type attributes acting on data format<a class="headerlink" href="#out-type-attributes-acting-on-data-format" title="Permalink to this heading">#</a></h4>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_fmt">
<span class="sig-name descname"><span class="pre">out_type_fmt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;format</span> <span class="pre">of</span> <span class="pre">values</span> <span class="pre">in</span> <span class="pre">output</span> <span class="pre">file&gt;</span></em><a class="headerlink" href="#Process.out_type_fmt" title="Permalink to this definition">#</a></dt>
<dd><p><a class="reference internal" href="#Process.out_type_fmt" title="&amp;Process.out_type_fmt"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_fmt</span></code></a> is either a Fortran edit descriptor (<code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>,
<code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code>, <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code>) or a key defining
a specific table format (<code class="docutils literal notranslate"><span class="pre">METEOG</span></code>, see table below).</p>
<dl>
<dt>Default values are <a class="reference internal" href="#Process.out_type" title="&amp;Process.out_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type</span></code></a> dependent:</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code> (default 6G13.5)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code> (default G13.5)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">METEOG</span></code> (no default, <a class="reference internal" href="#Process.out_type_fmt" title="&amp;Process.out_type_fmt"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_fmt</span></code></a> mut be set)</div>
</div>
</dd>
</dl>
<p><strong>Table format keys for METEOG</strong></p>
<p>A key defines the format used to print out data (data_format), the
type of symbols used for special values (data_spec) and the line
header (line_head). Possible key values are:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>nbr. fields in table</p></th>
<th class="head"><p>allowed key</p></th>
<th class="head"><p>data_format</p></th>
<th class="head"><p>data_spec</p></th>
<th class="head"><p>line_head</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>f73_dh</p></td>
<td><p>F7.3</p></td>
<td><p>std</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>f73_h</p></td>
<td><p>F7.3</p></td>
<td><p>std</p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>f72_dh</p></td>
<td><p>F7.2</p></td>
<td><p>std</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>f72_h</p></td>
<td><p>F7.2</p></td>
<td><p>std</p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>f71_dh</p></td>
<td><p>F7.1</p></td>
<td><p>std</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>f71_h</p></td>
<td><p>F7.1</p></td>
<td><p>std</p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>f71_dh_prec</p></td>
<td><p>F7.1</p></td>
<td><p>rain</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>f71_h_prec</p></td>
<td><p>F7.1</p></td>
<td><p>rain</p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>f61_dh_flag</p></td>
<td><p>F6.1</p></td>
<td><p>flag</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>f61_h_flag</p></td>
<td><p>F6.1</p></td>
<td><p>flag</p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>i_dh</p></td>
<td><p>nint</p></td>
<td><p>std</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>i_h</p></td>
<td><p>nint</p></td>
<td><p>std</p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>i_dh_prec</p></td>
<td><p>nint</p></td>
<td><p>rain%</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>i_h</p></td>
<td><p>nint</p></td>
<td><p>rain%</p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>clc</p></td>
<td><p>clc</p></td>
<td><p>clc</p></td>
<td><p>delta_h</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>ddff</p></td>
<td><p>ddff</p></td>
<td><p>std</p></td>
<td><p>delta_h</p></td>
</tr>
</tbody>
</table>
</div>
<p>where</p>
<dl>
<dt>for data_format:</dt><dd><div class="line-block">
<div class="line">Fd.d   : floating point, according to Fd.d edit descriptor</div>
<div class="line">nint   : nearest integer</div>
<div class="line">clc    : for cloud cover data (NINT for data &lt; 7, INT otherwise)</div>
<div class="line">ddff   : for wind direction and speed (NINT, “/” to separate data)</div>
</div>
</dd>
<dt>for data_spec:</dt><dd><div class="line-block">
<div class="line">std    : “NA” for undefined values</div>
<div class="line">flag   : append “*” to value when flag is set, “NA” for undef. values</div>
<div class="line">clc    : “.” when value is 0, “NA” for undef. values</div>
<div class="line">rain   : “.” when value is smaller than 0.05, “NA” for undef. values</div>
<div class="line">rain%  : “.” when value is not available</div>
</div>
</dd>
<dt>for line_head:</dt><dd><div class="line-block">
<div class="line">delta_h: location name / height diff. between loc. and orography</div>
<div class="line">h: location height / location name</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_template">
<span class="sig-name descname"><span class="pre">out_type_template</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;path</span> <span class="pre">of</span> <span class="pre">template</span> <span class="pre">file&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#Process.out_type_template" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_nomatch_action">
<span class="sig-name descname"><span class="pre">out_type_nomatch_action</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;action</span> <span class="pre">by</span> <span class="pre">unresolved</span> <span class="pre">data</span> <span class="pre">container&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'raise_exception'</span></em><a class="headerlink" href="#Process.out_type_nomatch_action" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code></p>
<p>The generation of some output is based on a pre-defined template file.
The meaning of the template depends on the output type:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code> :</dt><dd><p>the template is any ASCII file where values to be inserted by
fieldextra are replaced by special keywords (‘data container’).
The default action when finding unresolved data container is
to raise an exception; it is however possible to control this
behaviour by setting <a class="reference internal" href="#Process.out_type_nomatch_action" title="&amp;Process.out_type_nomatch_action"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_nomatch_action</span></code></a> to one of</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'raise_exception'</span></code></dt><dd><p>default</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'ignore'</span></code></dt><dd><p>keep unresolved data container unchanged</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'set_undef'</span></code></dt><dd><p>replace unresolved data container by some appropriate default value</p>
</dd>
</dl>
<p>This allows an iterative construction of the template based file,
which is necessary to generate multi-models products.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRIB2</span></code> :</dt><dd><p>the template is a GRIB 2 file containing a generic record used
by ecCodes to construct the final GRIB 2 record. When
out_type_template is not set, the value of <a class="reference internal" href="globRes.html#GlobalResource.grib2_sample" title="&amp;GlobalResource.grib2_sample"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalResource.grib2_sample</span></code></a> is used instead.</p>
<p>Important: see remark in <a class="reference internal" href="../output.html#section-7-12"><span class="std std-ref">GRIB2</span></a> about the choice of the GRIB 2 sample.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_file_header">
<span class="sig-name descname"><span class="pre">out_type_file_header</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;user</span> <span class="pre">specified</span> <span class="pre">file</span> <span class="pre">header&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#Process.out_type_file_header" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code></p>
<p>Replace the standard and automatically defined output type and output version
string, which is also the file header.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_text1">
<span class="sig-name descname"><span class="pre">out_type_text1</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;user</span> <span class="pre">defined</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">some</span> <span class="pre">output&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#Process.out_type_text1" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_text2">
<span class="sig-name descname"><span class="pre">out_type_text2</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;user</span> <span class="pre">defined</span> <span class="pre">text</span> <span class="pre">for</span> <span class="pre">some</span> <span class="pre">output&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#Process.out_type_text2" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code>, <code class="docutils literal notranslate"><span class="pre">METEOG</span></code>, <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>Set user defined text in file header of some output:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">METEOG</span></code> : two first header lines</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code> : ‘Description’ header line</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TMPL_BASE</span></code> : attributes ‘user_text1’ and ‘user_text2’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NETCDF</span></code> : global attributes ‘title’ and ‘comment’</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_depreciated">
<span class="sig-name descname"><span class="pre">out_type_depreciated</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;use</span> <span class="pre">depreciated</span> <span class="pre">version</span> <span class="pre">of</span> <span class="pre">format&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_depreciated" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_verbosity">
<span class="sig-name descname"><span class="pre">out_type_verbosity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;verbosity</span> <span class="pre">of</span> <span class="pre">output;</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">0,1,2,3,4&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#Process.out_type_verbosity" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_mminfo">
<span class="sig-name descname"><span class="pre">out_type_mminfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;express</span> <span class="pre">date</span> <span class="pre">in</span> <span class="pre">minutes;</span> <span class="pre">'yes',</span> <span class="pre">'no'</span> <span class="pre">or</span> <span class="pre">'auto'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'auto'</span></em><a class="headerlink" href="#Process.out_type_mminfo" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_pdfinfo">
<span class="sig-name descname"><span class="pre">out_type_pdfinfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;display</span> <span class="pre">PDF</span> <span class="pre">related</span> <span class="pre">information;</span> <span class="pre">'yes',</span> <span class="pre">'no'</span> <span class="pre">or</span> <span class="pre">'auto'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'auto'</span></em><a class="headerlink" href="#Process.out_type_pdfinfo" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_epsminfo">
<span class="sig-name descname"><span class="pre">out_type_epsminfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;display</span> <span class="pre">EPS</span> <span class="pre">member</span> <span class="pre">information;</span> <span class="pre">'yes',</span> <span class="pre">'no'</span> <span class="pre">or</span> <span class="pre">'auto'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'auto'</span></em><a class="headerlink" href="#Process.out_type_epsminfo" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">DAT_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_prodinfo">
<span class="sig-name descname"><span class="pre">out_type_prodinfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;display</span> <span class="pre">product</span> <span class="pre">information;</span> <span class="pre">'yes',</span> <span class="pre">'no'</span> <span class="pre">or</span> <span class="pre">'auto'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'auto'</span></em><a class="headerlink" href="#Process.out_type_prodinfo" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_locinfo">
<span class="sig-name descname"><span class="pre">out_type_locinfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;additional</span> <span class="pre">information</span> <span class="pre">on</span> <span class="pre">locations&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_locinfo" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code></p>
<p>when out_type_locinfo is true and locations are used to specify a domain subset,
the latitude/longitude/height of each location is written in the output file
header (in addition to the corresponding values for the associated grid points).</p>
</dd></dl>

<p>Some of these parameters support an automatic mode (<code class="docutils literal notranslate"><span class="pre">'auto'</span></code>); in this case the
format is derived from the content of the internal storage, or from the definition
of the time loop in the namelist (<a class="reference internal" href="#Process.out_type_mminfo" title="&amp;Process.out_type_mminfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_mminfo</span></code></a>).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_separator">
<span class="sig-name descname"><span class="pre">out_type_separator</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;field</span> <span class="pre">separator&gt;</span></em><a class="headerlink" href="#Process.out_type_separator" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_cheader">
<span class="sig-name descname"><span class="pre">out_type_cheader</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;column</span> <span class="pre">headers&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#Process.out_type_cheader" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_fusedt">
<span class="sig-name descname"><span class="pre">out_type_fusedt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;fuse</span> <span class="pre">date</span> <span class="pre">&amp;</span> <span class="pre">time</span> <span class="pre">info&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_fusedt" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code>, <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_line_label">
<span class="sig-name descname"><span class="pre">out_type_line_label</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;define</span> <span class="pre">way</span> <span class="pre">data</span> <span class="pre">is</span> <span class="pre">tabulated</span> <span class="pre">-</span> <span class="pre">string&gt;</span></em><a class="headerlink" href="#Process.out_type_line_label" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_legend">
<span class="sig-name descname"><span class="pre">out_type_legend</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;define</span> <span class="pre">type</span> <span class="pre">of</span> <span class="pre">header</span> <span class="pre">-</span> <span class="pre">string&gt;</span></em><a class="headerlink" href="#Process.out_type_legend" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code></p>
</dd></dl>

<p>The above parameters define the characteristics of CSV oriented output.</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">XLS_TABLE</span></code> output can either be expressed as a MS Excel compatible csv
data, or as a column oriented fixed format data. The active option is
defined by the value of <a class="reference internal" href="#Process.out_type_separator" title="&amp;Process.out_type_separator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_separator</span></code></a>.</p>
<p><a class="reference internal" href="#Process.out_type_separator" title="&amp;Process.out_type_separator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_separator</span></code></a> is a single character used to separate fields in
output; date information and time information are also represented
in a form compatible with MS Excel. When <a class="reference internal" href="#Process.out_type_separator" title="&amp;Process.out_type_separator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_separator</span></code></a> is missing
or blank, output is column oriented and fields are separated by one or
more blanks.</p>
<p>The csv variant supports additional customizing:
<a class="reference internal" href="#Process.out_type_cheader" title="&amp;Process.out_type_cheader"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_cheader</span></code></a> is a string specifiying the way data is arranged in lines and columns:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'gp'</span></code>    :</dt><dd><p>each column is uniquely specified by a location (grid point)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'gp+fd'</span></code> :</dt><dd><p>each column is uniquely specified by a location and a field</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">''</span></code>      :</dt><dd><p>default, same as <code class="docutils literal notranslate"><span class="pre">'gp'</span></code></p>
</dd>
</dl>
<p><a class="reference internal" href="#Process.out_type_fusedt" title="&amp;Process.out_type_fusedt"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_fusedt</span></code></a> is a logical switch controlling the fusion of date and time information into a single string.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ASCII_TABLE</span></code></p>
<p><a class="reference internal" href="#Process.out_type_separator" title="&amp;Process.out_type_separator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_separator</span></code></a> is a single character used to separate fields in
output; default value is ‘;’, blank value is supported.</p>
<p>Five options for the arrangement of output values are possible; the option
is choosen by the namelist <a class="reference internal" href="#Process.out_type_line_label" title="&amp;Process.out_type_line_label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_line_label</span></code></a>:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">location_time</span></code></dt><dd><p>one new line for each location and each validation
time (outer loop on location), different fields in
different columns</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time_location</span></code></dt><dd><p>one new line for each location and each validation
time (outer loop on time), different fields in
different columns</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time_location_level</span></code></dt><dd><p>one new line for each location, each validation time
and each level (outer loop on time, inner loop on
levels), different fields (incl. EPS / pdf infos)
in different columns; requires unique set of levels</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">field_time</span></code></dt><dd><p>one new line for each field and each validation
time (outer loop on field), different locations in
different columns</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time_field</span></code></dt><dd><p>one new line for each field and each validation
time (outer loop on time), different locations in
different columns</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time</span></code></dt><dd><p>one new line for each validation time, one new column
for each location and each validation time (outer loop
on locations)</p>
</dd>
</dl>
<p>Default value is <code class="docutils literal notranslate"><span class="pre">&quot;location_time&quot;</span></code>.</p>
<p>In addition, four options for the file header can be chosen, controled by
namelist out_type_legend:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>no header at all</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">standard</span></code></dt><dd><p>standard header</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">detailed</span></code></dt><dd><p>currently same as “standard”</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extra</span></code></dt><dd><p>minimal header in data file, full header as extra file</p>
</dd>
</dl>
<p>Default value is <code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code> (if <a class="reference internal" href="#Process.out_type_line_label" title="&amp;Process.out_type_line_label"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_line_label</span></code></a> is not set or
<code class="docutils literal notranslate"><span class="pre">out_type_line_label=location_time</span></code>) or “standard” otherwise.</p>
</li>
</ol>
</section>
<section id="out-type-attributes-for-special-situations">
<h4>Out type attributes for special situations<a class="headerlink" href="#out-type-attributes-for-special-situations" title="Permalink to this heading">#</a></h4>
<p>Some output types support special ‘dialects’ to make them consistent
with downstream applications.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_lagranto">
<span class="sig-name descname"><span class="pre">out_type_lagranto</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;LAGRANTO</span> <span class="pre">compatible</span> <span class="pre">NetCDF</span> <span class="pre">output&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_lagranto" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p>
<p>LAGRANTO is a Lagrangian analysis tool (trajectories) developed at ETHZ
(see <a class="reference external" href="http://iacweb.ethz.ch/staff/sprenger/lagranto/">http://iacweb.ethz.ch/staff/sprenger/lagranto/</a>) which requires input
files expressed in NetCDF. The standard NetCDF CF format produced by
fieldextra is not compatible with LAGRANTO when working with GME of IFS
model output, and the switch <a class="reference internal" href="#Process.out_type_lagranto" title="&amp;Process.out_type_lagranto"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_lagranto</span></code></a> must be set to true in this
case. In particular, <a class="reference internal" href="#Process.out_type_lagranto" title="&amp;Process.out_type_lagranto"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_lagranto</span></code></a> triggers the coding of (Ak,Bk)
vertical coordinates coefficients and change the naming convention of
some NetCDF dimensions.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_type_dwhhack">
<span class="sig-name descname"><span class="pre">out_type_dwhhack</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;DWH</span> <span class="pre">compatible</span> <span class="pre">FLD_TABLE</span> <span class="pre">output&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.out_type_dwhhack" title="Permalink to this definition">#</a></dt>
<dd><p>Compatible with <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code></p>
<p>DWH is the MeteoSwiss database, and some naming conventions used in the
standard fieldextra ASCII output must be changed to make <code class="docutils literal notranslate"><span class="pre">FLD_TABLE</span></code> output
compatible with this software. In particular, <a class="reference internal" href="#Process.out_type_dwhhack" title="&amp;Process.out_type_dwhhack"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_dwhhack</span></code></a> triggers
the use of special field descriptor for EPS probabilities.</p>
</dd></dl>

<p>For most output types it is possible to restrict the data to a subset
of the whole domain …</p>
<p><strong>by specifying a frame</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.frame_ngp">
<span class="sig-name descname"><span class="pre">frame_ngp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;frame</span> <span class="pre">width,</span> <span class="pre">in</span> <span class="pre">grid</span> <span class="pre">points&gt;</span></em><a class="headerlink" href="#Process.frame_ngp" title="Permalink to this definition">#</a></dt>
<dd><p>The frame is the set of grid points whose euclidean distance to
the border of the original domain is smaller or equal to ‘frame_ngp’</p>
</dd></dl>

<p><strong>by specifying a rectangle in grid point coordinates</strong>
(dense subset when iinc=1 and jinc=1, sparse subset otherwise)</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.imin">
<span class="sig-name descname"><span class="pre">imin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;minimal</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">i-component&gt;</span></em><a class="headerlink" href="#Process.imin" title="Permalink to this definition">#</a></dt>
<dd><p>-1 means no subdomain</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.imax">
<span class="sig-name descname"><span class="pre">imax</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;maximal</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">i-component&gt;</span></em><a class="headerlink" href="#Process.imax" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.jmin">
<span class="sig-name descname"><span class="pre">jmin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;minimal</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">j-component&gt;</span></em><a class="headerlink" href="#Process.jmin" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.jmax">
<span class="sig-name descname"><span class="pre">jmax</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;maximal</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">j-component&gt;</span></em><a class="headerlink" href="#Process.jmax" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.iinc">
<span class="sig-name descname"><span class="pre">iinc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;i-increment&gt;</span></em><a class="headerlink" href="#Process.iinc" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.jinc">
<span class="sig-name descname"><span class="pre">jinc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;j-increment&gt;</span></em><a class="headerlink" href="#Process.jinc" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p><strong>by specifying a region in geographical coordinates</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.region_bbox">
<span class="sig-name descname"><span class="pre">region_bbox</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;region_set_tag,region_tag&gt;</span></em><a class="headerlink" href="#Process.region_bbox" title="Permalink to this definition">#</a></dt>
<dd><p>The subdomain will be the bounding box of the region, expressed as
the smallest rectangle in grid point coordinates containing the
specified region. The region is defined as a polygon in geographical
lat/lon coordinates; the values of ‘region_set_tag’ and ‘region_tag’
refer to the definition of regions in the <a class="reference internal" href="globRes.html#GlobalResource.region_list" title="&amp;GlobalResource.region_list"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalResource.region_list</span></code></a> file (see <a class="reference internal" href="../support.html#section-6-4"><span class="std std-ref">region_list</span></a>).</p>
</dd></dl>

<p><strong>by specifying a set of grid point coordinates</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.ilist">
<span class="sig-name descname"><span class="pre">ilist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;i-component&gt;,&lt;i-component&gt;,...</span></em><a class="headerlink" href="#Process.ilist" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.jlist">
<span class="sig-name descname"><span class="pre">jlist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;j-component&gt;,&lt;j-component&gt;,...</span></em><a class="headerlink" href="#Process.jlist" title="Permalink to this definition">#</a></dt>
<dd><p>Grid point coordinates either refer to the grid specified by
<a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a> or to the native grid of the input field when
this former variable is not set.</p>
</dd></dl>

<p><strong>by specifying a set of locations in geographical coordinates</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.locgroup">
<span class="sig-name descname"><span class="pre">locgroup</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;location</span> <span class="pre">group&gt;</span></em><a class="headerlink" href="#Process.locgroup" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.loclist">
<span class="sig-name descname"><span class="pre">loclist</span></span><a class="headerlink" href="#Process.loclist" title="Permalink to this definition">#</a></dt>
<dd><p>Can be either</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;location</span> <span class="pre">id&gt;,&lt;location</span> <span class="pre">id&gt;,...</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;location</span> <span class="pre">name&gt;,&lt;location</span> <span class="pre">name&gt;,...</span></code></p></li>
</ul>
</dd></dl>

<p>The set of locations is defined by a list of geographical locations,
which are either defined in the <a class="reference internal" href="globRes.html#GlobalResource.location_list" title="&amp;GlobalResource.location_list"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalResource.location_list</span></code></a> file or automatically
generated as region representative (see description of <a class="reference internal" href="globRes.html#GlobalResource.region_list" title="&amp;GlobalResource.region_list"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalResource.region_list</span></code></a>).
The list of locations can be specified by using the location id’s,
or by exploiting the location aliases defined in the <a class="reference internal" href="globRes.html#GlobalResource.location_list" title="&amp;GlobalResource.location_list"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalResource.location_list</span></code></a>
file (of the form <code class="docutils literal notranslate"><span class="pre">&lt;group&gt;:&lt;name&gt;</span></code>). In this latter case, the location
group has to be specified with <code class="docutils literal notranslate"><span class="pre">locgroup=...</span></code>, and the associated list
of names with <code class="docutils literal notranslate"><span class="pre">loclist=...</span></code> Only one group may be specified. If <a class="reference internal" href="#Process.loclist" title="&amp;Process.loclist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.loclist</span></code></a>
is empty, all group members are selected.</p>
<p>The definition of a dynamic set of locations is supported by specifying
<a class="reference internal" href="#Process.locgroup" title="&amp;Process.locgroup"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.locgroup</span></code></a> and letting <a class="reference internal" href="#Process.loclist" title="&amp;Process.loclist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.loclist</span></code></a> empty; in this case, and in this case only,
the set of locations considered for the current output are all the
locations belonging to the specified group which are also resolved. In
other words, all locations associated with empty regions, outside of
incore grid, or outside of target grid are filtred out.</p>
<p>Geographical locations are associated to grid points according to the
algorithm defined by location_to_gridpoint in <a class="reference internal" href="globSet.html#module-GlobalSettings" title="&amp;GlobalSettings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings</span></code></a>. The
reference grid is always the common base grid associated with the output
file (i.e. the grid specified with <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>, or the grid common
to <em>all</em> collected fields). Consequently, when mixing staggered with
un-staggered fields, the coordinates of the grid point associated with
a specific location are the same on the un-staggered as on the staggered
grid (i.e. they are not re-adjusted to take into account the staggering).</p>
<p><strong>by specifying a slice, i.e. a path on the surface of the earth</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;slice_tag&gt;</span></em><a class="headerlink" href="#Process.slice" title="Permalink to this definition">#</a></dt>
<dd><p>A slice is a broken line on the surface of the earth. The value of
slice_tag refers to the definition of the slice found in the file
specified by slice_list (as defined in <a class="reference internal" href="globRes.html#module-GlobalResource" title="&amp;GlobalResource"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalResource</span></code></a>). See <a class="reference internal" href="../support.html#section-6-5"><span class="std std-ref">slice_list</span></a> for more detailed information.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a subset specification is typically not compatible with all possible
output types. In particular, the slice specification is only compatible
with NetCDF output. The table in section 6 specifies which subset
specification is compatible with which output type.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when out_type requires a (dense) rectangular subset, which is the
case for {GRIB1,GRIB2,NETCDF,BLK_TABLE}, and the specified subset does
not match this condition, the smallest (dense) rectangle containing
the specified subset is created, at the end of the processing iterations,
with undefined values at any points not part of the original subset.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when out_regrid_* is also active, the re-gridding algorithm is applied
_after_ the data is reduced to the specified subset. Note that out_regrid
is only possible with a subset compatible with a sparse or dense rectangle.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the order of the values in the output file depends on the type of subset
and the type of output:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><a class="reference internal" href="#Process.out_type" title="&amp;Process.out_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type</span></code></a></p></th>
<th class="head"><p>subset</p></th>
<th class="head"><p>order</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, <code class="docutils literal notranslate"><span class="pre">BLK_TABLE</span></code></p></td>
<td><p>all</p></td>
<td><p>follow native scanning mode or scanning mode specified by <a class="reference internal" href="#Process.out_type_scanmode" title="&amp;Process.out_type_scanmode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_scanmode</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NETCDF</span></code></p></td>
<td><p>all</p></td>
<td><p>values stored as 2D/3D/4D array (slice: slice dimension, others: lat/lon dimensions)</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p> other</p></td>
<td><p>no subset, frame, rectangle</p></td>
<td><p>follow native scanning mode</p></td>
</tr>
<tr class="row-odd"><td><p>grid points, locations</p></td>
<td><p>follow order specified in namelist</p></td>
</tr>
<tr class="row-even"><td><p>slice</p></td>
<td><p>follow slice</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>It is also possible to restrict the data to a subset of the whole domain
defined by some logical conditions on the extracted or generated fields:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_filter">
<span class="sig-name descname"><span class="pre">in_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.in_filter" title="Permalink to this definition">#</a></dt>
<dd><p>e.g. <code class="docutils literal notranslate"><span class="pre">in_filter='FR_LAND&gt;0.5</span> <span class="pre">&amp;&amp;</span> <span class="pre">T&lt;273.0'</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp1_filter">
<span class="sig-name descname"><span class="pre">tmp1_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.tmp1_filter" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp2_filter">
<span class="sig-name descname"><span class="pre">tmp2_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.tmp2_filter" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp3_filter">
<span class="sig-name descname"><span class="pre">tmp3_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.tmp3_filter" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp4_filter">
<span class="sig-name descname"><span class="pre">tmp4_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.tmp4_filter" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp5_filter">
<span class="sig-name descname"><span class="pre">tmp5_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.tmp5_filter" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_filter">
<span class="sig-name descname"><span class="pre">out_filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.out_filter" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>Each logical condition is applied at the end of the corresponding processing
iteration (see <a class="reference internal" href="#section-4-3-4"><span class="std std-ref">Operations applied on extracted fields</span></a> and <a class="reference internal" href="#section-4-3-5"><span class="std std-ref">Generated fields and associated operations</span></a>), and all field values at the locations
where the condition is not satisfied are set to undefined. It is then possible
to filter out these points, and to keep only the locations where the condition
is true, by using the <code class="docutils literal notranslate"><span class="pre">N_TUPLE</span></code> output format (see <a class="reference internal" href="../output.html#section-7-5"><span class="std std-ref">ASCII_TABLE</span></a>).</p>
<p>Logical conditions are expressed as a suite of n tokens, combined with the
logical operator <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> or <code class="docutils literal notranslate"><span class="pre">||</span></code>; the full syntax is detailed in <a class="reference internal" href="#section-4-3-7"><span class="std std-ref">Masks</span></a>.
Each token must use a field tag (empty tag is not allowed in this case).
Conditions are evaluated independently for each validation time.</p>
<p>The condition associated with a specific token depends on the value of
the field tag:</p>
<ol class="arabic simple">
<li><p>when the field tag univoquely defines a field in the current iteration (e.g. <code class="docutils literal notranslate"><span class="pre">FR_LAND</span></code>), the associated condition is applied to all fields;</p></li>
<li><p>otherwise (e.g. T) the condition is interpreted and applied separately
for each class of fields having the same characteristics (e.g. for each level),
and is ignored for other fields.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>because derived fields are only computed where all parents are defined,
these filters also influence the subsequently generated fields</p>
</div>
</section>
</section>
</section>
<section id="extracted-fields">
<span id="section-4-3-3"></span><h2>Extracted fields<a class="headerlink" href="#extracted-fields" title="Permalink to this heading">#</a></h2>
<p>For each pair of input/output file the set of fields to extract is defined
by specifying one or many <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">in_field=...</span></code> blocks. The way this
information is interpreted is defined by the value of <a class="reference internal" href="#Process.selection_mode" title="&amp;Process.selection_mode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.selection_mode</span></code></a>.</p>
<p>For each output file, all extracted fields from all contributing input files
are available for the generation of the final product.</p>
<p>The definition of the fields to extract for a specific output must be
orthogonal in the following sense: any available input field must match
at most one <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">in_field=...</span> <span class="pre">/</span></code> specification. Consequently, it
is not possible to extract twice the same field even if different tags
or operators are subsequently applied to this field (this restriction
does not exist for the definition of generated fields, see <a class="reference internal" href="#section-4-3-5"><span class="std std-ref">Generated fields and associated operations</span></a>).</p>
<p>Fields declared as constant in time in the active dictionary (<code class="docutils literal notranslate"><span class="pre">constant=T</span></code>)
are processed in a special way when mixed with non-constant fields; the
validation date and the time range information of each constant field is
automatically reset according to the following rules:</p>
<ul class="simple">
<li><p>constant fields are valid for each validation date associated with
one of the non constant field, and only for these validation dates;</p></li>
<li><p>the lead time of each constant field is set to the common lead time
of the non-constant fields, if possible, otherwise to 0;</p></li>
<li><p>the time period of each constant field is set to none.</p></li>
</ul>
<p>Note that these rules do not apply for output composed of constant
fields only.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.selection_mode">
<span class="sig-name descname"><span class="pre">selection_mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;INCLUDE_ONLY,</span> <span class="pre">INCLUDE_ALL</span> <span class="pre">or</span> <span class="pre">EXCLUDE&gt;</span></em><a class="headerlink" href="#Process.selection_mode" title="Permalink to this definition">#</a></dt>
<dd><p>This defines how the <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">in_field=</span> <span class="pre">...</span></code> specifications are
interpreted:</p>
<dl class="simple">
<dt>INCLUDE_ONLY :</dt><dd><p>only the specified fields are extracted and are
available for further processing (default).</p>
</dd>
<dt>INCLUDE_ALL  :</dt><dd><p>the specified fields are extracted and are available
for further processing, in addition all other input
fields are transfered in the output file.</p>
</dd>
<dt>EXCLUDE      :</dt><dd><p>all the fields which do <em>not</em> match the specifications are extracted and are available for further processing.</p>
</dd>
</dl>
<p>When using INCLUDE_ALL or EXCLUDE mode, it is recommended to explicitely
specify <a class="reference internal" href="#Process.in_size_field" title="&amp;Process.in_size_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_size_field</span></code></a> to minimize the memory footprint (otherwise the
maximum number of fields is assumed, as defined in fxtr_definition).</p>
<p>Only INCLUDE_ONLY is supported when working with INCORE pseudo-input.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.in_field">
<span class="sig-name descname"><span class="pre">in_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;short</span> <span class="pre">name</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">collect&gt;</span></em><a class="headerlink" href="#Process.in_field" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.skip_time">
<span class="sig-name descname"><span class="pre">skip_time</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;time&gt;,&lt;time&gt;...</span></em><a class="headerlink" href="#Process.skip_time" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.keep_time">
<span class="sig-name descname"><span class="pre">keep_time</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;time&gt;,&lt;time&gt;...</span></em><a class="headerlink" href="#Process.keep_time" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.expect_missing_field">
<span class="sig-name descname"><span class="pre">expect_missing_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;not</span> <span class="pre">exception</span> <span class="pre">for</span> <span class="pre">missing</span> <span class="pre">field&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">false</span></em><a class="headerlink" href="#Process.expect_missing_field" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>The identity of the field associated with the in_field is defined in the
active dictionary. Note that only short names are allowes as in_field
value (using a field tag will produce an exception).</p>
<p>__ALL__ is a reserved name, used as wildcard, to extract all fields present
in the input file. It may be necessary to explicitely specify in_size_field
to minimize the memory footprint when __ALL__ is used (otherwise the maximum
number of fields defined in fxtr_definition is assumed).</p>
<p>__ALL__ can not be used when selection mode is set to EXCLUDE.</p>
<p>When the input files are defined with a time loop, it is possible to filter
the set of input files contributing to in_field by setting skip_time or
keep_time (only one must be used). The specified list of times refers to
the input time loop, as defined by tlist or tstart, tstop. When setting
skip_time, only the input files with a time stamp not in skip_time list
are considered; when using keep_time, only the input files with a time
stamp included in keep_time list are considered.
This is useful to write compact namelist, e.g., when some of the input
fields are not available for all lead times, or when a different field
is used for lead time 0, like SOSB_RAD and ASOB_S.</p>
<p>By default, an exception is raised when a specified <a class="reference internal" href="#Process.in_field" title="&amp;Process.in_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_field</span></code></a> is not found
in the associated <a class="reference internal" href="#Process.in_file" title="&amp;Process.in_file"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_file</span></code></a>, or when the record is rejected. This behaviour
can be changed by setting <a class="reference internal" href="#Process.expect_missing_field" title="&amp;Process.expect_missing_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.expect_missing_field</span></code></a> to true; this is useful e.g.
when missing fields are expected and are replaced by interpolated values
from contiguous time levels (see <code class="docutils literal notranslate"><span class="pre">'fill_undef'</span></code> in <a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a>).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.ignore_model_identity">
<span class="sig-name descname"><span class="pre">ignore_model_identity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">logical</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.ignore_model_identity" title="Permalink to this definition">#</a></dt>
<dd><p>When true, the model name and the model type of the associated field are
ignored, and the default model name and default dictionary, as specified
in <a class="reference internal" href="globSet.html#module-GlobalSettings" title="&amp;GlobalSettings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings</span></code></a>, are used instead. Furthermore, the values of any other
meta-information associated with the new model name are also reset (this
concerns the originatingCenter, the originatingSubcenter, and the
generatingProcessIdentifier).</p>
<p>This operator is applied before any <code class="docutils literal notranslate"><span class="pre">set_*</span></code> operator.</p>
<p>This operator supports mixing fields from different models, e.g. when
interpolating one model output to the levels defined for a different
model.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.ignore_vcoord">
<span class="sig-name descname"><span class="pre">ignore_vcoord</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">logical</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">.FALSE.</span></em><a class="headerlink" href="#Process.ignore_vcoord" title="Permalink to this definition">#</a></dt>
<dd><p>When true, the vertical coordinate information of the associated field
is ignored, and the information derived from the other contributing
fields is used instead.</p>
<p>This operator supports working with model fields defined on multiple
sets of vertical coordinates, e.g. when interpolating one model output
to a different set of vertical levels.</p>
<p>Be careful not to mix in the same operation model level fields defined
for different vertical coordinates (in such a case, having the same
surface value does not guarantee that the same level is considered).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.reference_field">
<span class="sig-name descname"><span class="pre">reference_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;true</span> <span class="pre">of</span> <span class="pre">false&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">is</span> <span class="pre">true</span></em><a class="headerlink" href="#Process.reference_field" title="Permalink to this definition">#</a></dt>
<dd><p>Used to discriminate in INCORE storage between fields associated with the
reference grid and other instances of the field (see <a class="reference internal" href="#Process.out_type" title="&amp;Process.out_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type</span></code></a>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">use_tag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag1,</span> <span class="pre">tag2,</span> <span class="pre">...</span> <span class="pre">(string)&gt;</span></em></dt>
<dd><p>The set of fields collected from some input files can be filtred on the
basis of their tags. This can be necessary when multiple instances of
the same field are stored in the contributing input.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">product_category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;product</span> <span class="pre">category&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'all'</span></em></dt>
<dd><p>The product category to select may be explicitely specified;</p>
<dl>
<dt>supported values are:</dt><dd><div class="line-block">
<div class="line">‘determinist’,</div>
<div class="line">‘eps_control’, ‘eps_member’, ‘eps_mean’, ‘eps_perturbation’,</div>
<div class="line">‘eps_spread’,</div>
<div class="line">‘eps_standard_deviation’, ‘eps_standard_deviation_normed’,</div>
<div class="line">‘eps_quantile’, ‘eps_quantile_difference’,</div>
<div class="line">‘eps_probability’, ‘nbh_probability’, ‘stat_probability’,</div>
<div class="line">‘eps_probability_refdist’,</div>
<div class="line">‘eps_extreme_forecast_index’, ‘eps_shift_of_tail_index’,</div>
<div class="line">‘satellite’, ‘radar’,</div>
<div class="line">‘all’</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.level_class">
<span class="sig-name descname"><span class="pre">level_class</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;type</span> <span class="pre">of</span> <span class="pre">level</span> <span class="pre">to</span> <span class="pre">select&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'all'</span></em><a class="headerlink" href="#Process.level_class" title="Permalink to this definition">#</a></dt>
<dd><p>The type of levels to select may be explicitely specified</p>
<p>supported values are:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘p’</p></td>
<td><p>atmospheric levels, pressure surface</p></td>
</tr>
<tr class="row-odd"><td><p>‘t’</p></td>
<td><p>atmospheric levels, temperature surface</p></td>
</tr>
<tr class="row-even"><td><p>‘theta’</p></td>
<td><p>atmospheric levels, potential temperature surface</p></td>
</tr>
<tr class="row-odd"><td><p>‘pv’</p></td>
<td><p>atmospheric levels, potential vorticity surface</p></td>
</tr>
<tr class="row-even"><td><p>‘density’</p></td>
<td><p>atmospheric levels, density surface (air, tracer, chemical…)</p></td>
</tr>
<tr class="row-odd"><td><p>‘z’</p></td>
<td><p>atmospheric levels, height surface</p></td>
</tr>
<tr class="row-even"><td><p>‘z_agl’</p></td>
<td><p>atmospheric levels, height above ground surface</p></td>
</tr>
<tr class="row-odd"><td><p>‘z_agl_half’</p></td>
<td><p>atmospheric levels, height above ground surface, interface</p></td>
</tr>
<tr class="row-even"><td><p>‘z_amsl’</p></td>
<td><p>atmospheric levels, height above sea surface</p></td>
</tr>
<tr class="row-odd"><td><p>‘z_amsl_half’</p></td>
<td><p>atmospheric levels, height above sea surface, interface</p></td>
</tr>
<tr class="row-even"><td><p>‘k’</p></td>
<td><p>atmospheric indexed model levels (hybrid, generalized height)</p></td>
</tr>
<tr class="row-odd"><td><p>‘k_half’</p></td>
<td><p>atmospheric indexed model levels, interface</p></td>
</tr>
<tr class="row-even"><td><p>‘k_full’</p></td>
<td><p>atmospheric indexed model levels, layer</p></td>
</tr>
<tr class="row-odd"><td><p>‘soil’</p></td>
<td><p>soil levels</p></td>
</tr>
<tr class="row-even"><td><p>‘slev’</p></td>
<td><p>atmospheric/surface single level fields</p></td>
</tr>
<tr class="row-odd"><td><p>‘mlev’</p></td>
<td><p>atmospheric multi-level fields</p></td>
</tr>
<tr class="row-even"><td><p>‘all’</p></td>
<td><p>all</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>each supported level can be uniquely attributed to one of
{‘soil’, ‘slev’, ‘mlev’}</p>
<div class="line-block">
<div class="line">and the following groups are disjuncts</div>
<div class="line">{‘soil’, ‘slev’, ‘k’}</div>
<div class="line">{‘soil’, ‘slev’, ‘k_half’, ‘k_full’}</div>
</div>
</div>
</dd></dl>

<section id="levels">
<h3>Levels<a class="headerlink" href="#levels" title="Permalink to this heading">#</a></h3>
<p><strong>The levels to select can be defined by …</strong></p>
<ul>
<li><p>a list of values</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.levlist">
<span class="sig-name descname"><span class="pre">levlist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;level&gt;,&lt;level&gt;,...</span></em><a class="headerlink" href="#Process.levlist" title="Permalink to this definition">#</a></dt>
<dd><p>-1 means all available levels</p>
</dd></dl>

</li>
<li><p>or by specifying start value, end value and increment</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.levmin">
<span class="sig-name descname"><span class="pre">levmin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;min</span> <span class="pre">value&gt;</span></em><a class="headerlink" href="#Process.levmin" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.levmax">
<span class="sig-name descname"><span class="pre">levmax</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;max</span> <span class="pre">value&gt;</span></em><a class="headerlink" href="#Process.levmax" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.levinc">
<span class="sig-name descname"><span class="pre">levinc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;increment&gt;</span></em><a class="headerlink" href="#Process.levinc" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>for fields defined on layers, the values specified by levlist or
levmin … always refer to the top surface of the layer (e.g. the
lowest layer of a field defined on hybrid model levels, with model
level indices increasing with height, is selected by setting levlist=2)</p>
</div>
<p>The associated physical units may be specified by</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.level_units">
<span class="sig-name descname"><span class="pre">level_units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;units&gt;</span></em><a class="headerlink" href="#Process.level_units" title="Permalink to this definition">#</a></dt>
<dd><p>optional</p>
<p>The possible values are:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘none’,</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>‘Pa’, ‘hPa’</p></td>
<td><p>pressure</p></td>
</tr>
<tr class="row-even"><td><p>‘m’, ‘cm’, ‘mm’</p></td>
<td><p>height or depth</p></td>
</tr>
<tr class="row-odd"><td><p>‘K’, ‘cK’</p></td>
<td><p>temperature</p></td>
</tr>
<tr class="row-even"><td><p>‘mPVU’</p></td>
<td><p>potential vorticity</p></td>
</tr>
<tr class="row-odd"><td><p>‘kgm-3’, ‘gm-3’, ‘mgm-3’, ‘mugm-3’</p></td>
<td><p>density , mugm-3 = 10**-6 g/m**3</p></td>
</tr>
</tbody>
</table>
</div>
<p>When <a class="reference internal" href="#Process.level_units" title="&amp;Process.level_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.level_units</span></code></a> is missing, the following default units are assumed</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pressure</p></td>
<td><p>[hPa]</p></td>
</tr>
<tr class="row-odd"><td><p>temperature</p></td>
<td><p>[cK]   (i.e. 1E-2 [K])</p></td>
</tr>
<tr class="row-even"><td><p>potential temperature</p></td>
<td><p>[cK]   (i.e. 1E-2 [K])</p></td>
</tr>
<tr class="row-odd"><td><p>potential vorticity</p></td>
<td><p>[mPVU] (i.e. 1E-9 [K m2 s-1 kg-1])</p></td>
</tr>
<tr class="row-even"><td><p>density level</p></td>
<td><p>[10**-6 gm-3]</p></td>
</tr>
<tr class="row-odd"><td><p>height above ground / above sea</p></td>
<td><p>[m]</p></td>
</tr>
<tr class="row-even"><td><p>sigma level</p></td>
<td><p>[1E-4]</p></td>
</tr>
<tr class="row-odd"><td><p>hybrid level</p></td>
<td><p>[1]</p></td>
</tr>
<tr class="row-even"><td><p>depth below ground</p></td>
<td><p>[cm]</p></td>
</tr>
<tr class="row-odd"><td><p>depth below sea</p></td>
<td><p>[m]</p></td>
</tr>
<tr class="row-even"><td><p>satellite channel</p></td>
<td><p>[1]</p></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

<p>If the specified field is attached to a layer, and not to a level,
these values are interpreted as top of layers (in a geographical sense)
or as the values for the variable surface when the other surface is
constant (e.g. a layer defined between a pressure surface and the ground).</p>
<p><strong>The EPS members to select can be defined by …</strong></p>
<ul>
<li><p>a list of values</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epslist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;member&gt;,&lt;member&gt;,...</span></em></dt>
<dd><p>-1 means all available members</p>
</dd></dl>

</li>
<li><p>specifying start value, end value and increment</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epsstart</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;start</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epsstop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;stop</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epsincr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;increment</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em></dt>
<dd></dd></dl>

</li>
</ul>
</section>
<section id="pdf-characteristics">
<h3>PDF Characteristics<a class="headerlink" href="#pdf-characteristics" title="Permalink to this heading">#</a></h3>
<p>Characteristics of PDF related fields are specified by:</p>
<ul>
<li><p>for probability</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.prob_interval">
<span class="sig-name descname"><span class="pre">prob_interval</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;[x,y],</span> <span class="pre">[x,y[,</span> <span class="pre">]x,y]</span> <span class="pre">or</span> <span class="pre">]x,y[,</span> <span class="pre">as</span> <span class="pre">string&gt;</span></em><a class="headerlink" href="#Process.prob_interval" title="Permalink to this definition">#</a></dt>
<dd><p>interval of values, expressed in field units</p>
<p>with  x and y being either real numbers, or
<code class="docutils literal notranslate"><span class="pre">'-infinite'</span></code> or <code class="docutils literal notranslate"><span class="pre">'infinite'</span></code></p>
</dd></dl>

</li>
<li><p>for probability, depreciated
interval lower and upper boundaries, expressed in field units,
the boundaries are <em>not</em> included in the interval</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.prob_tlow">
<span class="sig-name descname"><span class="pre">prob_tlow</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;interval</span> <span class="pre">lower</span> <span class="pre">threshold</span> <span class="pre">(real)&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-infinite</span></em><a class="headerlink" href="#Process.prob_tlow" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.prob_thigh">
<span class="sig-name descname"><span class="pre">prob_thigh</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;interval</span> <span class="pre">higher</span> <span class="pre">threshold</span> <span class="pre">(real)&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">infinite</span></em><a class="headerlink" href="#Process.prob_thigh" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</li>
<li><p>for quantile</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.quantile">
<span class="sig-name descname"><span class="pre">quantile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;quantile,</span> <span class="pre">real&gt;</span></em><a class="headerlink" href="#Process.quantile" title="Permalink to this definition">#</a></dt>
<dd><p>a value for a quantile, between 0 and 100</p>
</dd></dl>

</li>
<li><p>for difference of quantiles</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">quantile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;quantile1,real&gt;,</span> <span class="pre">&lt;quantile2,real&gt;</span></em></dt>
<dd><p>two quantile values, both between 0 and 100, representing
the difference between quantile1 and quantile2</p>
</dd></dl>

</li>
<li><p>for probability with respect to a reference distribution</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.ref_quantile">
<span class="sig-name descname"><span class="pre">ref_quantile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;order</span> <span class="pre">of</span> <span class="pre">reference</span> <span class="pre">quantile,</span> <span class="pre">integer&gt;</span> <span class="pre">[,&lt;number</span> <span class="pre">of</span> <span class="pre">reference</span> <span class="pre">quantile,</span> <span class="pre">integer&gt;]</span></em><a class="headerlink" href="#Process.ref_quantile" title="Permalink to this definition">#</a></dt>
<dd><p>the order of the quantile in the reference distribution and
the total number of quantiles used to represent the reference
distribution</p>
</dd></dl>

</li>
<li><p>for shift of tail index</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.efi_order">
<span class="sig-name descname"><span class="pre">efi_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;percentile</span> <span class="pre">fcst,</span> <span class="pre">integer&gt;[,&lt;percentile</span> <span class="pre">climate,</span> <span class="pre">integer&gt;]</span></em><a class="headerlink" href="#Process.efi_order" title="Permalink to this definition">#</a></dt>
<dd><p>two percentile values, both between 0 and 100; the first
value is the forecast percentile and the second the climate
percentile</p>
</dd></dl>

</li>
</ul>
</section>
<section id="misc">
<h3>Misc<a class="headerlink" href="#misc" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tag">
<span class="sig-name descname"><span class="pre">tag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag</span> <span class="pre">associated</span> <span class="pre">with</span> <span class="pre">field</span> <span class="pre">(string,</span> <span class="pre">&lt;=</span> <span class="pre">24</span> <span class="pre">characters)&gt;</span></em><a class="headerlink" href="#Process.tag" title="Permalink to this definition">#</a></dt>
<dd><p>Normally a single tag can be associated with each field. As long as
not overwritten, tag is propagated from one iteration to the next
iteration. Tags need not be unique, and the same tag may be used for
multiple fields. Tag values starting with “__” are reserved.</p>
<p>By default a single instance of each 2d field is allowed in the in_field
iteration. This can be changed by setting in_duplicate_field to true;
in this case, tags may be inherited from the input file or may be
programatically set:</p>
<ul class="simple">
<li><p>when a standard file is both used as ouput and as input in the same run,
tags defined in the last iteration of the output production are inherited.</p></li>
<li><p>when the input file is a NetCDF file, and the field short name differs from
the NetCDF variable name <a class="footnote-reference brackets" href="#id16" id="id15" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a>, the variable name is used to set the field tag.</p></li>
<li><p>when neither inherited nor user defined, tags may be programatically set
by using out_autotag.</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id16" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id15">10</a><span class="fn-bracket">]</span></span>
<p>either a short name attribute is found or a varname_translation table is available</p>
</aside>
</aside>
<p>Tags are <em>never</em> inherited from INCORE storage (but <a class="reference internal" href="#Process.use_tag" title="&amp;Process.use_tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_tag</span></code></a> can
be set to filter the fields collected from INCORE storage).</p>
<p>When computing a new field, tags are <em>not</em> transfered from the contributing
parent fields. However, automatically derived fields in INCORE storage
inherit the tag associated with the main parent (see INCORE description
in <a class="reference internal" href="#section-4-3-2"><span class="std std-ref">Output files</span></a>).</p>
<p>When keeping track of multi-level fields, only levels with identical tags
are associated. The same is also true when keeping track of multiple
members of an EPS data set.</p>
<p>Tags are used to:</p>
<ul class="simple">
<li><p>mark incore fields for later reference in the definition of standard
output generation;</p></li>
<li><p>mark fields for later reference in some operators of the present
iteration;</p></li>
<li><p>mark fields for later reference in use_tag of the next iteration;</p></li>
<li><p>distinguish between multiple instances of the same field;</p></li>
<li><p>re-define field names in some output (BLK_TABLE, FLD_TABLE, DAT_TABLE,
XLS_TABLE, ASCII_TABLE);</p></li>
<li><p>build TMPL_BASE output.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>for complex namelists, it is an advantage to systematically use tags;
it is also recommended, in order to differentiate tags from short names,
to use lower case for tags.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.shared_eps_member">
<span class="sig-name descname"><span class="pre">shared_eps_member</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">false</span></em><a class="headerlink" href="#Process.shared_eps_member" title="Permalink to this definition">#</a></dt>
<dd><p>Mark associated field as shared EPS member; this is used to share a single
determinist or EPS member field with multiple members (e.g. to share common
model level height).</p>
<p>When a shared EPS member is part of a product with a unique EPS member
identity, it inherits this identity.</p>
</dd></dl>

</section>
</section>
<section id="operations-applied-on-extracted-fields">
<span id="section-4-3-4"></span><h2>Operations applied on extracted fields<a class="headerlink" href="#operations-applied-on-extracted-fields" title="Permalink to this heading">#</a></h2>
<p>The following only applies when <code class="docutils literal notranslate"><span class="pre">selection_mode=INCLUDE_ALL</span></code> or
<code class="docutils literal notranslate"><span class="pre">selection_mode=INCLUDE_ONLY</span></code>.</p>
<p>Each extracted field may be transformed by one or more operators, in the
order</p>
<p><a class="reference internal" href="#Process.regrid" title="&amp;Process.regrid"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.regrid</span></code></a>, <code class="docutils literal notranslate"><span class="pre">set_*</span></code>, <a class="reference internal" href="#Process.merge_with" title="&amp;Process.merge_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.merge_with</span></code></a>, <a class="reference internal" href="#Process.compare_with" title="&amp;Process.compare_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_with</span></code></a>, <a class="reference internal" href="#Process.hoper" title="&amp;Process.hoper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.hoper</span></code></a>, <a class="reference internal" href="#Process.scale" title="&amp;Process.scale"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.scale</span></code></a>/<a class="reference internal" href="#Process.offset" title="&amp;Process.offset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.offset</span></code></a>, <a class="reference internal" href="#Process.voper" title="&amp;Process.voper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper</span></code></a>,
<a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a>, <a class="reference internal" href="#Process.poper" title="&amp;Process.poper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper</span></code></a>, <a class="reference internal" href="#Process.poper2" title="&amp;Process.poper2"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper2</span></code></a>, <a class="reference internal" href="#Process.poper3" title="&amp;Process.poper3"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper3</span></code></a>, <a class="reference internal" href="#Process.poper4" title="&amp;Process.poper4"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper4</span></code></a>, <a class="reference internal" href="#Process.poper5" title="&amp;Process.poper5"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper5</span></code></a>, spatial filter, <a class="reference internal" href="#Process.new_field_id" title="&amp;Process.new_field_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.new_field_id</span></code></a></p>
<p>(the order is hardcoded and does not depend on the way the namelist is defined).
Each class of operators is applied in turn to all the relevant fields;
within a class the processing order is arbitrary.</p>
<p>Some of these transformations can be iterated by using the <a class="reference internal" href="#Process.tmp1_field" title="&amp;Process.tmp1_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tmp1_field</span></code></a>,
<a class="reference internal" href="#Process.tmp2_field" title="&amp;Process.tmp2_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tmp2_field</span></code></a>, <a class="reference internal" href="#Process.tmp3_field" title="&amp;Process.tmp3_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tmp3_field</span></code></a>, <a class="reference internal" href="#Process.tmp4_field" title="&amp;Process.tmp4_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tmp4_field</span></code></a>, <a class="reference internal" href="#Process.tmp5_field" title="&amp;Process.tmp5_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.tmp5_field</span></code></a>, and <a class="reference internal" href="#Process.out_field" title="&amp;Process.out_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_field</span></code></a>
construct (see <a class="reference internal" href="#section-4-3-5"><span class="std std-ref">Generated fields and associated operations</span></a>).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.regrid">
<span class="sig-name descname"><span class="pre">regrid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">logical</span></em><a class="headerlink" href="#Process.regrid" title="Permalink to this definition">#</a></dt>
<dd><p>re-gridding as defined by <a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a> and <a class="reference internal" href="#Process.in_regrid_method" title="&amp;Process.in_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_method</span></code></a></p>
<p>Activate re-gridding of the associated input field onto the mesh specified by
<a class="reference internal" href="#Process.in_regrid_target" title="&amp;Process.in_regrid_target"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_target</span></code></a>. When all input fields need to be re-regidded, it is possible
to set <a class="reference internal" href="#Process.in_regrid_all" title="&amp;Process.in_regrid_all"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_all</span></code></a> to true instead.</p>
</dd></dl>

<p>Some field meta-information can be (re)set by the user; this will overwite
any existing value in the current record, as well as any default value set
in <a class="reference internal" href="globSet.html#module-GlobalSettings" title="&amp;GlobalSettings"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings</span></code></a>. Depending on the information being set, this can be done
in the extraction phase (i.e. while collecting fields from input data) or
in the last processing iteration, before producing the output.</p>
<p>Operations which are restricted to the extract iteration:</p>
<p><a class="reference internal" href="#Process.set_vcoord" title="&amp;Process.set_vcoord"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_vcoord</span></code></a>, <a class="reference internal" href="#Process.set_time_range" title="&amp;Process.set_time_range"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_time_range</span></code></a></p>
<p>Operations not restricted (can be defined both in the extract iteration and
in the last processing iteration - when defined in the extract iteration, the
operator is applied just after collecting the record, at the very beginning
of the processing, whereas, when defined in the last processing iteration, the
operator is applied at the very end of the iteration):</p>
<p><a class="reference internal" href="#Process.set_level_property" title="&amp;Process.set_level_property"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_level_property</span></code></a>, <a class="reference internal" href="#Process.set_epsmember_identity" title="&amp;Process.set_epsmember_identity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_epsmember_identity</span></code></a>,
<a class="reference internal" href="#Process.set_units" title="&amp;Process.set_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_units</span></code></a>, <a class="reference internal" href="#Process.set_genproc_type" title="&amp;Process.set_genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_genproc_type</span></code></a>, <a class="reference internal" href="#Process.set_product_category" title="&amp;Process.set_product_category"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_product_category</span></code></a>,
<a class="reference internal" href="#Process.set_reference_date" title="&amp;Process.set_reference_date"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_reference_date</span></code></a>, <a class="reference internal" href="#Process.set_trange_type" title="&amp;Process.set_trange_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_trange_type</span></code></a>, <a class="reference internal" href="#Process.set_leadtime" title="&amp;Process.set_leadtime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_leadtime</span></code></a>
<a class="reference internal" href="#Process.set_auxiliary_metainfo" title="&amp;Process.set_auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_auxiliary_metainfo</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_units">
<span class="sig-name descname"><span class="pre">set_units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em><a class="headerlink" href="#Process.set_units" title="Permalink to this definition">#</a></dt>
<dd><p>reset the field units, as declared in the active dictionary,
with a user defined text (which should be compatible with
UNIDATA Udunits package) ; this information is used at the
following places:</p>
<ul class="simple">
<li><p>units in <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code> output,</p></li>
<li><p>part of description string in table of content associated
with <code class="docutils literal notranslate"><span class="pre">GRIB1</span></code>, <code class="docutils literal notranslate"><span class="pre">GRIB2</span></code>, and <code class="docutils literal notranslate"><span class="pre">NETCDF</span></code> output.</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_genproc_type">
<span class="sig-name descname"><span class="pre">set_genproc_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em><a class="headerlink" href="#Process.set_genproc_type" title="Permalink to this definition">#</a></dt>
<dd><p>reset type of generating process; possible values are:</p>
<p>‘observation’, ‘climatology’, ‘initialization’,
‘analysis’, ‘analysis_error’,
‘forecast’, ‘bias_corrected_forecast’, ‘forecast_error’,
‘smoothed_forecast’, ‘smoothed_calibrated_forecast’,
‘eps_forecast’, ‘eps_probability’, ‘neighbourhood_probability’
(not available in GRIB 1; defined in code table 4.3 of GRIB 2, including reserve for local use; supported by dictionary)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_product_category">
<span class="sig-name descname"><span class="pre">set_product_category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em><a class="headerlink" href="#Process.set_product_category" title="Permalink to this definition">#</a></dt>
<dd><p>reset product category; possible values are:</p>
<div class="line-block">
<div class="line">‘determinist’,</div>
<div class="line">‘eps_control’, ‘eps_member’ <a class="footnote-reference brackets" href="#id26" id="id17" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, ‘eps_perturbation’ <a class="footnote-reference brackets" href="#id26" id="id18" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>,</div>
<div class="line">‘eps_mean’, ‘eps_spread’, ‘eps_standard_deviation’,</div>
<div class="line">‘eps_standard_deviation_normed’,</div>
<div class="line">‘eps_quantile’ <a class="footnote-reference brackets" href="#id26" id="id19" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, ‘eps_quantile_difference’ <a class="footnote-reference brackets" href="#id26" id="id20" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>,</div>
<div class="line">‘eps_probability’ <a class="footnote-reference brackets" href="#id26" id="id21" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, ‘nbh_probability’ <a class="footnote-reference brackets" href="#id26" id="id22" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> , ‘stat_probability’ <a class="footnote-reference brackets" href="#id26" id="id23" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>,</div>
<div class="line">‘eps_probability_refdist’ <a class="footnote-reference brackets" href="#id26" id="id24" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>,</div>
<div class="line">‘eps_extreme_forecast_index’,</div>
<div class="line">‘eps_shift_of_tail_index’ <a class="footnote-reference brackets" href="#id26" id="id25" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>,</div>
<div class="line">‘satellite’, ‘radar’</div>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id26" role="note">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id17">1</a>,<a role="doc-backlink" href="#id18">2</a>,<a role="doc-backlink" href="#id19">3</a>,<a role="doc-backlink" href="#id20">4</a>,<a role="doc-backlink" href="#id21">5</a>,<a role="doc-backlink" href="#id22">6</a>,<a role="doc-backlink" href="#id23">7</a>,<a role="doc-backlink" href="#id24">8</a>,<a role="doc-backlink" href="#id25">9</a>)</span>
<p>Associated meta-information (EPS member identity, probability
threshold, quantile value, efi order) must be consistent after
re-setting the product category to one of these values.</p>
</aside>
</aside>
<p>The product category is used in particular to select the
correct set of parent fields when computing a new field,
and to choose the correct template for GRIB coding.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_epsmember_identity">
<span class="sig-name descname"><span class="pre">set_epsmember_identity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;member</span> <span class="pre">value&gt;[,&lt;number</span> <span class="pre">of</span> <span class="pre">members&gt;]</span></em><a class="headerlink" href="#Process.set_epsmember_identity" title="Permalink to this definition">#</a></dt>
<dd><p>reset value of EPS identity, either the value of the EPS member, or the value of the EPS member and the total number of EPS members</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_vcoord">
<span class="sig-name descname"><span class="pre">set_vcoord</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">false</span></em><a class="headerlink" href="#Process.set_vcoord" title="Permalink to this definition">#</a></dt>
<dd><p>reset vertical coefficients, using values
specified in active <a class="reference internal" href="modelSpec.html#module-ModelSpecification" title="&amp;ModelSpecification"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;ModelSpecification</span></code></a>;
must be specified for all multi-levels in_field
(see documentation of <a class="reference internal" href="modelSpec.html#ModelSpecification.vertical_coordinate_coef" title="&amp;ModelSpecification.vertical_coordinate_coef"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;ModelSpecification.vertical_coordinate_coef</span></code></a> for more
details)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_level_property">
<span class="sig-name descname"><span class="pre">set_level_property</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em><a class="headerlink" href="#Process.set_level_property" title="Permalink to this definition">#</a></dt>
<dd><p>reset level characteristics</p>
<p>format is one of</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;sfc_type1&gt;[,&lt;sfc_value1&gt;[,&lt;sfc_value2&gt;]]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;sfc_type1&gt;[,&lt;sfc_value1&gt;],&lt;sfc_type2&gt;[,&lt;sfc_value2&gt;]</span></code></p></li>
</ul>
<dl>
<dt>surface type (<code class="docutils literal notranslate"><span class="pre">&lt;sfc_type1&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;sfc_type2&gt;</span></code>) is one of:</dt><dd><div class="line-block">
<div class="line">surface, mean_sea_level,</div>
<div class="line">pbl_top, tropopause, max_wind_level,</div>
<div class="line">cloud_base, cloud_top, atmosphere_top,</div>
<div class="line">hybrid, generalized_height,</div>
<div class="line">entire_atmosphere (sfc_type1 only),</div>
<div class="line">temperature[K], temperature[cK] <a class="footnote-reference brackets" href="#id29" id="id27" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a>,</div>
<div class="line">theta[K], theta[cK],</div>
<div class="line">height_amsl[m], height_agl[m],</div>
<div class="line">pressure[Pa], pressure[hPa],</div>
<div class="line">p_vorticity[mPVU],</div>
<div class="line">density_base[mugm-3], density_top[mugm-3] <a class="footnote-reference brackets" href="#id30" id="id28" role="doc-noteref"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></a></div>
<div class="line">density_base[gm-3], density_top[gm-3]</div>
<div class="line">soil[m], soil[cm], soil[mm]</div>
</div>
</dd>
</dl>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id29" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id27">11</a><span class="fn-bracket">]</span></span>
<p>cK = 1/100 K</p>
</aside>
<aside class="footnote brackets" id="id30" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id28">12</a><span class="fn-bracket">]</span></span>
<p>mugm-3 = 10**-6 g/m**3</p>
</aside>
</aside>
<p>surface value range (<code class="docutils literal notranslate"><span class="pre">&lt;sfc_value1&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;sfc_value2&gt;</span></code>) is defined by the following table</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>value</p></th>
<th class="head"><p>range</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>surface</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-odd"><td><p>pbl_top</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p>tropopause</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-odd"><td><p>cloud_base</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p>cloud_top</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-odd"><td><p>atmosphere_top</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p>entire_atmosphere</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-odd"><td><p>max_wind_level</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-even"><td><p>mean_sea_level</p></td>
<td><p>none</p></td>
</tr>
<tr class="row-odd"><td><p>hybrid</p></td>
<td><p>in {1,mx_lev+1} <a class="footnote-reference brackets" href="#id33" id="id31" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-even"><td><p>generalized_height</p></td>
<td><p>in {1,mx_lev+1} <a class="footnote-reference brackets" href="#id33" id="id32" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>height_amsl</p></td>
<td><p>in {-1000,100000}[m]</p></td>
</tr>
<tr class="row-even"><td><p>height_agl</p></td>
<td><p>in {0,100000}[m]</p></td>
</tr>
<tr class="row-odd"><td><p>pressure</p></td>
<td><p>in {0,1200}[hPa]</p></td>
</tr>
<tr class="row-even"><td><p>temperature</p></td>
<td><p>in {100,100000}[cK]</p></td>
</tr>
<tr class="row-odd"><td><p>theta</p></td>
<td><p>in {100,100000}[cK]</p></td>
</tr>
<tr class="row-even"><td><p>p_vorticity</p></td>
<td><p>in {-10000,50000}[mPVU]</p></td>
</tr>
<tr class="row-odd"><td><p>density_base, density_top</p></td>
<td><p>in {0,10}[kgm-3]</p></td>
</tr>
<tr class="row-even"><td><p>soil</p></td>
<td><p>in {0,5000][cm]</p></td>
</tr>
</tbody>
</table>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id33" role="note">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id31">1</a>,<a role="doc-backlink" href="#id32">2</a>)</span>
<p>mx_lev is set in module fxtr_definition</p>
</aside>
</aside>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when two surfaces are defined, the order of appearance
does not matter; the order of the surface information in the
output will only depend on the type of output and on the
information available in the active dictionary.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_leadtime">
<span class="sig-name descname"><span class="pre">set_leadtime</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;integer,</span> <span class="pre">in</span> <span class="pre">minutes&gt;</span></em><a class="headerlink" href="#Process.set_leadtime" title="Permalink to this definition">#</a></dt>
<dd><p>reset the lead time (expressed in minutes);</p>
<ul class="simple">
<li><p>in the extract iteration (can be combined with set_reference_date,
the latter being first applied): the lead time is reset, the
reference date is unchanged, the validation date is modified (sum
of the lead time and the reference date), and the time range (if any)
is adapted to remain the same with respect to the lead time;</p></li>
<li><p>in the last processing iteration (only one of set_reference_date
and set_leadtime can be set): the validation date and the time
interval (if any) are not changed, the lead time is reset to
the specified value, and the reference date is adapted.</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_time_range">
<span class="sig-name descname"><span class="pre">set_time_range</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;integer,</span> <span class="pre">in</span> <span class="pre">minutes&gt;</span></em><a class="headerlink" href="#Process.set_time_range" title="Permalink to this definition">#</a></dt>
<dd><p>reset time range, value expressed as a string
<code class="docutils literal notranslate"><span class="pre">[x,y]</span></code> with  <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> being real numbers, or <code class="docutils literal notranslate"><span class="pre">x</span></code> being <code class="docutils literal notranslate"><span class="pre">'-infinite'</span></code></p>
<p>The first value defines the start of the interval, the second
value the end of the interval, both with respect to the validation
date. When <code class="docutils literal notranslate"><span class="pre">x</span></code> is set to <code class="docutils literal notranslate"><span class="pre">'-infinite'</span></code>, the start of the interval is
the reference date. Values are expressed as minutes.
Limited to extract iteration, only allowed when the type of
time range is associated with an interval.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_trange_type">
<span class="sig-name descname"><span class="pre">set_trange_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em><a class="headerlink" href="#Process.set_trange_type" title="Permalink to this definition">#</a></dt>
<dd><p>reset the type of time range (type of statistical processing);</p>
<dl class="simple">
<dt>possible values (see code table 4.10 of GRIB2 standard):</dt><dd><p>‘none’, ‘average’, ‘accumulation’, ‘maximum’, ‘minimum’,
‘difference_(end-start)’, ‘root_mean_square’,
‘standard_deviation’, ‘covariance’,
‘difference_(start-end)’, ‘summation’</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_reference_date">
<span class="sig-name descname"><span class="pre">set_reference_date</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;integer,</span> <span class="pre">yyyymmddhhmm&gt;</span></em><a class="headerlink" href="#Process.set_reference_date" title="Permalink to this definition">#</a></dt>
<dd><p>reset the reference date (yyyymmddhhmm);</p>
<ul class="simple">
<li><p>in the extract iteration (can be combined with set_leadtime,
the latter being last applied): the reference date is reset,
the lead time is unchanged, the validation date is modified
(sum of reference date and lead time), and the time interval
(if any) is adapted to remain the same with respect to the
lead time;</p></li>
<li><p>in the last processing iteration (only one of set_reference_date
and set_leadtime can be set): the validation date and the time
interval (if any) are not changed, the reference date is reset
to the specified value, and the lead time is adapted.</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_auxiliary_metainfo">
<span class="sig-name descname"><span class="pre">set_auxiliary_metainfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;sring&gt;[,&lt;string&gt;</span> <span class="pre">...]</span></em><a class="headerlink" href="#Process.set_auxiliary_metainfo" title="Permalink to this definition">#</a></dt>
<dd><p>each <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> expressed as <code class="docutils literal notranslate"><span class="pre">key=value</span></code></p>
<p>reset specified auxiliary meta-information; see <a class="reference internal" href="globSet.html#GlobalSettings.auxiliary_metainfo" title="&amp;GlobalSettings.auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.auxiliary_metainfo</span></code></a>
for more details. When used in the last processing
iteration, override any key=value specified in <a class="reference internal" href="globSet.html#GlobalSettings.auxiliary_metainfo" title="&amp;GlobalSettings.auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.auxiliary_metainfo</span></code></a>
and in <a class="reference internal" href="#Process.out_auxiliary_metainfo" title="&amp;Process.out_auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_auxiliary_metainfo</span></code></a></p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>additional operators which can be used to re-set some meta-information …</p>
<ul>
<li><p>globally for all output defined in the active namelist, at the end of
the last processing iteration:</p>
<p><a class="reference internal" href="globSet.html#GlobalSettings.originating_center" title="&amp;GlobalSettings.originating_center"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.originating_center</span></code></a>, <a class="reference internal" href="globSet.html#GlobalSettings.production_status" title="&amp;GlobalSettings.production_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.production_status</span></code></a>, <a class="reference internal" href="globSet.html#GlobalSettings.genproc_type" title="&amp;GlobalSettings.genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.genproc_type</span></code></a>, <a class="reference internal" href="globSet.html#GlobalSettings.auxiliary_metainfo" title="&amp;GlobalSettings.auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.auxiliary_metainfo</span></code></a></p>
</li>
<li><p>for all fields of a specified output, at the end of the last processing
iteration:</p>
<p><a class="reference internal" href="#Process.out_model_name" title="&amp;Process.out_model_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_model_name</span></code></a>, <a class="reference internal" href="#Process.out_genproc_type" title="&amp;Process.out_genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_genproc_type</span></code></a>, <a class="reference internal" href="#Process.out_product_category" title="&amp;Process.out_product_category"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_product_category</span></code></a>,
<a class="reference internal" href="#Process.out_vertical_coordinate" title="&amp;Process.out_vertical_coordinate"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_vertical_coordinate</span></code></a>, <a class="reference internal" href="#Process.out_auxiliary_metainfo" title="&amp;Process.out_auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_auxiliary_metainfo</span></code></a></p>
</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>these operators differ from <a class="reference internal" href="#Process.default_product_category" title="&amp;Process.default_product_category"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.default_product_category</span></code></a> and
<a class="reference internal" href="globSet.html#GlobalSettings.default_model_name" title="&amp;GlobalSettings.default_model_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalSettings.default_model_name</span></code></a> and <a class="reference internal" href="globSet.html#GlobalSettings.default_product_category" title="&amp;GlobalSettings.default_product_category"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;GlobalSettings.default_product_category</span></code></a></p>
<p>the latter ones are used to supplement missing meta-information whereas the
operators descibed here always re-set the corresponding meta-information.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.merge_with">
<span class="sig-name descname"><span class="pre">merge_with</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag&gt;</span></em><a class="headerlink" href="#Process.merge_with" title="Permalink to this definition">#</a></dt>
<dd><p>define the layer field</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.merge_mask">
<span class="sig-name descname"><span class="pre">merge_mask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.merge_mask" title="Permalink to this definition">#</a></dt>
<dd><p>defines where the layer field is used</p>
<p>Conditionally replace the current field with the incore field defined by
<a class="reference internal" href="#Process.merge_with" title="&amp;Process.merge_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.merge_with</span></code></a>. The operation
takes place where the incore field is defined and the logical condition
specified by <a class="reference internal" href="#Process.merge_mask" title="&amp;Process.merge_mask"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.merge_mask</span></code></a> is true.</p>
<p>The mask is defined as described in <a class="reference internal" href="#section-4-3-7"><span class="std std-ref">Masks</span></a>,
with the following restrictions:</p>
<ul class="simple">
<li><p>tag must be present,</p></li>
<li><p>tag refers to incore fields,</p></li>
<li><p>all incore fields contributing to the condition must be
defined on the same grid (in particular, staggering is <em>not</em>
supported in this case).</p></li>
</ul>
<p>The layer field is either uniquely specified by its tag, the value of
<a class="reference internal" href="#Process.merge_with" title="&amp;Process.merge_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.merge_with</span></code></a>, or by its tag and the characteristics of the current field
(first using the short name and the level, and then also using the EPS
and PDF identity if name and level are not enough to define a unique
field). The current and the layer fields must have the same physical units.
All involved fields must be defined on collocated grids, with a non empty
intersection, but the domains may differ. Outside of the common domain, the
current field remains unchanged.</p>
<p>The attributes of the resulting field (pds,gds) are the attributes of
the current field.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.compare_with">
<span class="sig-name descname"><span class="pre">compare_with</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag</span> <span class="pre">(or</span> <span class="pre">__INCORE__)&gt;</span></em><a class="headerlink" href="#Process.compare_with" title="Permalink to this definition">#</a></dt>
<dd><p>define the field(s) to compare with</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.compare_fct">
<span class="sig-name descname"><span class="pre">compare_fct</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;comparison</span> <span class="pre">operator</span> <span class="pre">to</span> <span class="pre">apply&gt;</span></em><a class="headerlink" href="#Process.compare_fct" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.compare_mask">
<span class="sig-name descname"><span class="pre">compare_mask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.compare_mask" title="Permalink to this definition">#</a></dt>
<dd><p>define where the comparison takes place</p>
<p>Replace the current field with a function of the current field and of the
incore field defined by <a class="reference internal" href="#Process.compare_with" title="&amp;Process.compare_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_with</span></code></a>. The function to apply is defined by <a class="reference internal" href="#Process.compare_fct" title="&amp;Process.compare_fct"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_fct</span></code></a>; when
<a class="reference internal" href="#Process.compare_mask" title="&amp;Process.compare_mask"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_mask</span></code></a> is defined, the original field is only modified where the
corresponding logical condition is true.</p>
<p>The mask is defined as described in <a class="reference internal" href="#section-4-3-7"><span class="std std-ref">Masks</span></a>,
with the following restrictions:</p>
<ul class="simple">
<li><p>tag must be present,</p></li>
<li><p>tag refers to incore fields,</p></li>
<li><p>all incore fields contributing to the condition must be
defined onm the same grid (in particular, staggering is <em>not</em>
supported in this case).</p></li>
</ul>
<p>The incore field is either uniquely specified by its tag, the value of
<a class="reference internal" href="#Process.compare_with" title="&amp;Process.compare_with"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_with</span></code></a>, or by its tag and the characteristics of the current field
(first using the short name and the level, and then also using the EPS
and PDF identity if name and level are not enough to define a unique
field). Both current and incore fields must have the same physical units.
All involved fields must be defined on collocated grids, with a non empty
intersection, but the domains may differ. Outside of the common domain, the
resulting field is set to undefined.</p>
<p>Instead of explicitely specifying the field to compare with, the expression
<code class="docutils literal notranslate"><span class="pre">compare_with='__INCORE__'</span></code> may be used to automatically look for matching
fields in incore storage; criteria for matching field is based on short
name, level, EPS identity, and PDF identity as explained above.</p>
<p>The attributes of the resulting field (pds,gds) will be the attributes of
the current field.</p>
<p>The values of the resulting field is computed according to <a class="reference internal" href="#Process.compare_fct" title="&amp;Process.compare_fct"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_fct</span></code></a>:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ratio;</span> <span class="pre">a1,a2,a3,b1,b2,b3&quot;</span></code> <a class="footnote-reference brackets" href="#id40" id="id34" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> <a class="footnote-reference brackets" href="#id41" id="id35" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">a1</span><span class="o">*</span><span class="n">field1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">*</span><span class="n">field2</span> <span class="o">+</span> <span class="n">a3</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">b1</span><span class="o">*</span><span class="n">field1</span> <span class="o">+</span> <span class="n">b2</span><span class="o">*</span><span class="n">field2</span> <span class="o">+</span> <span class="n">b3</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ratio_abs;</span> <span class="pre">a1,a2,a3,b1,b2,b3&quot;</span></code> <a class="footnote-reference brackets" href="#id40" id="id36" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> <a class="footnote-reference brackets" href="#id41" id="id37" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">a1</span><span class="o">*</span><span class="n">field1</span> <span class="o">+</span> <span class="n">a2</span><span class="o">*</span><span class="n">field2</span> <span class="o">+</span> <span class="n">a3</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">b1</span><span class="o">*|</span><span class="n">field1</span><span class="o">|</span> <span class="o">+</span> <span class="n">b2</span><span class="o">*|</span><span class="n">field2</span><span class="o">|</span> <span class="o">+</span> <span class="n">b3</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;min&quot;</span></code> <a class="footnote-reference brackets" href="#id41" id="id38" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">MIN</span><span class="p">(</span><span class="n">field1</span><span class="p">,</span> <span class="n">field2</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;max&quot;</span></code> <a class="footnote-reference brackets" href="#id41" id="id39" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">MAX</span><span class="p">(</span><span class="n">field1</span><span class="p">,</span> <span class="n">field2</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">field1</span></code></dt><dd><p>extracted field</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">field2</span></code></dt><dd><p>INCORE field</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ai</span></code>, <code class="docutils literal notranslate"><span class="pre">bi</span></code></dt><dd><p>real numbers</p>
</dd>
</dl>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id40" role="note">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id34">1</a>,<a role="doc-backlink" href="#id36">2</a>)</span>
<p>Result is 0 if one of the following conditions applies</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numerator</span> <span class="pre">&lt;=</span> <span class="pre">(mc_eps</span> <span class="pre">*</span> <span class="pre">denominator)</span></code></p></li>
</ul>
<p>(in particular the result is 0 when a3==0 and the two fields are 0)</p>
</aside>
<aside class="footnote brackets" id="id41" role="note">
<span class="label"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id35">1</a>,<a role="doc-backlink" href="#id37">2</a>,<a role="doc-backlink" href="#id38">3</a>,<a role="doc-backlink" href="#id39">4</a>)</span>
<p>Result is undefined if one of the following conditions applies</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">&lt;</span> <span class="pre">(mc_eps</span> <span class="pre">*</span> <span class="pre">numerator)</span></code>, when relevant</p></li>
<li><p>at least one of <code class="docutils literal notranslate"><span class="pre">field1</span></code> or <code class="docutils literal notranslate"><span class="pre">field2</span></code> is undefined</p></li>
<li><p>mask is undefined or <code class="docutils literal notranslate"><span class="pre">.false.</span></code></p></li>
</ul>
<p>(in particular the result is undefined outside of the common domain of the considered fields)</p>
</aside>
</aside>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the ratio/ratio_abs operators change the field identity, and <a class="reference internal" href="#Process.new_field_id" title="&amp;Process.new_field_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.new_field_id</span></code></a> must be set.</p>
</div>
</dd></dl>

<section id="horizontal-operators">
<h3>Horizontal Operators<a class="headerlink" href="#horizontal-operators" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.hoper">
<span class="sig-name descname"><span class="pre">hoper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;horizontal</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.hoper" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.hoper_mask">
<span class="sig-name descname"><span class="pre">hoper_mask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span></em><a class="headerlink" href="#Process.hoper_mask" title="Permalink to this definition">#</a></dt>
<dd><p>e.g. <code class="docutils literal notranslate"><span class="pre">hoper_mask='&gt;0.</span> <span class="pre">&amp;&amp;</span> <span class="pre">FR_LAND&gt;0.5'</span></code></p>
</dd></dl>

<p>The following horizontal operators are implemented</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>operator</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘id’</p></td>
<td><p>identity (default)</p></td>
</tr>
<tr class="row-odd"><td><p>‘offset_to_reference,loc’</p></td>
<td><p>compute the offset of a field, at each active grid point,
with respect to the value of the field at the specified
location ‘loc’. ‘loc’ is either the location id or a location
alias of the form <code class="docutils literal notranslate"><span class="pre">&lt;group&gt;:&lt;name&gt;</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>‘fill_undef,r,v’</p></td>
<td><p>replace undefined values with a value derived from
neighbourhood; when distinct from 1., the value of
v limits the action of the operator to locations
where enough defined values are present in the
neighbourhood (see below for more details).</p></td>
</tr>
<tr class="row-odd"><td><p>‘destagger’</p></td>
<td><p>interpolate staggered field to mass points
(see <a class="reference internal" href="#section-4-3-2"><span class="std std-ref">Output files</span></a> for a discussion of the usage
of this operator)</p></td>
</tr>
<tr class="row-even"><td><p>‘stagger,dir,v’</p></td>
<td><p>generate field on staggered grid, the staggering being
specified by the value of dir (“i” or “j”) and by the
shift v to apply (one of -0.5 or 0.5).</p></td>
</tr>
<tr class="row-odd"><td><p>‘s9’</p></td>
<td><p>9 points averaging, square mask</p></td>
</tr>
<tr class="row-even"><td><p>‘c5’</p></td>
<td><p>5 points averaging, cross mask</p></td>
</tr>
<tr class="row-odd"><td><p>‘c13’</p></td>
<td><p>13 points averaging, cross mask</p></td>
</tr>
<tr class="row-even"><td><p>‘c41’</p></td>
<td><p>41 points averaging, cross mask</p></td>
</tr>
<tr class="row-odd"><td><p>‘diskavg,r’</p></td>
<td><p>averaging on a disk of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-even"><td><p>‘diskmin,r’</p></td>
<td><p>minimum value on a disk of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-odd"><td><p>‘diskmax,r’</p></td>
<td><p>maximum value on a disk of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-even"><td><p>‘diskcnt%,r’</p></td>
<td><p>frequency of active points in a disk of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-odd"><td><p>‘sqavg,r’</p></td>
<td><p>averaging on a square of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-even"><td><p>‘sqmin,r’</p></td>
<td><p>minimum value on a square of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-odd"><td><p>‘sqmax,r’</p></td>
<td><p>maximum value on a square of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-even"><td><p>‘sqcnt%,r’</p></td>
<td><p>frequency of active points in a square of radius r (in mesh size unit)</p></td>
</tr>
<tr class="row-odd"><td><p>‘shifted_sqavg,R’</p></td>
<td><p>same as sqavg, but mask shifted in upper quadrant, 2*R must be integer</p></td>
</tr>
<tr class="row-even"><td><p>‘shifted_sqmin,R’</p></td>
<td><p>same as sqmin, but mask shifted in upper quadrant, 2*R must be integer</p></td>
</tr>
<tr class="row-odd"><td><p>‘shifted_sqmax,R’</p></td>
<td><p>same as sqmax, but mask shifted in upper quadrant, 2*R must be integer</p></td>
</tr>
<tr class="row-even"><td><p>‘shifted_sqcnt%,R’</p></td>
<td><p>same as sqcnt%, but mask shifted in upper quadrant, 2*R must be integer</p></td>
</tr>
<tr class="row-odd"><td><p>‘tiled_sqavg,r’</p></td>
<td><p>same as sqavg, but only computed on a grid subset (‘upscaling’)</p></td>
</tr>
<tr class="row-even"><td><p>‘tiled_sqmin,r’</p></td>
<td><p>same as sqmin, but only computed on a grid subset (‘upscaling’)</p></td>
</tr>
<tr class="row-odd"><td><p>‘tiled_sqmax,r’</p></td>
<td><p>same as sqmax, but only computed on a grid subset (‘upscaling’)</p></td>
</tr>
<tr class="row-even"><td><p>‘tiled_sqcnt%,r’</p></td>
<td><p>same as sqcnt%, but only computed on a grid subset (‘upscaling’)</p></td>
</tr>
<tr class="row-odd"><td><p>‘regcnt,s’</p></td>
<td><p>count active points in regions of set s</p></td>
</tr>
<tr class="row-even"><td><p>‘regcnt%,s’</p></td>
<td><p>frequence of active points in regions of set s</p></td>
</tr>
<tr class="row-odd"><td><p>‘regsum,s’</p></td>
<td><p>region sum, value, using region set s</p></td>
</tr>
<tr class="row-even"><td><p>‘regavg,s’</p></td>
<td><p>region average, using region set s</p></td>
</tr>
<tr class="row-odd"><td><p>‘regmin,s’</p></td>
<td><p>region minimum, using region set s</p></td>
</tr>
<tr class="row-even"><td><p>‘regmax,s’</p></td>
<td><p>region maximum, using region set s</p></td>
</tr>
<tr class="row-odd"><td><p>‘regqtl,s,p’</p></td>
<td><p>region p-quantile, using region set s</p></td>
</tr>
<tr class="row-even"><td><p>‘regfit,s,func,ai,tag’</p></td>
<td><p>compute a fit of (f,tag) in each region of set s,
using the class of functions defined by func, and
returning the coefficient ai of the fit. Currenly
implemented are:</p>
<ul>
<li><p>linear regression:  <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">=</span> <span class="pre">a1</span> <span class="pre">+</span> <span class="pre">a2</span> <span class="pre">*</span> <span class="pre">tag</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">func</span> <span class="pre">=</span> <span class="pre">'linreg'</span></code> , ai in {‘a1’, ‘a2’}</p>
</li>
</ul>
<p>When the fit is not possible (less than 2 active
points, tag values are all identical), undefined
is returned.
Example: <code class="docutils literal notranslate"><span class="pre">hoper=&quot;regfit,reg_m27,linreg,a2,tp24h_mean&quot;</span></code></p>
</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Index</strong></p>
<dl class="simple">
<dt>s    :</dt><dd><p>region tag, string</p>
</dd>
<dt>loc  :</dt><dd><p>location tag</p>
</dd>
<dt>f    :</dt><dd><p>the field being transformed</p>
</dd>
<dt>tag  :</dt><dd><p>field tag refering to another field available in the current
iteration (either single 2d field, or field matching the
properties of the currently processed field)</p>
</dd>
<dt>r    :</dt><dd><p>radius, integer compatible with format I8</p>
</dd>
<dt>R    :</dt><dd><p>radius, real</p>
</dd>
<dt>d    :</dt><dd><p>diameter, integer compatible with format I8</p>
</dd>
<dt>v    :</dt><dd><p>fractional value in [0.,1.]</p>
</dd>
<dt>p    :</dt><dd><p>quantile, real in [0.,100.] compatible with format F14.0</p>
</dd>
<dt>dir  :</dt><dd><p>coordinates direction, “i” or “j”</p>
</dd>
<dt>func :</dt><dd><p>class of function</p>
</dd>
<dt>ai   :</dt><dd><p>function coefficient</p>
</dd>
</dl>
<p>Undefined values are always ignored when computing a new value. In addition,
the set of points contributing to the new value can be controlled by setting
a logical condition with ‘hoper_mask’ (see <a class="reference internal" href="#section-4-3-7"><span class="std std-ref">Masks</span></a> for the excat syntax);
in this case, only the points where the condition is true contribute to the new
value. Masking is supported by all operators except ‘stagger’, ‘destagger’ and
‘offset_to_reference’.</p>
<p>The set of points where the original field is modified depends on the operator:</p>
<dl class="simple">
<dt>‘fill_undef’</dt><dd><p>only where the original field is undefined;</p>
</dd>
<dt>‘reg*’</dt><dd><p>at all points belonging to a region of set s;</p>
</dd>
<dt>‘tiled_*’</dt><dd><p>all points of the grid subset, where the original field is defined;</p>
</dd>
<dt>other</dt><dd><p>all points where the original field is defined.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">*cnt%</span></code> operators:</p>
<p>active points are grid points belonging to the chosen mask (square or
disk of radius r, region) which are both defined and where hoper_mask,
when present, is true; the frequency of active grid points is the ratio
of the number of active grid points with the number of mask points
where the original field is defined (and not the mask size!).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">fill_undef</span></code> operator:</p>
<p>the new value is computed by averaging within a disk of radius r all
values which are both defined and where hoper_mask is true; a weighted
average is computed, using an exponentially decreasing weight with a
scale of 1 (in grid units), this guarantees that only the nearest
defined neighbours influence the result. In addition, it is possible
to limit the action of this operator to locations where the field
is almost defined everywhere by setting a value of v &lt; 1.0 (to avoid
artifacts in regions where the field is noisy).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">stagger</span></code> operator:</p>
<ul class="simple">
<li><p>Parent field must be defined everywhere</p></li>
<li><p>Staggering is computed by averaging the two nearest neighbours, when
available, or by cloning the boundary value</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">destagger</span></code> operator:</p>
<p>The same effect can be applied by using <a class="reference internal" href="#Process.in_regrid_method" title="&amp;Process.in_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.in_regrid_method</span></code></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">tiled_*</span></code> operators:</p>
<ul class="simple">
<li><p>These operators implement a field upscaling.</p></li>
<li><p>These operators must be applied in relation with the definition of a
sparse rectangular subset (imin, imax, iinc…). The increment of the
sparse subset, iinc and jinc, must be equal to twice the operator radius
plus one (e.g. iinc=jinc=5 for “tiled_sqavg,2”). Both imin and jmin must
be larger than the operator radius (e.g. imin, jmin &gt; 2).</p></li>
<li><p>No operation should be defined which postpone the lateral reduction of
the field after the iteration where the tiled operator is used; this
concerns the usage of any <a class="reference internal" href="#Process.hoper" title="&amp;Process.hoper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.hoper</span></code></a> and the usage of any named operator
requiring a lateral halo (as defined in the active dictionary). The
reason of these condition is that the undefined values created by the
tiled operator makes the usage of any lateral halo meaningless and
obscure.</p></li>
<li><p>The grid subset where the <code class="docutils literal notranslate"><span class="pre">'tiled_*'</span></code> operator is computed starts at
(imin,jmin) and is composed of all points of the sparse rectangular
subset (so that that each grid point contributes exactly once to the
resulting field); all points outside of the grid subset are set to
undefined.</p></li>
<li><p>The resulting field can then either be interpolated on a coarser grid,
the grid where the field is defined, or each undefined value can be set
to the nearest computed value. Both transformations can be implemented
with the out_regrid_target / out_regrid_method operator, as explained
here:</p>
<ol class="arabic simple">
<li><p>coarser grid:</p>
<ul>
<li><p>out_regrid_target defines the coarser grid, the resolution being
<code class="docutils literal notranslate"><span class="pre">(2*r+1)</span></code> the original resolution, and the start point being the
original start point shifted by r times the original resolution;</p></li>
<li><p>out_regrid_method is set to <code class="docutils literal notranslate"><span class="pre">&quot;next_neighbour,square,0.5&quot;</span></code>.</p></li>
</ul>
</li>
<li><p>original grid, with undef replaced by nearest value:</p>
<ul>
<li><p>out_regrid_target is the same as the original grid;</p></li>
<li><p>out_regrid_method is set to <code class="docutils literal notranslate"><span class="pre">&quot;average,square,R&quot;</span></code> with
<code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">(r+0.1)</span></code> .</p></li>
</ul>
</li>
</ol>
</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">shifted_*</span></code> operators:</p>
<ul>
<li><p>The set of points contributing to the value of the new field at (i,j) is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">di</span><span class="p">,</span><span class="n">j</span><span class="o">+</span><span class="n">dj</span><span class="p">)</span>  <span class="n">di</span> <span class="ow">in</span> <span class="p">{</span><span class="mf">0.</span><span class="o">..</span> <span class="mi">2</span><span class="o">*</span><span class="n">R</span><span class="p">},</span> <span class="n">dj</span> <span class="ow">in</span> <span class="p">{</span><span class="mf">0.</span><span class="o">..</span> <span class="mi">2</span><span class="o">*</span><span class="n">R</span><span class="p">}</span>
</pre></div>
</div>
<p>One should note that the geographical direction of increasing i (or j)
depends on the scanning mode used to code the fields records.</p>
</li>
<li><p>This class of operators can be used to upscale a field from a fine grid
(resolution delta) to a coarse grid (resolution N*delta), by applying
the operator with a radius of (N-1)/2, thinning the data set by setting</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">imin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">imax</span><span class="o">=...</span><span class="p">,</span> <span class="n">iinc</span><span class="o">=</span><span class="n">N</span><span class="p">,</span> <span class="n">jmin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">jmax</span><span class="o">=...</span><span class="p">,</span> <span class="n">jinc</span><span class="o">=</span><span class="n">N</span>
</pre></div>
</div>
<p>and interpolating the resulting fields on the coarser grid, using
next_neighbour interpolation.</p>
</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notes about <code class="docutils literal notranslate"><span class="pre">regavg</span></code> / <code class="docutils literal notranslate"><span class="pre">regmin</span></code> / <code class="docutils literal notranslate"><span class="pre">regmax</span></code> / <code class="docutils literal notranslate"><span class="pre">regcnt</span></code>/ <code class="docutils literal notranslate"><span class="pre">regcnt%</span></code> / <code class="docutils literal notranslate"><span class="pre">regqtl</span></code> / <code class="docutils literal notranslate"><span class="pre">regfit</span></code> operators:</p>
<ul class="simple">
<li><p>The file defining user defined regions is specified by <a class="reference internal" href="globRes.html#GlobalResource.region_list" title="&amp;GlobalResource.region_list"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;GlobalResource.region_list</span></code></a>.
This file may contain multiple sets of regions, and the argument ‘s’
defines which set is used in the computation.</p></li>
<li><p>All points of the same region have the same value after the transformation,
namely the value computed by the region operator. Moreover, values at points
associated with more than one region or not associated with any region are
set to undefined.</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notes about <code class="docutils literal notranslate"><span class="pre">regcnt</span></code> / <code class="docutils literal notranslate"><span class="pre">regcnt%</span></code> / <code class="docutils literal notranslate"><span class="pre">regfit</span></code> / <code class="docutils literal notranslate"><span class="pre">tiled_sqcnt%</span></code> / <code class="docutils literal notranslate"><span class="pre">sqcnt%</span></code> / <code class="docutils literal notranslate"><span class="pre">diskcnt%</span></code> operators:
* These operators change the field identity, and new_field_id must be set.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">regcnt</span></code> / <code class="docutils literal notranslate"><span class="pre">regcnt%</span></code> operator:</p>
<ul class="simple">
<li><p>the number of active points is the number of points within the region
where the field is defined and the condition hoper_mask is true.</p></li>
<li><p>the value of <code class="docutils literal notranslate"><span class="pre">regcnt%</span></code> is computed by dividing the number of active points
by the total number of points in the region.</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about <code class="docutils literal notranslate"><span class="pre">regqtl</span></code> operator:</p>
<ul class="simple">
<li><p>the p-quantile of a region is computed on the basis of the data set of
all points of the region (possibly after filtering with hoper_mask), and
by supposing equiprobable values.</p></li>
<li><p>the quantile is computed in the same way as for EPS products, namely
by linear interpolation between two anchor values.</p></li>
<li><p>the p-quantile is set to undef when the number of active points of the
region is smaller than 2.</p></li>
</ul>
</div>
</section>
<section id="linear-transformation">
<h3>Linear Transformation<a class="headerlink" href="#linear-transformation" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.scale">
<span class="sig-name descname"><span class="pre">scale</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;field</span> <span class="pre">scaling&gt;</span></em><a class="headerlink" href="#Process.scale" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.offset">
<span class="sig-name descname"><span class="pre">offset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;field</span> <span class="pre">offset&gt;</span></em><a class="headerlink" href="#Process.offset" title="Permalink to this definition">#</a></dt>
<dd><p>Linear transformation of the field according to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">field</span> <span class="o">--&gt;</span> <span class="p">(</span><span class="n">field</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">offset</span></code> and <code class="docutils literal notranslate"><span class="pre">scale</span></code> are real numbers</p>
</dd></dl>

</section>
<section id="vertical-operators">
<h3>Vertical Operators<a class="headerlink" href="#vertical-operators" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.voper">
<span class="sig-name descname"><span class="pre">voper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;vertical</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.voper" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.voper_lev">
<span class="sig-name descname"><span class="pre">voper_lev</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;level&gt;,&lt;level&gt;,...</span></em><a class="headerlink" href="#Process.voper_lev" title="Permalink to this definition">#</a></dt>
<dd><p>target levels for <a class="reference internal" href="#Process.voper" title="&amp;Process.voper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper</span></code></a>, integer array</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.voper_lev_units">
<span class="sig-name descname"><span class="pre">voper_lev_units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;units&gt;</span></em><a class="headerlink" href="#Process.voper_lev_units" title="Permalink to this definition">#</a></dt>
<dd><p>associated physical units, optional
&gt;
see <a class="reference internal" href="#Process.level_units" title="&amp;Process.level_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.level_units</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.voper_use_tag">
<span class="sig-name descname"><span class="pre">voper_use_tag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag1,</span> <span class="pre">tag2,</span> <span class="pre">...&gt;</span></em><a class="headerlink" href="#Process.voper_use_tag" title="Permalink to this definition">#</a></dt>
<dd><p>optional string; tag of auxiliary fields</p>
</dd></dl>

<p>The following vertical operators are implemented:</p>
<ol class="upperalpha">
<li><p>Identity (default)</p>
<p><code class="docutils literal notranslate"><span class="pre">'id'</span></code></p>
</li>
<li><p>Compute the height or the pressure of a surface defined by a condition on some
auxiliary fields (e.g. height of lowest 0C isotherm, height of maximum CAT in
a specified layer)</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'find_condition,cond,tag2,mode'</span></code>     or   <code class="docutils literal notranslate"><span class="pre">'find_condition,cond,tag2,tag3,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'find_maximum,tag1,tag2,mode'</span></code>       or   <code class="docutils literal notranslate"><span class="pre">'find_maximum,tag1,tag2,tag3,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'find_minimum,tag1,tag2,mode'</span></code>       or   <code class="docutils literal notranslate"><span class="pre">'find_minimum,tag1,tag2,tag3,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'find_nonzero,tag1,tag2,mode'</span></code>       or   <code class="docutils literal notranslate"><span class="pre">'find_nonzero,tag1,tag2,tag3,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'find_value,tag1=value,tag2,mode'</span></code>   or   <code class="docutils literal notranslate"><span class="pre">'find_value,tag1=value,tag2,tag3,mode'</span></code></div>
</div>
<p>where the condition is specified by</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cond</span></code></dt><dd><p>logical condition on a set of auxiliary fields
(see <a class="reference internal" href="#section-4-3-7"><span class="std std-ref">Masks</span></a>); all refered fields must be available
in the current iteration, and, if associated with
a multi-level field, defined on all levels where
the parent field is defined</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag1</span></code></dt><dd><p>field on which the condition is tested; refers to
any multi_levels field available in the current
iteration; this field must be defined on all levels
where the parent field is defined</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p>real value, refers to the field tag1
where the vertical interval to consider when looking for the
specified condition is defined by</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag2</span></code></dt><dd><p>refers to any unique 2d field available in
the current iteration, expressed in the same
units as the parent field, and specifies the
start of the interval</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag3</span></code></dt><dd><p>refers to any unique 2d field available in
the current iteration, expressed in the same
units as the parent field, and specifies the
end of the interval. When missing, the interval
extends form tag2 to the top of atmosphere
(if <code class="docutils literal notranslate"><span class="pre">mode='up'</span></code>) or to the bottom of atmosphere
(if <code class="docutils literal notranslate"><span class="pre">mode='down'</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code></dt><dd><p>is one of “up” or “down”, and specifies how
the interval is scanned when looking for the
condition (“up” and “down” refers to geometric
direction).</p>
</dd>
</dl>
<p>This operator is applied either on the pressure field (P) or on the
height field (HEIGHT); the computed surface will be defined in
pressure coordinates in the former case, in height coordinates in
the latter case. The parent field and the auxiliary fields must be
defined on model levels.</p>
<p>The target surface is defined by finding the first level where the
condition is satisfied, independently in each column, scanning the
specified interval in the direction specified by the value of ‘mode’.</p>
<p>The condition is:</p>
<dl class="simple">
<dt>(find_condition)</dt><dd><p>the condition ‘cond’ is true</p>
</dd>
<dt>(find_maximum)</dt><dd><p>tag1 reaches its maximum in the interval</p>
</dd>
<dt>(find_minimum)</dt><dd><p>tag1 reaches its minimum in the interval</p>
</dd>
<dt>(find_nonzero)</dt><dd><p>tag1 value differs from zero</p>
</dd>
<dt>(find_value)</dt><dd><p>tag1=value, where a linear interpolation of the pressure or the height
field with respect to tag1 is performed to find the exact location where the condition is fullfilled</p>
</dd>
</dl>
<p>It may happen that the field associated with tag1 is degenerate in
some section (same value on multiple adjacent levels). The target
surface is never defined within such a section, but is defined at
the transition between the degenerate and the non degenerate part
of the profile.</p>
<p>The level meta-information of the resulting field is set to
undefined; this means in particular that it is not possible
to create a GRIB record for this field.</p>
</li>
<li><p>Vertical interpolation of atmospheric fields from full to half levels,
or from half to full levels (only for indexed model levels, i.e.
either hybrid or generalized height based vertical coordinates)</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'intpl_k2kfull,mode'</span></code></dt><dd><p>from half to full levels</p>
<ul class="simple">
<li><p>mode=average: use arithmetic mean of adjacent
levels values
(# target levels = # parent levels - 1)</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'intpl_k2khalf,mode'</span></code></dt><dd><p>from full to half levels</p>
<ul class="simple">
<li><p>mode=average: use arithmetic mean of adjacent
levels values
(# target levels = # parent levels - 1)</p></li>
<li><p>mode=deaverage_bottom_0: bottom level value
(in a geometrical sense) is set to 0, other
levels values are choosen such that the mean
of the two levels i and i+1 is the value of
the parent level i.
(# target levels = # parent levels + 1)</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>this operator can be used in particular to compute the HEIGHT
field on model half levels when the height field is only available
on model full levels (HFL –&gt; HHL), and vice versa (HHL –&gt; HFL).</p>
</div>
</li>
<li><p>Vertical interpolation of atmospheric fields from model levels to specified
height levels.</p>
<dl>
<dt>Target levels are either specified by <a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a>…</dt><dd><dl>
<dt>from model level to height above ground</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2h,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2h+,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2h++,mode;extpl_mode,...'</span></code></div>
</div>
</dd>
<dt>from model level to height above sea level</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2z,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2z+,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2z++,mode;extpl_mode,...'</span></code></div>
</div>
</dd>
</dl>
</dd>
<dt>... or through a ‘tag’ refering to a height field (which can be either a single-level or a multi-levels field)</dt><dd><dl>
<dt>from model level to height above ground</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2h,tag,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2h+,tag,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2h++,tag,mode;extpl_mode,...'</span></code></div>
</div>
</dd>
<dt>from model level to height above sea level</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2z,tag,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2z+,tag,mode'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'intpl_k2z++,tag,mode;extpl_mode,...'</span></code></div>
</div>
</dd>
</dl>
</dd>
</dl>
<p>Four interpolation modes are supported:</p>
<ul class="simple">
<li><p>linear in height (mode: <code class="docutils literal notranslate"><span class="pre">'lin_h'</span></code> or <code class="docutils literal notranslate"><span class="pre">'h'</span></code>);</p></li>
<li><p>linear in pressure (mode: <code class="docutils literal notranslate"><span class="pre">'lin_p'</span></code> or <code class="docutils literal notranslate"><span class="pre">'p'</span></code>);</p></li>
<li><p>linear in log pressure (mode: <code class="docutils literal notranslate"><span class="pre">'lin_lnp'</span></code> or <code class="docutils literal notranslate"><span class="pre">'lnp'</span></code>);</p></li>
<li><p>take value on nearest model surface, independently in each
column (mode: <code class="docutils literal notranslate"><span class="pre">'nearest'</span></code>).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">'intpl_k2h+'</span></code> and <code class="docutils literal notranslate"><span class="pre">'intpl_k2z+'</span></code> extend the operator with the
possibility to interpolate between the lowest model level and
a corresponding near surface field, linearly in height
(association between multi levels field and near surface field
is based on declarations in the active dictionary).</p>
<p><code class="docutils literal notranslate"><span class="pre">'intpl_k2h++'</span></code> and <code class="docutils literal notranslate"><span class="pre">'intpl_k2z++'</span></code> extend the operator with the
possibility to extrapolate the field profile vertically; the
supported algorithms are:</p>
<ol class="loweralpha">
<li><p>extrapolationn below a specified height, keeping
a prescribed field value constant:</p>
<div class="line-block">
<div class="line">z &gt; start_sfc: f(z) = interpolated value</div>
<div class="line">z =&lt; start_sfc: f(z) = start_val</div>
</div>
<p>the syntax of the operator is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">voper</span><span class="o">=</span><span class="s1">&#39;intpl...; extpl_down,constant,start_sfc,start_val&#39;</span>
</pre></div>
</div>
</li>
<li><p>extrapolationn below a specified height, using a
prescribed start value and a prescribed gradient</p>
<div class="line-block">
<div class="line">z &gt; start_sfc:   f(z) = interpolated value</div>
<div class="line">z =&lt; start_sfc:  f(z) = start_val + grad * (z - start_sfc)</div>
</div>
<p>the syntax of the operator is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">voper</span><span class="o">=</span><span class="s1">&#39;intpl...; extpl_down,linear,start_sfc,start_val,grad&#39;</span>
</pre></div>
</div>
</li>
<li><p>(pressure only) extrapolation below a specified height,
using a prescribed start value and the hydrostatic equation,
for a temperature profile with a constant lapse rate</p>
<div class="line-block">
<div class="line">for t(z) = t_start + grad * (z - start_sfc)</div>
<div class="line">z &gt; start_sfc:   f(z) = interpolated value</div>
<div class="line">z =&lt; start_sfc:</div>
<div class="line-block">
<div class="line">grad /= 0: f(z) = p_start * {t(z)/t_start}**(-g/R*grad)</div>
<div class="line">grad = 0 : f(z) = p_start * EXP{(-g/R*t_start)*(z-start_sfc)}</div>
</div>
</div>
<p>the syntax of the operator is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">voper</span><span class="o">=</span><span class="s1">&#39;intpl...; extpl_down,hydstat,start_sfc,p_start,t_start,grad&#39;</span>
</pre></div>
</div>
<p>or, for a lapse rate which is 0 everywhere:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">voper</span><span class="o">=</span><span class="s1">&#39;intpl...; extpl_down,hydstat,start_sfc,p_start,t_start&#39;</span>
</pre></div>
</div>
<p>The following notation is used:</p>
<dl class="simple">
<dt>g,R      :</dt><dd><p>physical constants</p>
</dd>
<dt>z        :</dt><dd><p>target height, in meter above mean sea level</p>
</dd>
<dt>start_sfc:</dt><dd><p>field tag refering to a single height surface, expressed in meter above mean sea level</p>
</dd>
<dt>p_start, start_val:</dt><dd><p>field tag refering to the start value of the field to extrapolate</p>
</dd>
<dt>t_start  :</dt><dd><p>field tag refering to the temperature field on start_sfc</p>
</dd>
<dt>grad     :</dt><dd><p>field tags refering to field vertical gradient</p>
</dd>
</dl>
<p>All mentioned tags must refer to fields present in the current
iteration.</p>
<p>Height field must be available on all levels where the field
to interpolate is defined (when a tag is used to define the
target levels, the height field must be distinct from the field
refered to by this tag).</p>
<p>When mode=’lin_p’ or mode=’lin_lnp’, the pressure field must be
available on all levels where the field to interpolate is defined.</p>
<p>The auxiliary field HSURF is required when some of the target
levels are expressed in meter above ground (when a tag is used
to define the target level, HSURF must be distinct from the field
refered to by this tag).
Note that HSURF can be <em>any</em> topography, not necessarily the
model topo (use voper_use_tag to specify which HSURF to use
when multiple choices are present).</p>
<p>When one of the operator <code class="docutils literal notranslate"><span class="pre">'intpl_k2h+'</span></code> or <code class="docutils literal notranslate"><span class="pre">'intpl_k2z+'</span></code> is used,
the associated near surface field must be available (e.g. T_2M
when interpolating T).</p>
<p>When one of the operator <code class="docutils literal notranslate"><span class="pre">'intpl_k2h++'</span></code> or <code class="docutils literal notranslate"><span class="pre">'intpl_k2z++'</span></code> is used,
all auxiliary fields used for the extrapolation mode must be
available.</p>
<p>When <a class="reference internal" href="#Process.voper_lev_units" title="&amp;Process.voper_lev_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev_units</span></code></a> is missing, it is assumed that target
level(s) are expressed in [m].</p>
</li>
</ol>
</li>
<li><p>Vertical interpolation of atmospheric fields from model levels to
specified pressure levels.</p>
<p><code class="docutils literal notranslate"><span class="pre">'intpl_k2p,mode'</span></code></p>
<p>Three interpolation modes are supported:</p>
<ul class="simple">
<li><p>linear in pressure (mode: <code class="docutils literal notranslate"><span class="pre">'p'</span></code> or <code class="docutils literal notranslate"><span class="pre">'lin_p'</span></code>);</p></li>
<li><p>linear in log pressure (mode: <code class="docutils literal notranslate"><span class="pre">'lnp'</span></code> or <code class="docutils literal notranslate"><span class="pre">'lin_lnp'</span></code>);</p></li>
<li><p>take value on nearest model surface, independently in each
column (mode: <code class="docutils literal notranslate"><span class="pre">'nearest'</span></code>).</p></li>
</ul>
<p>Pressure field must be available on all levels where the field
to interpolate is defined.</p>
<p>When <a class="reference internal" href="#Process.voper_lev_units" title="&amp;Process.voper_lev_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev_units</span></code></a> is missing, it is assumed that target
level(s) are expressed in [hPa].</p>
</li>
<li><p>Vertical interpolation of atmospheric fields from model levels to
specified theta (potential temperature) levels.</p>
<p><code class="docutils literal notranslate"><span class="pre">'intpl_k2theta,mode'</span></code></p>
<p>Interpolation is linear in theta. In case of folding of the target
coordinates (multiple levels for the same theta), the value of mode
defines the behaviour of the program:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'undef_fold'</span></code>:</dt><dd><p>the result is undefined,</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'low_fold'</span></code>  :</dt><dd><p>interpolation on (geometrical) lowest theta surface,</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'high_fold'</span></code> :</dt><dd><p>interpolation on (geometrical) highest theta surface</p>
</dd>
</dl>
<p>Potential temperature field must be available on all levels where
the field to interpolate is defined.</p>
<p>When <a class="reference internal" href="#Process.voper_lev_units" title="&amp;Process.voper_lev_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev_units</span></code></a> is missing, it is assumed that target
level(s) are expressed in [cK].</p>
</li>
<li><p>Vertical interpolation of atmospheric fields from model levels to
specified PV (potential vorticity) levels.
<code class="docutils literal notranslate"><span class="pre">'intpl_k2pv,mode'</span></code></p>
<p>Interpolation is linear in pv.  In case of folding of the target
coordinates (multiple levels for the same pv), the value of mode
defines the behaviour of the program:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'undef_fold'</span></code>:</dt><dd><p>the result is undefined,</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'low_fold'</span></code>  :</dt><dd><p>interpolation on (geometrical) lowest pv surface,</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'high_fold'</span></code> :</dt><dd><p>interpolation on (geometrical) highest pv surface</p>
</dd>
</dl>
<p>Potential vorticity field must be available on all levels where
the field to interpolate is defined.</p>
<p>When <a class="reference internal" href="#Process.voper_lev_units" title="&amp;Process.voper_lev_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev_units</span></code></a> is missing, it is assumed that target
level(s) are expressed in [mPVU].</p>
</li>
<li><p>Integral of soil fields in the layers defined by <a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a>; the field to
integrate must be an integral quantity (e.g. soil water content):</p>
<p><code class="docutils literal notranslate"><span class="pre">'integ_soil'</span></code></p>
<p>source layers must be contiguous, boundaries of source and target
layers are expessed as depth below surface.</p>
<p>When <a class="reference internal" href="#Process.voper_lev_units" title="&amp;Process.voper_lev_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev_units</span></code></a> is missing, it is assumed that target
level(s) are expressed in [cm].</p>
</li>
<li><p>(Normalized) integral of atmospheric field</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'integ_sfc2h'</span></code>, <code class="docutils literal notranslate"><span class="pre">'norm_integ_sfc2h'</span></code>,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'integ_sfc2z'</span></code>, <code class="docutils literal notranslate"><span class="pre">'norm_integ_sfc2z'</span></code></div>
</div>
<p>Integral from the surface to the upper boundary specified by <a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a>.
Values of <a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a> are expressed in height above ground (integ_sfc2h)
or in height above mean sea level (integ_sfc2z); when multiple values
of <a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a> are defined, a new field is computed for each value.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'integ_h2h,lbound,ubound'</span></code>, <code class="docutils literal notranslate"><span class="pre">'norm_integ_h2h,lbound,ubound'</span></code></dt><dd><p>(lbound in height agl, ubound in height agl)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'integ_h2z,lbound,ubound'</span></code>, <code class="docutils literal notranslate"><span class="pre">'norm_integ_h2z,lbound,ubound'</span></code></dt><dd><p>(lbound in height agl, ubound in height amsl)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'integ_z2h,lbound,ubound'</span></code>, <code class="docutils literal notranslate"><span class="pre">'norm_integ_z2h,lbound,ubound'</span></code></dt><dd><p>(lbound in height amsl, ubound in height agl)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'integ_z2z,lbound,ubound'</span></code>, <code class="docutils literal notranslate"><span class="pre">'norm_integ_z2z,lbound,ubound'</span></code></dt><dd><p>(lbound in height amsl, ubound in height amsl)</p>
</dd>
</dl>
<p>Vertical integral between lower and upper boundary, as specified by
the arguments of the operator (<a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a> is not supported for these
operators). The integral is normalized by the height difference
between upper and lower bounds when <code class="docutils literal notranslate"><span class="pre">'norm_integ_*'</span></code> operator is used:
result = (1/ubound-lbound) * integral[lbound -&gt; ubound](field(z) * dz)</p>
<p>Each of lbound and ubound may be expressed as an integer, or as
a tag refering to a 2d field available in the same computing
iteration. In this latter case, the associated field values must
represent a height above mean sea level or above ground (depending
on the operator).</p>
<p>When <a class="reference internal" href="#Process.voper_lev_units" title="&amp;Process.voper_lev_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev_units</span></code></a> is missing, it is assumed that target
level(s) are expressed in [m].</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The field to integrate may be defined on model full levels or on
model half levels. The HEIGHT field must be provided on half levels,
and must be available on the same set of levels as the field to
integrate, or on one more level when the field to integrate is
defined on full levels.</p>
<p>The auxiliary field HSURF is required when some of the boundaries
are expressed in height above ground level. Note however that
HSURF can be _any_ topography, not necessarily the model topo
(use voper_use_tag to specify which HSURF to use when multiple
choices are present).</p>
<p>The field to integrate and the height field must be available and
defined on all levels between lbound and ubound; at points where
this condition is not satisfied, the result is set to undefined.
When some of the boundaries are defined through field tags, the
result is undefined where the refered fields are undefined.</p>
</div>
</li>
<li><p>Minimum or maximum of atmospheric field in a specified height interval</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'max_sfc2h'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'max_sfc2z'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'min_sfc2h'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'min_sfc2z'</span></code></div>
</div>
<p>Maximum or minimum of the field computed for the height interval
starting at the surface and ending at the height specified in
<a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a>. Values of <a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a> are expressed in height above ground
(<code class="docutils literal notranslate"><span class="pre">*_sfc2h</span></code>) or in height above mean sea level (<code class="docutils literal notranslate"><span class="pre">*_sfc2z</span></code>); when multiple
values of <a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a> are defined, a new field is computed for each value.</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'max_h2h,lbound,ubound'</span></code>,     (lbound in meter agl, ubound in meter agl)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'max_h2z,lbound,ubound'</span></code>,     (lbound in meter agl, ubound in meter amsl)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'max_z2h,lbound,ubound'</span></code>      (lbound in meter amsl, ubound in meter agl)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'max_z2z,lbound,ubound'</span></code>      (lbound in meter amsl, ubound in meter amsl)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'min_h2h,lbound,ubound'</span></code>,     (lbound in meter agl, ubound in meter agl)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'min_h2z,lbound,ubound'</span></code>,     (lbound in meter agl, ubound in meter amsl)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'min_z2h,lbound,ubound'</span></code>      (lbound in meter amsl, ubound in meter agl)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'min_z2z,lbound,ubound'</span></code>      (lbound in meter amsl, ubound in meter amsl)</div>
</div>
<p>Maximum or minimum of the field computed for the height interval specified
by the arguments of the operator (<a class="reference internal" href="#Process.voper_lev" title="&amp;Process.voper_lev"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev</span></code></a> is not supported for these
operators). Each of lbound and ubound may be expressed as an integer,
or as a tag refering to a 2d field available in the same computing
iteration. In this latter case, the associated field values must
represent a height above mean sea level or above ground (depending
on the operator).</p>
<p>When <a class="reference internal" href="#Process.voper_lev_units" title="&amp;Process.voper_lev_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper_lev_units</span></code></a> is missing, it is assumed that target
level(s) are expressed in [m].</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The maximum and the minimum are computed for all model levels
included in the specified height interval, but also consider
the value of the field at the boundaries of the height
interval; these latter values are obtained by linear
interpolation with respect to the height.</p>
<p>The field to reduce may be defined on model full levels or on
model half levels. The height field must be provided, and must
be available on the same type of levels and on the same set of
levels as the field to reduce.</p>
<p>The auxiliary field HSURF is required when some of the boundaries
are expressed in height above ground level. Note however that
HSURF can be _any_ topography, not necessarily the model topo
(use voper_use_tag to specify which HSURF to use when multiple
choices are present).</p>
<p>The field to reduce and the height field must be available and
defined on all levels between lbound and ubound; at points where
this condition is not satisfied, the result is set to undefined.
When some of the boundaries are defined through field tags, the
result is undefined where the refered fields are undefined.</p>
</div>
</li>
<li><p>Vertical derivative of atmospheric fields with respect to the height</p>
<p><code class="docutils literal notranslate"><span class="pre">'derivate_k'</span></code></p>
<p>The field to derive must be defined on model full levels or on
model half levels. Finite differences are used to compute the
vertical derivative, either centered (within the profile) or
left / right difference at profile ends.
The height field must be accessible in the same iteration, and
must be defined on the same set of levels as the field to derive.</p>
<p>This operator changes the field identity, and new_field_id
must be set.</p>
</li>
<li><p>Upscaled vertical gradient of atmospheric field in a user specified
height interval (algorithm taken from INCA software)</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'upscale_grad_min,lbound,ubound'</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'upscale_grad_max,lbound,ubound'</span></code></div>
</div>
<p>Compute upscaled vertical gradient of the active field between
lbound and ubound, where lbound and ubound are tags refering to
single level height fields available in the current iteration.
The upscaled gradient is computed by dividing the set of levels
in two equal subsets, computing the vertical gradient between
each surface of the first subset and the corresponding surface
of the second subset, and taking the minimum (upscale_grad_min)
or the maximum (upscale_grad_max) of these gradients.</p>
<p>The height field must be available on all levels where the field
to transform is available. All heights must be expressed in
meter above mean sea level.</p>
<p>The upscaled vertical gradient is set to undefined at all points
where less than 4 levels are within the prescribed boundaries.</p>
<p>This operator changes the field identity, and new_field_id
must be set.</p>
</li>
<li><p>Translation of vertical structure to a different topography</p>
<p><code class="docutils literal notranslate"><span class="pre">'translate_simple,to_location'</span></code>
<code class="docutils literal notranslate"><span class="pre">'translate_simple,to_grid:tag'</span></code></p>
<p>Transform a near-surface field; the field will be corrected to
cope for a different topography than the original one. The
correction uses a lapse rate derived from the model profile
(see COSMO PT CORSO-A, task 2). Three cases are considered:</p>
<div class="line-block">
<div class="line">let Dh = TOPO_target - TOPO_model</div>
<div class="line">let ke be the index of the lowest model level</div>
</div>
<ol class="arabic">
<li><p>ABS(Dh) &lt; dhmin [m]</p>
<p>No corrections applied.</p>
</li>
<li><p>Dh &lt; -dhmin [m]</p>
<p>Lapse rate based on model levels (ke-2) and (ke-1).</p>
</li>
<li><p>Dh &gt; +dhmin [m]</p>
<p>Lapse rate based on value of field at height TOPO_target
and value of field on level (ke-1), where the value of
field at TOPO_target is obtained by linear interpolation
between neighbour levels.</p>
</li>
</ol>
<p>Default value of dhmin is 50 [m], but this can be changed
by setting out_mode_hcor_dhmin.</p>
<p>The target topography is either the altitude of specified locations
(translate_simple,to_location), or an additional HSURF field
refered to by the specified tag (translate_simple,to_grid:tag).</p>
<p>The field to transform must be associated with a multi-level
field, which is declared in the active dictionary (e.g. T_2M
and T). The required parents are: the native topography HSURF,
the field to transform, the associated multi-levels field and
the height field. The associated multi-levels field and the
height field must be defined on the same set of levels.</p>
</li>
</ol>
<p>Vertical operators only act on levels sharing the same tags. When necessary,
the set of auxiliary fields required by the operator can be restricted to the
list defined by voper_use_tag: this list must be exhaustive, and it refers to
field tags in the current iteration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>to optimize code performance, extract parent fields on the
smallest possible number of levels (using levlist or levmin/levmax)</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when one or more of the parents are undefined for a specific validation
date, the derived field will also be undefined for this validation date.</p>
</div>
</section>
<section id="time-operators">
<h3>Time Operators<a class="headerlink" href="#time-operators" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.toper">
<span class="sig-name descname"><span class="pre">toper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;time</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.toper" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.toper_mask">
<span class="sig-name descname"><span class="pre">toper_mask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical</span> <span class="pre">condition&gt;</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">e.g.</span> <span class="pre">toper_mask='lead_time&gt;0'</span></em><a class="headerlink" href="#Process.toper_mask" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>The following time operators are implemented</p>
<p><strong>Identity</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'id'</span></code></dt><dd><p>identity (default)</p>
</dd>
</dl>
<p><strong>Operators acting on current time level only</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'mask_all'</span></code></dt><dd><p>set all field values to undefined</p>
</dd>
</dl>
<p><strong>Operators acting on a time interval</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'max,t1,t2,t3,u'</span></code></dt><dd><p>maximum value of interval</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'min,t1,t2,t3,u'</span></code></dt><dd><p>minimum value of interval</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'sum,t1,t2,t3,u'</span></code></dt><dd><p>sum of values of interval</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'avg,t1,t2,t3,u'</span></code></dt><dd><p>average of values of interval, computed as weighted
mean when the field is defined for non trivial time
interval, the weight of each contributing time level
being the associated time range, as arithmetic mean
otherwise</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'date_of_max,t1,t2,t3,u'</span></code></dt><dd><p>date at which maximum value in interval is assumed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'date_of_min,t1,t2,t3,u'</span></code></dt><dd><p>date at which minimum value in interval is assumed</p>
</dd>
</dl>
<ul class="simple">
<li><p>interval is defined by start time (t1), end time (t2), and increment (t3)</p></li>
<li><p>interval refers to contributing time levels, relative to current validation time</p></li>
<li><p>times can be expressed in <code class="docutils literal notranslate"><span class="pre">'hour'</span></code> or <code class="docutils literal notranslate"><span class="pre">'minute'</span></code> (u)</p></li>
<li><p>increment can be omitted, in which case fieldextra consider all time levels
included in the interval for which the considered field is defined; when no
such time levels exist the result is undefined.</p></li>
<li><p>when increment is specified, the value of the operator is undefined as
soon as one of the specified time level is missing, or as soon as the
considered field is undefined for one of the specified time levels.</p></li>
<li><p>the time range of the resulting field is the specified time interval, except
for the following cases</p>
<ul>
<li><p>min of contiguous min is a min with a time range extending from start of
first contributing time level to end of last contrbuting time level</p></li>
<li><p>max of contiguous max is a max with a time range extending from start of
first contributing time level to end of last contrbuting time level</p></li>
<li><p>sum of contiguous accumulation is an accumulation with a time range
extending from start of first contributing time level to end of last
contributing time level</p></li>
</ul>
</li>
<li><p>the result of the operators <code class="docutils literal notranslate"><span class="pre">'date_of_max'</span></code> and <code class="docutils literal notranslate"><span class="pre">'date_of_min'</span></code> is the (real-valued) time
index at which the maximum and, respectively, minimum value of the parent field is
assumed, i.e. a parameter of type TIME_INDEX and therefore requires the auxiliary
parameter TIME_INDEX to be defined in the dictionary</p></li>
</ul>
<p><strong>Operators acting on the boundary of a time interval</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'start,t1,t2,t3,u'</span></code></dt><dd><p>start value of interval</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'end,t1,t2,t3,u'</span></code></dt><dd><p>end value of interval</p>
</dd>
</dl>
<ul class="simple">
<li><p>these operators are useful to assign field values to different
validation dates (e.g. assign daily 6h-6h average to 00 UTC of
the first day, prepare parent fields for some operator depending
on accumulated value and on start of interval value).</p></li>
<li><p>interval is defined by start time (t1), end time (t2), and increment (t3)</p></li>
<li><p>interval refers to contributing time levels, relative to current validation time</p></li>
<li><p>times can be expressed in <code class="docutils literal notranslate"><span class="pre">'hour'</span></code> or <code class="docutils literal notranslate"><span class="pre">'minute'</span></code> (u)</p></li>
<li><p>increment can be omitted</p></li>
<li><p>only the start (resp. the end) of the interval matter; when the start (resp.
the end) of the interval is not available the value of the operator is undefined.</p></li>
<li><p>the time range of the transformed field is the one of the contributing time
level, in particular the transformed field inherits the _absolute_ start and
end date of the contributing time level</p></li>
</ul>
<p><strong>Differences</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">'delta,t,u'</span></code></dt><dd><p>difference</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'tdelta,t,u'</span></code></dt><dd><p>weighted difference</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">t1</span><span class="o">*</span><span class="n">field</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span> <span class="o">-</span> <span class="n">t2</span><span class="o">*</span><span class="n">field</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t2</span><span class="p">)</span>
</pre></div>
</div>
<p>where t1 and t2 are lead times</p>
</dd>
</dl>
<ul class="simple">
<li><p>time offset (t) is expressed relative to current validation time</p></li>
<li><p>times can be expressed in <code class="docutils literal notranslate"><span class="pre">'hour'</span></code> or <code class="docutils literal notranslate"><span class="pre">'minute'</span></code> (u)</p></li>
<li><p>time offset and unit can be omitted, in which case contiguous time
levels are considered; this is useful when time levels are not regularly
distributed (but more error prone - so use it only when necessary!)</p></li>
<li><p>when a time level is missing, e.g. for the first validation date, the
result is set to undefined</p></li>
<li><p>the time range of the resulting field is derived from the validation
dates of the two contributing fields</p></li>
<li><p>the time range type of the resulting field is given by the operator,
except for the following special cases</p>
<ul>
<li><p>difference of accumulations or of accumulation and instantaneous
is again an accumulation</p></li>
<li><p>weighted difference of averages or of average and instantaneous
is again an average</p></li>
</ul>
</li>
</ul>
<p><strong>Specialized differences</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'delta_g'</span></code>   difference between two consecutive validation times, but</dt><dd><p>only when associated reference dates are identical and
validation time differs from the common reference date;
otherwise keep the field untouched.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'tdelta_g'</span></code>  weighted difference between two consecutive validation times,</dt><dd><p>but only when associated reference dates are identical and
validation time differs from the common reference date;
otherwise keep the field untouched.</p>
</dd>
</dl>
<ul class="simple">
<li><p>these operators can be used in the following cases</p>
<ul>
<li><p>cumulated or averaged values from an intermittent assimilation cycle:
the de-aggregation will be correctly calculated, independently of
the implementation.</p></li>
<li><p>cumulated or averaged values from a forecast cycle, not defined at start:
the de-aggregation will be available from the first validation date
after start.</p></li>
<li><p>cumulated or averaged values with possible missing time levels:
no information lost will result from the de-aggregation.</p></li>
</ul>
</li>
<li><p>these operators extract as much information as possible when
de-aggregating the concerned field; this means (1) that time
levels with values undefined everywhere are ignored (i.e. kept
untouched by the operator, and skipped when looking for consecutive
validation time), and (2) that the values of the first _defined_
time level are kept untouched, except if this is the first element
of the processed time serie, in which case values are set to
undefined.
Beware that the resulting field may contain differing time range
length for different validation dates.</p></li>
<li><p>when two consecutive validation times can not be found, e.g. for the
first validation date, the result is set to undefined</p></li>
<li><p>the time range of the resulting field is derived from the validation
dates of the two contributing fields</p></li>
<li><p>the time range type of the resulting field is given by the operator,
except for the following special cases</p>
<ul>
<li><p>difference of accumulations or of accumulation and instantaneous
is again an accumulation</p></li>
<li><p>weighted difference of averages or of average and instantaneous
is again an average</p></li>
</ul>
</li>
</ul>
<p><strong>Interpolation</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'fill_undef,method,r,u'</span></code></dt><dd><p>method in {<code class="docutils literal notranslate"><span class="pre">persistance</span></code>, <code class="docutils literal notranslate"><span class="pre">linear_interpolation</span></code>}</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'fill_undef,method'</span></code></dt><dd><p>method in {<code class="docutils literal notranslate"><span class="pre">distribute</span></code>}
This operator <em>only</em> acts on time levels where <em>all</em>
field values are undefined (incl. the case where the
field has never been set), replacing the undefined
values with values interpolated from the neighbourhood.
The type of interpolation is defined by the value of
<code class="docutils literal notranslate"><span class="pre">'method'</span></code>, which is one of {<code class="docutils literal notranslate"><span class="pre">persistance</span></code>, <code class="docutils literal notranslate"><span class="pre">linear_interpolation</span></code>, <code class="docutils literal notranslate"><span class="pre">distribute</span></code>}.
The neighbourhood r is expressed as a difference in
validation dates, which is an integer representing
either hour (<code class="docutils literal notranslate"><span class="pre">u=hour</span></code>) or minute (<code class="docutils literal notranslate"><span class="pre">u=minute</span></code>).</p>
</dd>
</dl>
<ul class="simple">
<li><p>this operator can be used in combination with the clone_missing_input
functionality, to support missing input files in a long time serie.</p></li>
<li><p>this operator can also be used in combination with expect_missing_field
to support missing time levels in input files for some specified fields.
Note, however, that time levels for which <em>all</em> extracted fields are
missing will not be created by the fill_undef operator and will not be
present in output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'persistance'</span></code> : for each undefined time level, find the nearest time level
which is defined, looking both in the past and in the future, and use
this value if the difference in validation dates is smaller or equal to r
(otherwise the value remains undefined).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'linear_interpolation'</span></code> : for each undefined time level, find the nearest time
levels which are defined, both in the past and in the future (so called control
points), and replaces the undefined value by the linear combination of the
control points. When some control point is missing, or when the difference in
validation dates between the target time level and the nearest control point
is strictly larger than r, the target time level remains undefined.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'distribute'</span></code> : this method is used when interpolating aggregated values
(average, accumulation). Defined values are uniformly distributed over
undefined time levels, such that aggregating the interpolated field
reproduces the original values. It requires that, for each time level,
the end of the associated time range coincides with the validation
date. Unlike the other methods, characteristics and values of defined
time levels are also changed.
More precisely, for each undefined time level find the nearest defined
time level in the future, and, if the validation date of the undefined
level is within the time range of the defined time level, associate a
section of this time range to the undefined time level, using the
assumption that the field is uniformly distributed. When some condition
is not fullfilled, the field remains undefined.
Example: accumulated precipitation, with lead times +3 and +4 hour
missing, and with lead time +5 hour available and representing an
accumulation from +2 to +5 hour (this configuration could be obtained
after applying <code class="docutils literal notranslate"><span class="pre">toper=delta_g</span></code>): the <code class="docutils literal notranslate"><span class="pre">'distribute'</span></code> method will associate
1/3 of the +5 hour value to the interval +2 to +3 hour, 1/3 to the
interval +3 to +4 hour, will change the time range of the +5 hour
to the interval +4 to +5 hour, and will change the value of the
+5 hour to 1/3 of the original value.</p></li>
</ul>
<p><strong>Operators depending on a field of type TIME_INDEX</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">'value_at_date,tag'</span></code> value at date defined by tagged field (tag) of type TIME_INDEX</p>
<ul class="simple">
<li><p>the temporal information is inherited from tag</p></li>
</ul>
<p>The set of time levels where the time operator is applied can be restricted
to the time levels fulfilling the condition defined by <code class="docutils literal notranslate"><span class="pre">'toper_mask'</span></code> (the mask
does not modify the set of time levels _contributing_ to the operator).
The syntax of <code class="docutils literal notranslate"><span class="pre">'toper_mask'</span></code> is a subset of the syntax described in section 4.3.7:</p>
<ul class="simple">
<li><p>tag must always be present</p></li>
<li><dl class="simple">
<dt>tag refers to a time attribute (and not to a field) and must be one of</dt><dd><p>{<code class="docutils literal notranslate"><span class="pre">lead_time</span></code>}</p>
</dd>
</dl>
</li>
</ul>
<p>The units for the numerical values used in the logical expression are the
same as the ones defined for the time operator (argument <code class="docutils literal notranslate"><span class="pre">'u'</span></code>), or [minute]
when missing (!).</p>
<p>Keep in mind the following rules when using a time operator:</p>
<ul class="simple">
<li><p>When set, an operator ignores time levels where “toper_mask” is false.</p></li>
<li><p>Except for <code class="docutils literal notranslate"><span class="pre">'fill_undef'</span></code>, all operators always ignore time levels for
which the concerned field has not been set, or for which the concerned
field is everywhere undefined.</p></li>
<li><p>When some of the contributing time levels are missing - the set of
contributing time levels being specified by the operator argument -
the result of the operator is undefined. Note that some operators
support a dynamic specification of the contributing time levels
(e.g. “max,t1,t2,u”, without t3 increment), in which case the
previous does not apply.</p></li>
<li><p>In addition to the previous rule, the result of the operator is undefined
at all locations where some of the operands are undefined. This also
applies to the <code class="docutils literal notranslate"><span class="pre">'fill_undef'</span></code> operator.</p></li>
<li><p>When looking for the nearest defined time level, all time levels which
have been set and where the field is defined at least at one location
are considered</p></li>
<li><p>The reference time of the resulting operation is the minimum of the
reference times of the contributing time levels, or, if required to
keep the lead and the start time positive, the latest possible previous
date.</p></li>
</ul>
</section>
<section id="point-operators">
<h3>Point Operators<a class="headerlink" href="#point-operators" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.poper">
<span class="sig-name descname"><span class="pre">poper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.poper" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.poper2">
<span class="sig-name descname"><span class="pre">poper2</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.poper2" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.poper3">
<span class="sig-name descname"><span class="pre">poper3</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.poper3" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.poper4">
<span class="sig-name descname"><span class="pre">poper4</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.poper4" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.poper5">
<span class="sig-name descname"><span class="pre">poper5</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em><a class="headerlink" href="#Process.poper5" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<p>Unlike other operators, up to three different point operators can be defined
for each field; this supports more compact and comprehensible namelists.</p>
<p>As already mentioned, <a class="reference internal" href="#Process.poper" title="&amp;Process.poper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper</span></code></a> is first applied  to all the relevant fields, then
<a class="reference internal" href="#Process.poper2" title="&amp;Process.poper2"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper2</span></code></a> is applied  to all the relevant fields, … and finally poper 5 is applied
to all the relevant fields. That means in particular that the results of the
transformation by <a class="reference internal" href="#Process.poper" title="&amp;Process.poper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper</span></code></a>, for any field, is available to <a class="reference internal" href="#Process.poper2" title="&amp;Process.poper2"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper2</span></code></a>, … <a class="reference internal" href="#Process.poper5" title="&amp;Process.poper5"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper5</span></code></a>.</p>
<p>The following point operators are implemented:</p>
<p><strong>Identity operator (default):</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">'id'</span></code></p>
<p><strong>Operators to transform an existing field according to some mathematical expression</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">'max,tag1,tag2'</span></code></dt><dd><p>maximum of 2 fields, the processed field is replaced by <code class="docutils literal notranslate"><span class="pre">tag1</span></code> if <code class="docutils literal notranslate"><span class="pre">tag1</span> <span class="pre">&gt;=</span> <span class="pre">tag2</span></code> and <code class="docutils literal notranslate"><span class="pre">tag2</span></code> otherwise.
If <code class="docutils literal notranslate"><span class="pre">tag1</span></code> or <code class="docutils literal notranslate"><span class="pre">tag2</span></code> are undefined, the result is undefined.</p>
<p><code class="docutils literal notranslate"><span class="pre">tag1</span></code> and <code class="docutils literal notranslate"><span class="pre">tag2</span></code> are field tags defined
in the current iteration; the field being
is refered to by the tag <code class="docutils literal notranslate"><span class="pre">'__self__'</span></code> and must
be present. All contributing fields must have
the same units.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'min,tag1,tag2'</span></code></dt><dd><p>minimum of 2 fields, the processed field is replaced by <code class="docutils literal notranslate"><span class="pre">tag1</span></code> if <code class="docutils literal notranslate"><span class="pre">tag1</span> <span class="pre">&lt;=</span> <span class="pre">tag2</span></code> and <code class="docutils literal notranslate"><span class="pre">tag2</span></code> otherwise.
If <code class="docutils literal notranslate"><span class="pre">tag1</span></code> or <code class="docutils literal notranslate"><span class="pre">tag2</span></code> are undefined, the result is undefined.</p>
<p><code class="docutils literal notranslate"><span class="pre">tag1</span></code> and <code class="docutils literal notranslate"><span class="pre">tag2</span></code> are field tags defined
in the current iteration; the field being
is refered to by the tag <code class="docutils literal notranslate"><span class="pre">'__self__'</span></code> and must
be present. All contributing fields must have
the same units.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'polynomial,a0,a1,...'</span></code></dt><dd><p>polynomial function of a field, the processed field is
replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">SUM</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="p">(</span><span class="n">ak</span> <span class="o">*</span> <span class="n">field</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span><span class="o">**</span><span class="n">k</span><span class="p">)</span> <span class="p">,</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'logarithm_e'</span></code></dt><dd><p>natural logarithm of field, the processed field is
replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">log_e</span><span class="p">(</span><span class="n">field</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is undefined if <code class="docutils literal notranslate"><span class="pre">field(i,j)</span> <span class="pre">&lt;=</span> <span class="pre">0</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'exponential'</span></code></dt><dd><p>exponential of field, the processed field is
replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">exponential</span><span class="p">(</span><span class="n">field</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span>
</pre></div>
</div>
<p>The result is undefined if <code class="docutils literal notranslate"><span class="pre">field(i,j)</span> <span class="pre">&lt;=</span> <span class="pre">max_value</span></code>
(<code class="docutils literal notranslate"><span class="pre">max_value</span></code>: largest real to avoid overflow)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'product,tag'</span></code></dt><dd><p>product of two fields, the processed field is
replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="n">tag</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'quotient,tag'</span></code></dt><dd><p>quotient of two fields, the processed field is
replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">/</span> <span class="n">tag</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is undefined when a zero divide exception occurs</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">'sum,tag1*fac1+...'</span></code></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">'sum,tag1/fac1+...'</span></code></dt><dd><p>generic sum, the processed field is replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">SUM</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="p">(</span><span class="n">tagi</span> <span class="n">opi</span> <span class="n">faci</span><span class="p">)</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">opi</span></code> is the mathematical operator <code class="docutils literal notranslate"><span class="pre">'*'</span></code> or <code class="docutils literal notranslate"><span class="pre">'/'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tagi</span></code> are field tags defined in the
current iteration; the field being
processed is refered to by the tag
<code class="docutils literal notranslate"><span class="pre">'__self__'</span></code> and must be present.
All contributing fields must have
the same units.
‘tagi opi’ may be omitted, in this case
the corresponding term is associated
with a constant field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">faci</span></code> are real values and may be
omitted</p></li>
</ul>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">'inverse,tag1*fac1+...'</span></code></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">'inverse,tag1/fac1+...'</span></code></dt><dd><p>generic inverse, the processed field is replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">SUM</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="p">(</span><span class="n">tagi</span> <span class="n">opi</span> <span class="n">faci</span><span class="p">)</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">opi</span></code> is the mathematical operator <code class="docutils literal notranslate"><span class="pre">'*'</span></code> or <code class="docutils literal notranslate"><span class="pre">'/'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tagi</span></code> are field tags defined in the
current iteration; the field being
processed is refered to by the tag
<code class="docutils literal notranslate"><span class="pre">'__self__'</span></code> and must be present.
All contributing fields must have
the same units.
‘tagi opi’ may be omitted, in this case
the corresponding term is associated
with a constant field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">faci</span></code> are real values and may be
omitted</p></li>
</ul>
<p>The result is undefined if a zero divide exception occurs.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">'ratio,tag1*fac1+...,tagj*facj+...'</span></code></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">'ratio,tag1/fac1+...,tagj/facj+...'</span></code></dt><dd><p>generic rational fraction, the processed field is replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">SUM</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="p">(</span><span class="n">tagi</span> <span class="n">opi</span> <span class="n">faci</span><span class="p">)</span> <span class="o">/</span>
          <span class="n">SUM</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">m</span><span class="p">)</span> <span class="p">(</span><span class="n">tagj</span> <span class="n">opj</span> <span class="n">facj</span><span class="p">)</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">opi</span></code> and opj are one of the mathematical operator <code class="docutils literal notranslate"><span class="pre">'*'</span></code> or <code class="docutils literal notranslate"><span class="pre">'/'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tagi</span></code> and <code class="docutils literal notranslate"><span class="pre">tagj</span></code> are field tags defined
in the current iteration; the field
being processed is refered to by the
tag <code class="docutils literal notranslate"><span class="pre">'__self__'</span></code> and must be present.
All fields contributing to the numerator
must have the same units; all fields
contributing to the denominator must
have the same units.
<code class="docutils literal notranslate"><span class="pre">tagi</span> <span class="pre">opi</span></code> and <code class="docutils literal notranslate"><span class="pre">tagj</span> <span class="pre">opj</span></code> may be omitted,
in this case the corresponding terms are
associated with a constant field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">faci</span></code> and <code class="docutils literal notranslate"><span class="pre">facj</span></code> are real values and may
be omitted</p></li>
</ul>
<p>The result is undefined if a zero divide exception occurs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'norm,fmin,fmax'</span></code></dt><dd><p>field norm, the processed field is replaced by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">field</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span><span class="o">-</span><span class="n">fmin</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">fmax</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span><span class="o">-</span><span class="n">fmin</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">fmin</span></code> and <code class="docutils literal notranslate"><span class="pre">fmax</span></code> are field tags defined in the current iteration</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'stretch,ffix,fmax,dfmax'</span></code></dt><dd><p>stretch field in the interval <code class="docutils literal notranslate"><span class="pre">[ffix,fmax]</span></code>, keeping the
field unchanged where <code class="docutils literal notranslate"><span class="pre">field</span> <span class="pre">=</span> <span class="pre">ffix</span></code> and stretching the
field with a value <code class="docutils literal notranslate"><span class="pre">dfmax</span></code> where <code class="docutils literal notranslate"><span class="pre">field</span> <span class="pre">=</span> <span class="pre">fmax</span></code>:</p>
<dl>
<dt>If <code class="docutils literal notranslate"><span class="pre">f_fix(i,j)</span> <span class="pre">&gt;=</span> <span class="pre">f_max(i,j)</span></code></dt><dd><p>if <code class="docutils literal notranslate"><span class="pre">field</span> <span class="pre">&gt;=</span> <span class="pre">f_fix</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span>
</pre></div>
</div>
<p>if <code class="docutils literal notranslate"><span class="pre">field</span> <span class="pre">&gt;=</span> <span class="pre">f_max</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span> <span class="o">+</span> <span class="n">df_max</span> <span class="o">*</span> <span class="p">(</span><span class="n">f_fix</span><span class="o">-</span><span class="n">field</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">f_fix</span><span class="o">-</span><span class="n">f_max</span><span class="p">)</span>
</pre></div>
</div>
<p>otherwise</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span> <span class="o">+</span> <span class="n">df_max</span>
</pre></div>
</div>
</dd>
<dt>If <code class="docutils literal notranslate"><span class="pre">f_fix(i,j)</span> <span class="pre">&lt;</span> <span class="pre">f_max(i,j)</span></code></dt><dd><p>if <code class="docutils literal notranslate"><span class="pre">field</span> <span class="pre">&lt;=</span> <span class="pre">f_fix</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span>
</pre></div>
</div>
<p>if <code class="docutils literal notranslate"><span class="pre">field</span> <span class="pre">&lt;=</span> <span class="pre">f_max</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span> <span class="o">+</span> <span class="n">df_max</span> <span class="o">*</span> <span class="p">(</span><span class="n">f_fix</span><span class="o">-</span><span class="n">field</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">f_fix</span><span class="o">-</span><span class="n">f_max</span><span class="p">)</span>
</pre></div>
</div>
<p>otherwise</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">field</span> <span class="o">+</span> <span class="n">df_max</span>
</pre></div>
</div>
</dd>
</dl>
<p>The conditions  <code class="docutils literal notranslate"><span class="pre">f_fix</span> <span class="pre">/=</span> <span class="pre">f_max</span></code>  and  <code class="docutils literal notranslate"><span class="pre">ABS(df_max)</span> <span class="pre">&lt;</span> <span class="pre">ABS(f_fix-f_max)</span></code>
must be fullfilled everywhere.</p>
</dd>
</dl>
<p><strong>Operators to manipulate undefined values:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'mask_all'</span></code></dt><dd><p>set to undefined all values of the field</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'mask,cond'</span></code></dt><dd><p>set to undefined all values of the field where the logical condition <code class="docutils literal notranslate"><span class="pre">'cond'</span></code> is true.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'replace_undef,value'</span></code></dt><dd><p>replace all undefined with the specified value.</p>
</dd>
</dl>
<p><strong>Operators to change field values at specified locations:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'replace_all,value'</span></code></dt><dd><p>set value everywhere</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'replace_cond,cond,[value|tag]...'</span></code></dt><dd><p>replace values at each location where one logical condition
<code class="docutils literal notranslate"><span class="pre">'cond'</span></code> is true; the new values are either specified by a
constant real number, or by a tag refering to another field
in the same iteration. Multiple pairs of condition / value
may be specified, but the regions in grid point space where
the conditions are true must not overlap (evaluated
independently for each validation date). The values to
set are either specified by a constant real number, or by
a tag refering to another field in the same iteration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'replace_ij,i,j,value...'</span></code></dt><dd><p>replace value(s) at specified coordinates. Multiple coordinates can be specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'replace_loc,loc,value...'</span></code></dt><dd><p>replace value(s) at grid points associated with specified
location(s). Multiple locations can be specified; either
the location id or an alias of the form <code class="docutils literal notranslate"><span class="pre">&lt;group&gt;:&lt;name&gt;</span></code>
may be given.</p>
</dd>
</dl>
<p><strong>Operators to create a new field using the current field as template,
changing the values at specified locations and setting undefined elsewhere:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'create_cond,cond,[value|tag]...'</span></code></dt><dd><p>set the resulting field to some specified values at each
location where a logical condition <code class="docutils literal notranslate"><span class="pre">'cond'</span></code> is true; set
to undefined elsewhere. Multiple pairs of condition / value
may be specified, but the regions in grid point space where
the conditions are true must not overlap (evaluated
independently for each validation date). The values to
set are either specified by a constant real number, or by
a tag refering to another field in the same iteration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'create_cond,cond,value1,value2'</span></code></dt><dd><p>set the resulting field to <code class="docutils literal notranslate"><span class="pre">'value1'</span></code> at each location
where the logical condition <code class="docutils literal notranslate"><span class="pre">'cond'</span></code> is true, set to <code class="docutils literal notranslate"><span class="pre">'value2'</span></code>
where the condition is false, and set to undefined where
the condition is not defined (i.e. at any location where
some of the fields used within <code class="docutils literal notranslate"><span class="pre">'cond'</span></code> are undefined).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'create_ij,i,j,value,...'</span></code></dt><dd><p>set value(s) at specified coordinates, set to undefined
otherwise; multiple coordinates can be specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'create_loc,loc,value,...'</span></code></dt><dd><p>set value(s) at grid points associated with
specified location(s), set to undefined otherwise;
multiple locations can be specified; either the location
id or an alias of the form <code class="docutils literal notranslate"><span class="pre">&lt;group&gt;:&lt;name&gt;</span></code> may be given.</p>
</dd>
</dl>
<p><strong>Operators to transform an existing field according to pre-defined rules:</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">'n2geog[,tag1,tag2]'</span></code></dt><dd><p>transform vector components from native to geographical
reference system, characterized by easterly and
northerly directions (only for fields declared as 2d
vector components in the active dictionary, requires
access to both components). When definition of components
is ambiguous, tags must be set for both components and
passed through the operator arguments tag1 and tag2.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'azimut_class,n,cond'</span></code></dt><dd><p>transform the input value in azimut class according to
the following definition:</p>
<div class="line-block">
<div class="line">n classes, from 1 to n</div>
<div class="line">first sector north, inverse trigonometric order</div>
</div>
<dl class="simple">
<dt>For example, with n=8:</dt><dd><p>1 = N (337.5-22.49), 2 = NE (22.5-67.49), …</p>
</dd>
</dl>
<p>When cond is present, an additional class 0 is added
containing events for which cond is false.
Input values must be expressed in degree, and are
taken modulo 360.
The number of classes is saved internally, in association
with the key <code class="docutils literal notranslate"><span class="pre">'numberOfClasses'</span></code>, and can be stored in
any output supporting the auxiliary meta-information
<code class="docutils literal notranslate"><span class="pre">'localInformationNumber'</span></code> by setting in active dictionary
localInfoNumberUse=numberOfClasses.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'rate'</span></code></dt><dd><p>compute field rate in seconds, by dividing the field
value by the length of the time interval for which the
field is representative (only when time range indicator
is one of 2, 3, 4 or 5)</p>
</dd>
</dl>
<p><strong>Operators using location specific information</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'hshift_loc'</span></code></dt><dd><p>add location height to the active field; the field to
transform must be expressed in meter.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'hcor,value'</span></code></dt><dd><p>a field correction of value units per meter is applied,
based on the difference between location height and
model orography</p>
</dd>
</dl>
<p>The previous operator may only be applied at grid points associated with a location
and require the model surface height to be available from <code class="docutils literal notranslate"><span class="pre">'INCORE'</span></code> storage.
See also voper=``’translate_simple….’`` for a different way to apply a height
correction.</p>
<p><strong>Operators used to apply statistical post-processing:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'kfcor[,pr_1]'</span></code></dt><dd><p>apply Kalman filter correction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'kfincr[,pr_1]'</span></code></dt><dd><p>compute increment to direct model output due to Kalman filter</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'moscor_mlr[,pr_1,...,pr_n]'</span></code></dt><dd><p>estimate parameter, using MOS based on location-dependent multiple linear regression (mlr)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'moscor_global[,pr_1,...,pr_n]'</span></code></dt><dd><p>estimate parameter, using MOS based on global multiple linear regression (global)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'moscor_logreg,&lt;threshold&gt;[,pr_1,...,pr_n]'</span></code></dt><dd><p>estimate probability of threshold exceedance, using MOS based on logistic regression (logreg)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">'moscor_extlogreg,&lt;threshold&gt;[,pr_1,...,pr_n]'</span></code></dt><dd><p>estimate probability of threshold exceedance, using MOS based on extended logistic regression (extlogreg)</p>
</dd>
</dl>
<p><strong>Index</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>n</p></td>
<td><p>integer compatible with format I8</p></td>
</tr>
<tr class="row-odd"><td><p>loc</p></td>
<td><p>location tag</p></td>
</tr>
<tr class="row-even"><td><p>value</p></td>
<td><p>real number compatible with format F14.0</p></td>
</tr>
<tr class="row-odd"><td><p>cond</p></td>
<td><p>logical mask (see 4.3.7)</p></td>
</tr>
<tr class="row-even"><td><p>a0, a1…</p></td>
<td><p>real coefficients</p></td>
</tr>
<tr class="row-odd"><td><p>f</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fmin</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fmax</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ffix</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>dfmax</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>tag</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>tagi</p></td>
<td><dl class="simple">
<dt>field tags refering to other fields available in the current</dt><dd><p>iteration (either single 2d field, or field matching the
properties of the currently processed field)</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>pr_1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pr_n</p></td>
<td><dl class="simple">
<dt>field tags refering to other fields available in the current</dt><dd><p>iteration and pointing to predictants of a statistical operator</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about the statistical operators:</p>
<ul>
<li><dl class="simple">
<dt>The operators</dt><dd><p><code class="docutils literal notranslate"><span class="pre">'kfcor'</span></code>, <code class="docutils literal notranslate"><span class="pre">'kfincr'</span></code>, <code class="docutils literal notranslate"><span class="pre">'moscor_mlr'</span></code>, <code class="docutils literal notranslate"><span class="pre">'moscor_logreg'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'moscor_extlogreg'</span></code></p>
</dd>
</dl>
<p>may only be applied at grid points associated with a location and require access to
Kalman filter and MOS coefficients, respectively, as specified in location_list_additional
(see 6.3 for more details). The consistency of internal location coordinates with those
given in the external coefficient files is checked when the respective coefficient files
are read. In addition, the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.kf_model_name</span></code> and mos_model_name, respectively, as declared
in location_list_additional, is checked against the internal model name value. The behaviour
of the program in case of missing correction data is controlled by the namelist variable
<a class="reference internal" href="#Process.out_mode_kfcor_na" title="&amp;Process.out_mode_kfcor_na"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_kfcor_na</span></code></a> and out_mode_moscor_na, respectively (see 4.3.2).</p>
</li>
<li><dl class="simple">
<dt>The operator</dt><dd><p><code class="docutils literal notranslate"><span class="pre">'moscor_global'</span></code></p>
</dd>
</dl>
<p>may be applied at any grid point.</p>
</li>
<li><dl class="simple">
<dt>The operators</dt><dd><p><code class="docutils literal notranslate"><span class="pre">'moscor_logreg'</span></code> and <code class="docutils literal notranslate"><span class="pre">'moscor_extlogreg'</span></code></p>
</dd>
</dl>
<p>estimate the probability of exceeding the threshold specified as first operator argument.
The product category is thus changed to <code class="docutils literal notranslate"><span class="pre">'stat_probability'</span></code>, when one of these operators
is applied. Moreover, these two operators must be combined with the operator
new_field_id=’name,1’ in order to set the unit of the resulting probability field to 1
(GRIB1 conventions on how to code probabilities that have been estimated by a statistical
model are given in chapter 9).</p>
</li>
<li><p>Only Kalman filter and MOS with linear statistical model are supported. All predictor
fields have to be present in the iteration in which the operator is applied. They are
defined in the Error_model and Forecast_model, respectively, in the corresponding
<code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.location_list_additional</span></code> file. If more than one copy of one of the predictor fields exists
in the same iteration, the field must be uniquely tagged, and the list of unique predictor
field names and/or tags pr_1 to pr_n must be given as operator argument. The predictor
fields in the list must occur in the same order as in the Error_model and Forecast_model,
respectively. If no argument is present, the names of the predictors in the Error_model and
Forecast_model specification are used to find the predictor fields.</p></li>
<li><p>To use the MOS operator to create a new field, not available in the input file, as
opposed to correcting an existing field, the field has first to be created. This is
done at the start of a new iteration by using the operator use_operator=’__CREATE__’
(see 4.3.5 below); the MOS operator is then applied in the same iteration to set
the values of the created field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'kfcor'</span></code> and <code class="docutils literal notranslate"><span class="pre">'kfincr'</span></code> expect exactly one predictor field coinciding with the field that
will be corrected, whereas for <code class="docutils literal notranslate"><span class="pre">'moscor_mlr'</span></code>, <code class="docutils literal notranslate"><span class="pre">'moscor_global'</span></code>, <code class="docutils literal notranslate"><span class="pre">'moscor_logreg'</span></code>, and
<code class="docutils literal notranslate"><span class="pre">'moscor_extlogreg'</span></code> more than one predictor field is allowed.</p></li>
<li><p>Kalman filter and MOS estimation can only be applied to fields of product categories
<code class="docutils literal notranslate"><span class="pre">'determinist'</span></code>, <code class="docutils literal notranslate"><span class="pre">'eps_mean'</span></code>, <code class="docutils literal notranslate"><span class="pre">'eps_quantile'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'eps_member'</span></code>.</p></li>
<li><p>More details on parameter and probability estimation based on statistical models are
given in 6.3.</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about logarithm_e/exponential/inverse/product/quotient/ratio/
azimut_class/rate/moscor_logreg/moscor_extlogreg operators:</p>
<ul class="simple">
<li><p>These operators change the field identity, and <a class="reference internal" href="#Process.new_field_id" title="&amp;Process.new_field_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.new_field_id</span></code></a> must be set.</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about all operators:</p>
<ul class="simple">
<li><p>The result is undefined where some of the operands are undefined</p></li>
</ul>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.new_field_id">
<span class="sig-name descname"><span class="pre">new_field_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">where</span> <span class="pre">&lt;string&gt;</span> <span class="pre">=</span> <span class="pre">name[,units]</span></em><a class="headerlink" href="#Process.new_field_id" title="Permalink to this definition">#</a></dt>
<dd><p>It is possible to re-set the name and the units of the active field with ‘new_field_id’.
The new name must be defined in the active dictionary; if not set, the new units are
those associated with the new name in the active dictionary.</p>
<p>The level information, the type of statistical processing (time range information),
and the genrating process type will also be reset when the associated information
is available in the dictionary, and when this information is compatible with the
value of the processed record. In particular, when a non trivial type of statistical
processing is defined in the dictionary (e.g. average), and when the decoded record
is valid for a single time level, the dictionary value will be used and the time
range will be set to [0,0] (with respect to the validation date).</p>
<p>When the new field identity is already present in the current processing iteration,
all fields with the same identity will be merged into a single field, combining
the fields along the time dimension (an exception is raised when this is not
possible).</p>
<p>A side effect of some operators is to change the identity of the field being
transformed; in such a case it is mandatory to reset the field name (or to set
<code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.strict_usage</span></code> to false).
This concerns the following operators:</p>
<dl class="simple">
<dt><a class="reference internal" href="#Process.voper" title="&amp;Process.voper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper</span></code></a></dt><dd><p>in {<code class="docutils literal notranslate"><span class="pre">derivate_k</span></code>, <code class="docutils literal notranslate"><span class="pre">upscale_gradient_min</span></code>, <code class="docutils literal notranslate"><span class="pre">upscale_gradient_max</span></code>}</p>
</dd>
<dt><a class="reference internal" href="#Process.hoper" title="&amp;Process.hoper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.hoper</span></code></a></dt><dd><p>in {<code class="docutils literal notranslate"><span class="pre">regcnt</span></code>, <code class="docutils literal notranslate"><span class="pre">regcnt%</span></code>, <code class="docutils literal notranslate"><span class="pre">regfit</span></code>, <code class="docutils literal notranslate"><span class="pre">tiled_sqcnt%</span></code>, <code class="docutils literal notranslate"><span class="pre">sqcnt%</span></code>, <code class="docutils literal notranslate"><span class="pre">diskcnt%</span></code>}</p>
</dd>
<dt><a class="reference internal" href="#Process.poper" title="&amp;Process.poper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper</span></code></a></dt><dd><p>in {<code class="docutils literal notranslate"><span class="pre">product</span></code>, <code class="docutils literal notranslate"><span class="pre">quotient</span></code>, <code class="docutils literal notranslate"><span class="pre">ratio</span></code>, <code class="docutils literal notranslate"><span class="pre">azimut_class</span></code>, <code class="docutils literal notranslate"><span class="pre">rate</span></code>, <code class="docutils literal notranslate"><span class="pre">moscor_logreg</span></code>, <code class="docutils literal notranslate"><span class="pre">moscor_extlogreg</span></code>}</p>
</dd>
<dt><a class="reference internal" href="#Process.compare_fct" title="&amp;Process.compare_fct"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.compare_fct</span></code></a></dt><dd><p>in {<code class="docutils literal notranslate"><span class="pre">ratio</span></code>, <code class="docutils literal notranslate"><span class="pre">ratio_abs</span></code>}</p>
</dd>
</dl>
<p>It is possible to reset the field units only, by using the same name as the field
being transformed and by defining new units. Note that no internal consistency check
is currently made on field units; this value is only used when producing some output
(e.g. NetCDF). Note also that field units may be reset with the <a class="reference internal" href="#Process.set_units" title="&amp;Process.set_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_units</span></code></a> operator;
when used in the last iteration, <a class="reference internal" href="#Process.set_units" title="&amp;Process.set_units"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.set_units</span></code></a> has precedance over new_field_id.</p>
</dd></dl>

</section>
</section>
<section id="generated-fields-and-associated-operations">
<span id="section-4-3-5"></span><h2>Generated fields and associated operations<a class="headerlink" href="#generated-fields-and-associated-operations" title="Permalink to this heading">#</a></h2>
<p>All the fields extracted for a specific output file, as described in 4.3.3
and 4.3.4, are available for further processing. This processing is implemented
in multiple iterations; currently up to five iterations are supported. The data
set available at the start of each iteration is limited to the result of the
previous iteration, or to the set of extracted fields in the case of the first
iteration.</p>
<p>Fields can be simply copied from one iteration to the next, or new fields
can be computed. Unlike the rule for the definition of extracted fields,
multiple instances of the same fields may be defined to collect multiple
transformations of the same field in the same output (e.g. T min, max and
mean).</p>
<p>The first iteration is triggered by setting <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">tmp1_field=...</span> <span class="pre">/</span></code>, the
second one by setting <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">tmp2_field=...</span> <span class="pre">/</span></code>, the third one by setting
<code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">tmp3_field=...</span> <span class="pre">/</span></code>, the fourth one by <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">tmp4_field=...</span> <span class="pre">/</span></code>, the fifth
one by <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">tmp5_field=...</span> <span class="pre">/</span></code>, and the last one by <code class="docutils literal notranslate"><span class="pre">&amp;Process</span> <span class="pre">out_field=...</span> <span class="pre">/</span></code>.
When no declaration for a specific iteration is present, this iteration is
simply ignored.</p>
<p>All fields specified in the last iteration are written into the output file;
when no iteration is defined, all extracted fields are written. When
INCLUDE_ALL mode is active, all fields not explicitely specified in the
extraction step are also transfered in the output.</p>
<p>The order of fields in the output file depends on the selection mode and
on the declaration or not of additional processing iterations (besides
the in_field iteration):</p>
<dl>
<dt><strong>Only in_field iteration</strong></dt><dd><p>All modes</p>
<ol class="arabic simple">
<li><p>follows the order of input files processing</p></li>
</ol>
<p>INCLUDE_ONLY mode</p>
<ol class="arabic simple">
<li><p>follows the order of namelist appearance</p></li>
<li><p>for unspecified field characteristics, follows order from input</p></li>
</ol>
<p>INCLUDE_ALL, EXCLUDE mode</p>
<ol class="arabic simple">
<li><p>follows order from input</p></li>
</ol>
</dd>
<dt><strong>Additional processing iterations</strong></dt><dd><p>All modes</p>
<ol class="arabic simple">
<li><p>follows the order of namelist appearance</p></li>
<li><p>for unspecified field characteristics, follows order from input</p></li>
</ol>
<p>INCLUDE_ALL mode</p>
<ol class="arabic simple" start="3">
<li><p>additional fields are concatenated at output end</p></li>
</ol>
</dd>
</dl>
<p>A new field will be computed when it is not found in the previous
iteration, or when ‘use_operator=…’ is explicitely specified. All
parents of the field must be present in the previous iteration for this
operation to be successful. When one or more of the parents are undefined
for a specific validation date, the derived field will also be undefined
for this validation date.</p>
<p>The algorithm used to compute a new field can either be explicitely
specified by setting ‘use_operator=…’, or depend on the field name
and the product category. In this latter case, either a field with a
new name is computed (e.g. RELHUM from T and TD), or a field belonging
to a new product category but representing the same physical quantity
is computed (e.g. TOT_PREC probability from TOT_PREC eps members).</p>
<p>The list of operations defined by the name of the field to compute is
available in section 5.1 below.</p>
<p>The list of operations modifying the product category of the field
is:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>product category of:</p></th>
</tr>
<tr class="row-even"><th class="head"><p>parent field</p></th>
<th class="head"><p>new field</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>deterministic</p></td>
<td><p>neighbourhood probability</p></td>
</tr>
<tr class="row-even"><td><p>eps member</p></td>
<td><p>eps mean</p></td>
</tr>
<tr class="row-odd"><td><p>eps member</p></td>
<td><p>eps perturbation</p></td>
</tr>
<tr class="row-even"><td><p>eps member</p></td>
<td><p>eps spread</p></td>
</tr>
<tr class="row-odd"><td><p>eps member</p></td>
<td><p>eps standard deviation</p></td>
</tr>
<tr class="row-even"><td><p>eps member</p></td>
<td><p>eps quantile</p></td>
</tr>
<tr class="row-odd"><td><p>eps member</p></td>
<td><p>eps quantile difference</p></td>
</tr>
<tr class="row-even"><td><p>eps member</p></td>
<td><p>eps probability</p></td>
</tr>
</tbody>
</table>
</div>
<p>When not explicitely specified, or not defined in the active dictionary,
the characteristics of the computed field (e.g. product, level …) are
inherited from its main parent. A unique main parent is associated with
each operator.</p>
<p>For operators modifying the product category, the name of the main parent
is the same as the name of the field to compute, otherwise it is operator
dependent (see 5.1). In this latter case, the name of the main parent
must be declared, either in the active dictionary or as first argument
of ‘use_tag’.</p>
<p>Once all fields for the current iteration have been collected or
computed, an optional tag is associated to each one. Each field may
then be transformed by one or more operators, in the order <a class="reference internal" href="#Process.hoper" title="&amp;Process.hoper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.hoper</span></code></a>,
scale/offset, <a class="reference internal" href="#Process.voper" title="&amp;Process.voper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.voper</span></code></a>, <a class="reference internal" href="#Process.toper" title="&amp;Process.toper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.toper</span></code></a>, poper, <a class="reference internal" href="#Process.poper2" title="&amp;Process.poper2"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper2</span></code></a>, <a class="reference internal" href="#Process.poper3" title="&amp;Process.poper3"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper3</span></code></a>, poper4, <a class="reference internal" href="#Process.poper5" title="&amp;Process.poper5"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.poper5</span></code></a>,
spatial filter, new_field_id; the order is hardcoded and does not
depend on the way the namelist is defined. Each class of operators
is applied in turn to all the concerned fields; within a class the
processing order is arbitrary.</p>
<p>Before creating the final product, a last set of global operations
may be applied, in the order n to m operator (out_postproc_module),
re-gridding (out_regrid_target, <a class="reference internal" href="#Process.out_regrid_method" title="&amp;Process.out_regrid_method"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_regrid_method</span></code></a> …), re-setting
meta-information (originating_center, <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.production_status</span></code>, genproc_type,
auxiliary_metainfo, <a class="reference internal" href="#Process.out_model_name" title="&amp;Process.out_model_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_model_name</span></code></a>, <a class="reference internal" href="#Process.out_genproc_type" title="&amp;Process.out_genproc_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_genproc_type</span></code></a>,
out_product_category, <a class="reference internal" href="#Process.out_vertical_coordinate" title="&amp;Process.out_vertical_coordinate"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_vertical_coordinate</span></code></a>,
<a class="reference internal" href="#Process.out_auxiliary_metainfo" title="&amp;Process.out_auxiliary_metainfo"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_auxiliary_metainfo</span></code></a>, set_*), filtering data set
(out_filter_cst, out_filter_time).
Unlike the operators described in this section, with the exception
of the set_* operators, these transformations apply on all available
fields (in particular on passive fields when INCLUDE_ALL mode is set).</p>
<p>The limitation due to the pre-defined order of transformations within
a single iteration can be circumvented by implementing the desired
transformations with multiple iterations.</p>
<p><strong>First iteration:</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp1_field">
<span class="sig-name descname"><span class="pre">tmp1_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">or</span> <span class="pre">tag</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">transfer&gt;</span> <span class="pre">OR</span> <span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">compute&gt;</span></em><a class="headerlink" href="#Process.tmp1_field" title="Permalink to this definition">#</a></dt>
<dd><p>The specified field is either computed, when not available in the previous
iteration or when <a class="reference internal" href="#Process.use_operator" title="&amp;Process.use_operator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_operator</span></code></a> is set, or transfered from the previous
iteration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.use_tag">
<span class="sig-name descname"><span class="pre">use_tag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag1,</span> <span class="pre">tag2,</span> <span class="pre">...</span> <span class="pre">(string)&gt;</span></em><a class="headerlink" href="#Process.use_tag" title="Permalink to this definition">#</a></dt>
<dd><p>When ambiguous, the set of parents used to derive a specific field can be
restricted to the list defined by use_tag; this is required when multiple
instances of the same field are available in the previous iteration, or
when multiple sets of parent fields are supported by the associated operator.</p>
<p>The <a class="reference internal" href="#Process.use_tag" title="&amp;Process.use_tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_tag</span></code></a> list refers to tags of fields within the previous iteration.
If present, this list must be exhaustive, and its first element defines
the operator main parent. This is the only way to filter the list of parent
fields.</p>
<p>Besides the possibility to filter the list of parents, <a class="reference internal" href="#Process.use_tag" title="&amp;Process.use_tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_tag</span></code></a> may also
be used to re-define the main parent of the field to be computed; the
first element of <a class="reference internal" href="#Process.use_tag" title="&amp;Process.use_tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_tag</span></code></a> overrides any main parent set in the active
dictionary (but information on operator halo remains the one derived
from dictonary).</p>
<p>The <a class="reference internal" href="#Process.use_tag" title="&amp;Process.use_tag"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_tag</span></code></a> list will also filter the set of fields to transfer from
one iteration to the next, when no new field is computed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.use_operator">
<span class="sig-name descname"><span class="pre">use_operator</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">operator</span> <span class="pre">(string)&gt;</span></em><a class="headerlink" href="#Process.use_operator" title="Permalink to this definition">#</a></dt>
<dd><p>It is also possible to explicitely select the operator used to compute a
new field. In this case, <a class="reference internal" href="#Process.use_operator" title="&amp;Process.use_operator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_operator</span></code></a> must be associated with use_tag,
and the main parent of the derived field is defined to be the first
element of use_tag. The name of the operator must match the name of a
procedure available in one of the module <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.fxtr_operator_generic</span></code> or
<code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.fxtr_operator_specific</span></code> (see section 5.2 of this file for the list of
available operators; see also README.user.locale).</p>
<p>By specifying <a class="reference internal" href="#Process.use_operator" title="&amp;Process.use_operator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.use_operator</span></code></a> one forces the associated field to be
computed, even when readily available in the previous iteration.</p>
<p>A special operator, ‘__CREATE__’, is available to create a new field by
copying all meta-information of the main parent specified by use_tag.
The field to create must be defined in the active dictionary; all values
of the field are set to undefined. When used in conjunction with ‘moscor_mlr’,
this feature supports a MOS forecast by deriving a new field from a set
of predictors (see <code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.moscor_mlr</span></code>).</p>
</dd></dl>

<section id="id42">
<h3>Levels<a class="headerlink" href="#id42" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">level_class</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;type</span> <span class="pre">of</span> <span class="pre">level</span> <span class="pre">to</span> <span class="pre">consider&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'all'</span></em></dt>
<dd><p>The type of levels to consider may be explicitely specified; see <a class="reference internal" href="#Process.level_class" title="&amp;Process.level_class"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.level_class</span></code></a>
for more details.</p>
</dd></dl>

<p><strong>Levels, can be defined by …</strong></p>
<ul>
<li><p>a list of values</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">levlist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;level&gt;,&lt;level&gt;,...</span></em></dt>
<dd><p>-1 means all available levels</p>
</dd></dl>

</li>
<li><p>specifying start value, end value and increment</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">levmin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;min</span> <span class="pre">value&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">levmax</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;max</span> <span class="pre">value&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">levinc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;increment&gt;</span></em></dt>
<dd></dd></dl>

</li>
</ul>
<p>The associated physical units may be specified by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">level_units</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">units</span><span class="o">&gt;</span>  <span class="p">(</span><span class="n">optional</span><span class="p">)</span>
</pre></div>
</div>
<p>see <a class="reference internal" href="#Process.levlist" title="&amp;Process.levlist"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.levlist</span></code></a> for a full description.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>for fields defined on layers, the values specified by levlist or
levmin … always refer to the top surface of the layer (e.g. the
lowest layer of a field defined on hybrid model levels, with model
level indices increasing with height, is selected by setting levlist=2)</p>
</div>
<p><strong>EPS members, can be defined by …</strong></p>
<ul>
<li><p>a list of values</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epslist</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;member&gt;,&lt;member&gt;,...</span></em></dt>
<dd><p>-1 means all available members</p>
</dd></dl>

</li>
<li><p>specifying start value, end value and increment</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epsstart</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;start</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epsstop</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;stop</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">epsincr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;increment</span> <span class="pre">eps</span> <span class="pre">member&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em></dt>
<dd></dd></dl>

</li>
</ul>
</section>
<section id="product-category">
<h3>Product Category<a class="headerlink" href="#product-category" title="Permalink to this heading">#</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.product_category">
<span class="sig-name descname"><span class="pre">product_category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;product</span> <span class="pre">category&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'all'</span></em><a class="headerlink" href="#Process.product_category" title="Permalink to this definition">#</a></dt>
<dd><dl>
<dt>The product category may be explicitely specified; supported values are:</dt><dd><div class="line-block">
<div class="line">‘deterministic’,</div>
<div class="line">‘eps_control’, ‘eps_member’, ‘eps_mean’, ‘eps_perturbation’,</div>
<div class="line">‘eps_spread’,</div>
<div class="line">‘eps_standard_deviation’, ‘eps_standard_deviation_normed’,</div>
<div class="line">‘eps_quantile’, ‘eps_quantile_difference’,</div>
<div class="line">‘eps_probability’, ‘nbh_probability’, ‘stat_probability’,</div>
<div class="line">‘eps_probability_refdist’,</div>
<div class="line">‘eps_extreme_forecast_index’, ‘eps_shift_of_tail_index’,</div>
<div class="line">‘satellite’, ‘radar’,</div>
<div class="line">‘all’</div>
</div>
</dd>
</dl>
<p>It is necessary to explicitely specify the product category to trigger
the transformation of some fields from one category to another (e.g. to
compute EPS probability from EPS member). In this case additional
information may be required:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>parent field</p></th>
<th class="head"><p>new field</p></th>
<th class="head"><p>required information</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>eps_member</p></td>
<td><p>eps_mean</p></td>
<td><p><a class="reference internal" href="#Process.out_mode_weighted_member" title="&amp;Process.out_mode_weighted_member"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_weighted_member</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>eps_member</p></td>
<td><p>eps_perturbation</p></td>
<td><p><a class="reference internal" href="#Process.out_mode_weighted_member" title="&amp;Process.out_mode_weighted_member"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_weighted_member</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p>eps_member</p></td>
<td><p>eps_standard_deviation</p></td>
<td><p><a class="reference internal" href="#Process.out_mode_weighted_member" title="&amp;Process.out_mode_weighted_member"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_weighted_member</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>eps_member</p></td>
<td><p>eps_standard_deviation_normed</p></td>
<td><p><a class="reference internal" href="#Process.out_mode_weighted_member" title="&amp;Process.out_mode_weighted_member"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_weighted_member</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p>eps_member</p></td>
<td><p>eps_quantile</p></td>
<td><div class="line-block">
<div class="line"><a class="reference internal" href="#Process.quantile" title="&amp;Process.quantile"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.quantile</span></code></a> (one value)</div>
<div class="line"><a class="reference internal" href="#Process.out_mode_weighted_member" title="&amp;Process.out_mode_weighted_member"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_weighted_member</span></code></a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>eps_member</p></td>
<td><p>eps_quantile_difference</p></td>
<td><div class="line-block">
<div class="line"><a class="reference internal" href="#Process.quantile" title="&amp;Process.quantile"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.quantile</span></code></a> (2 values)</div>
<div class="line"><a class="reference internal" href="#Process.out_mode_weighted_member" title="&amp;Process.out_mode_weighted_member"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_weighted_member</span></code></a></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>eps_member</p></td>
<td><p>eps_probability</p></td>
<td><div class="line-block">
<div class="line"><a class="reference internal" href="#Process.prob_interval" title="&amp;Process.prob_interval"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.prob_interval</span></code></a> or</div>
<div class="line"><a class="reference internal" href="#Process.prob_tlow" title="&amp;Process.prob_tlow"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.prob_tlow</span></code></a> or/and <a class="reference internal" href="#Process.prob_thigh" title="&amp;Process.prob_thigh"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.prob_thigh</span></code></a></div>
<div class="line"><a class="reference internal" href="#Process.out_mode_weighted_member" title="&amp;Process.out_mode_weighted_member"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_mode_weighted_member</span></code></a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>deterministic</p></td>
<td><p>neighbourhood_probability</p></td>
<td><div class="line-block">
<div class="line"><a class="reference internal" href="#Process.prob_interval" title="&amp;Process.prob_interval"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.prob_interval</span></code></a> or</div>
<div class="line"><a class="reference internal" href="#Process.prob_tlow" title="&amp;Process.prob_tlow"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.prob_tlow</span></code></a> or/and <a class="reference internal" href="#Process.prob_thigh" title="&amp;Process.prob_thigh"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.prob_thigh</span></code></a></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>Some remarks on the way these quantities are computed:</p>
<dl class="simple">
<dt>eps perturbation       :</dt><dd><p>difference between member and eps mean</p>
</dd>
<dt>eps spread             :</dt><dd><p>computed as “eps standard deviation”
(with out_mode_weighted_member=.false.)</p>
</dd>
<dt>eps standard deviation :</dt><dd><p>corrected sample standard deviation</p>
</dd>
<dt>eps standard deviation normed :</dt><dd><p>normalized with respect to EPS mean, set to undefined when the EPS mean is too close to 0</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>other PDF characteristics can also be computed by using special
quantile values:</p>
<ul class="simple">
<li><p>the minimum of the ensemble by setting the quantile to 0.</p></li>
<li><p>the maximum of the ensemble by setting the quantile to  100.</p></li>
<li><p>the median of the ensemble by setting the quantile to  50.</p></li>
</ul>
</div>
</dd></dl>

</section>
<section id="id43">
<h3>PDF Characteristics<a class="headerlink" href="#id43" title="Permalink to this heading">#</a></h3>
<p>Characteristics of PDF related fields are specified by:</p>
<ul>
<li><p>for probability</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">prob_interval</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;[x,y],</span> <span class="pre">[x,y[,</span> <span class="pre">]x,y]</span> <span class="pre">or</span> <span class="pre">]x,y[,</span> <span class="pre">as</span> <span class="pre">string&gt;</span></em></dt>
<dd><p>interval of values, expressed in field units</p>
<p>with  x and y being either real numbers, or
<code class="docutils literal notranslate"><span class="pre">'-infinite'</span></code> or <code class="docutils literal notranslate"><span class="pre">'infinite'</span></code></p>
</dd></dl>

</li>
<li><p>for probability, depreciated</p>
<p>interval lower and upper boundaries, expressed in field units, the boundaries are <em>not</em> included in the interval</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">prob_tlow</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;interval</span> <span class="pre">lower</span> <span class="pre">threshold</span> <span class="pre">(real)&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-infinity</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">prob_thigh</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;interval</span> <span class="pre">higher</span> <span class="pre">threshold&gt;</span> <span class="pre">(real,</span> <span class="pre">default</span> <span class="pre">is</span> <span class="pre">plus</span> <span class="pre">infinite)</span></em></dt>
<dd></dd></dl>

</li>
<li><p>for quantile</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">quantile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;quantile,</span> <span class="pre">real&gt;</span></em></dt>
<dd><p>a value for a quantile, betwen 0 and 100</p>
</dd></dl>

</li>
</ul>
<p>OR</p>
<ul>
<li><p>for difference of quantiles</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">quantile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;quantile1,real&gt;,</span> <span class="pre">&lt;quantile2,real&gt;</span></em></dt>
<dd><p>two quantile values, both between 0 and 100</p>
</dd></dl>

</li>
<li><p>for probability with respect to a reference distribution</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">ref_quantile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;order</span> <span class="pre">of</span> <span class="pre">reference</span> <span class="pre">quantile,</span> <span class="pre">integer&gt;</span> <span class="pre">[,&lt;number</span> <span class="pre">of</span> <span class="pre">reference</span> <span class="pre">quantile,</span> <span class="pre">integer&gt;]</span></em></dt>
<dd><p>the order of the quantile in the reference distribution and
the total number of quantiles used to represent the reference
distribution</p>
</dd></dl>

</li>
<li><p>for shift of tail index</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">efi_order</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;percentile</span> <span class="pre">fcst,</span> <span class="pre">integer&gt;[,&lt;percentile</span> <span class="pre">climate,</span> <span class="pre">integer&gt;]</span></em></dt>
<dd></dd></dl>

</li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">tag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag</span> <span class="pre">associated</span> <span class="pre">with</span> <span class="pre">field</span> <span class="pre">(string,</span> <span class="pre">&lt;=</span> <span class="pre">24</span> <span class="pre">characters)&gt;</span></em></dt>
<dd></dd></dl>

</section>
<section id="transformations">
<h3>Transformations<a class="headerlink" href="#transformations" title="Permalink to this heading">#</a></h3>
<p>Available transformations are …</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">hoper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;horizontal</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">hoper_mask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;associated</span> <span class="pre">logical</span> <span class="pre">condition&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">scale</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;scaling</span> <span class="pre">factor&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">offset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;offset</span> <span class="pre">factor&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">voper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;vertical</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">voper_lev</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;level&gt;,&lt;level&gt;,...</span>&#160; <span class="pre">(target</span> <span class="pre">levels</span> <span class="pre">for</span> <span class="pre">vertical</span> <span class="pre">operator)</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">voper_lev_units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;units&gt;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">(associated</span> <span class="pre">physical</span> <span class="pre">units,</span> <span class="pre">optional;</span> <span class="pre">see</span> <span class="pre">level_units)</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">voper_use_tag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;tag1,</span> <span class="pre">tag2,</span> <span class="pre">...&gt;</span>&#160;&#160;&#160; <span class="pre">(optional;</span> <span class="pre">tag</span> <span class="pre">of</span> <span class="pre">auxiliary</span> <span class="pre">fields)</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">toper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;time</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">toper_mask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;associated</span> <span class="pre">logical</span> <span class="pre">condition&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">poper</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">poper2</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">poper3</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">poper4</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">poper5</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;point</span> <span class="pre">operator&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">new_field_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">where</span> <span class="pre">&lt;string&gt;</span> <span class="pre">=</span> <span class="pre">name[,units]</span></em></dt>
<dd></dd></dl>

<p>and also, but only if it is the last processing iteration</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_reference_date</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;integer,</span> <span class="pre">yyyymmddhhmm&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_trange_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_product_category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_epsmember_identity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;member</span> <span class="pre">value&gt;[,&lt;number</span> <span class="pre">of</span> <span class="pre">members&gt;]</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_genproc_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_auxiliary_metainfo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;sring&gt;[,&lt;string&gt;</span> <span class="pre">...]</span> <span class="pre">(each</span> <span class="pre">string</span> <span class="pre">expressed</span> <span class="pre">as</span> <span class="pre">key=value)</span></em></dt>
<dd></dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note about the usage of <a class="reference internal" href="#Process.hoper" title="&amp;Process.hoper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.hoper</span></code></a> in one of the generate field iteration:
data reduction from full field to the user defined subset is only done
after the last horizontal transformation has been applied. This has as
consequences:</p>
<ol class="arabic simple">
<li><p>to optimize memory and performance, it is advised to apply this
type of transformation as soon as possible in the generation process.</p></li>
</ol>
</div>
</section>
<section id="further-iterations">
<h3>Further Iterations<a class="headerlink" href="#further-iterations" title="Permalink to this heading">#</a></h3>
<dl>
<dt><strong>Second iteration:</strong></dt><dd><dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp2_field">
<span class="sig-name descname"><span class="pre">tmp2_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">or</span> <span class="pre">tag</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">transfer&gt;</span> <span class="pre">OR</span> <span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">compute&gt;</span></em><a class="headerlink" href="#Process.tmp2_field" title="Permalink to this definition">#</a></dt>
<dd><p>The same set of operators are available as for the second iteration
(see above).</p>
</dd></dl>

</dd>
<dt><strong>Third iteration:</strong></dt><dd><dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp3_field">
<span class="sig-name descname"><span class="pre">tmp3_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">or</span> <span class="pre">tag</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">transfer&gt;</span> <span class="pre">OR</span> <span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">compute&gt;</span></em><a class="headerlink" href="#Process.tmp3_field" title="Permalink to this definition">#</a></dt>
<dd><p>The same set of operators are available as for the second iteration
(see above).</p>
</dd></dl>

</dd>
<dt><strong>Fourth iteration:</strong></dt><dd><dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp4_field">
<span class="sig-name descname"><span class="pre">tmp4_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">or</span> <span class="pre">tag</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">transfer&gt;</span> <span class="pre">OR</span> <span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">compute&gt;</span></em><a class="headerlink" href="#Process.tmp4_field" title="Permalink to this definition">#</a></dt>
<dd><p>The same set of operators are available as for the second iteration
(see above).</p>
</dd></dl>

</dd>
<dt><strong>Fifth iteration:</strong></dt><dd><dl class="py attribute">
<dt class="sig sig-object py" id="Process.tmp5_field">
<span class="sig-name descname"><span class="pre">tmp5_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">or</span> <span class="pre">tag</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">transfer&gt;</span> <span class="pre">OR</span> <span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">compute&gt;</span></em><a class="headerlink" href="#Process.tmp5_field" title="Permalink to this definition">#</a></dt>
<dd><p>The same set of operators are available as for the second iteration
(see above).</p>
</dd></dl>

</dd>
<dt><strong>Sixth iteration:</strong></dt><dd><blockquote>
<div><dl class="py attribute">
<dt class="sig sig-object py" id="Process.out_field">
<span class="sig-name descname"><span class="pre">out_field</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;name</span> <span class="pre">or</span> <span class="pre">tag</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">transfer&gt;</span> <span class="pre">OR</span> <span class="pre">&lt;name</span> <span class="pre">of</span> <span class="pre">field</span> <span class="pre">to</span> <span class="pre">compute&gt;</span></em><a class="headerlink" href="#Process.out_field" title="Permalink to this definition">#</a></dt>
<dd><p>The same set of operators are available as for the second iteration
(see above).</p>
</dd></dl>

</div></blockquote>
</dd>
</dl>
</section>
</section>
<section id="output-related-field-characteristics">
<span id="section-4-3-6"></span><h2>Output related field characteristics<a class="headerlink" href="#output-related-field-characteristics" title="Permalink to this heading">#</a></h2>
<p>Some field related output characteristics can be defined in the last processing
iteration (incl. the extract iteration when no processing iteration is defined).
These settings always override any global setting defined for the concerned
output. Most of these operations are limited to some types of output (see
<a class="reference internal" href="../output.html#chapter-7"><span class="std std-ref">Description of output format</span></a> for the details).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_undefcode">
<span class="sig-name descname"><span class="pre">set_undefcode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;missing</span> <span class="pre">value</span> <span class="pre">code,</span> <span class="pre">real&gt;</span></em><a class="headerlink" href="#Process.set_undefcode" title="Permalink to this definition">#</a></dt>
<dd><p>code used to mark undefined values, override value of <a class="reference internal" href="#Process.out_type_undefcode" title="&amp;Process.out_type_undefcode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_undefcode</span></code></a>.</p>
<p>One must be cautious when using set_undefcode, because this value is not declared
explicitely in the output file, and may differ from the global undef code used
for the concerned output file.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_packing">
<span class="sig-name descname"><span class="pre">set_packing</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;packing</span> <span class="pre">method,</span> <span class="pre">string&gt;</span></em><a class="headerlink" href="#Process.set_packing" title="Permalink to this definition">#</a></dt>
<dd><p>packing algorithm (see <a class="reference internal" href="#Process.out_type_packing" title="&amp;Process.out_type_packing"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_packing</span></code></a> for a description).
When set, override out_type_packing.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_description">
<span class="sig-name descname"><span class="pre">set_description</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em><a class="headerlink" href="#Process.set_description" title="Permalink to this definition">#</a></dt>
<dd><p>set the field description (otherwise this value is taken from the active dictionary).
This information is used at the following places:</p>
<ul class="simple">
<li><p>long name in NETCDF output (e.g. used for plot labelling),</p></li>
<li><p>part of description string in table of content associated
with GRIB1, GRIB2, and NETCDF output.</p></li>
<li><p>field description in ASCII_TABLE extra header</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.set_comment">
<span class="sig-name descname"><span class="pre">set_comment</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;string&gt;</span></em><a class="headerlink" href="#Process.set_comment" title="Permalink to this definition">#</a></dt>
<dd><p>associate a comment with the current field; a comment is any freely definable string, and is used at the following place:</p>
<ul class="simple">
<li><p>field attribute ‘comment’ in NETCDF output.</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Process.use_alternate_code">
<span class="sig-name descname"><span class="pre">use_alternate_code</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;logical&gt;</span></em><a class="headerlink" href="#Process.use_alternate_code" title="Permalink to this definition">#</a></dt>
<dd><p>when set to true, alternate GRIB 1 code found in active
dictionary will be used; alternate code is defined in the
dictionary by setting the attributes ‘alternateTable’ and
‘alternateParameter’. When no alternate code is defined,
the usual code is applied.
The same effect can be obtained by setting to true the
key <a class="reference internal" href="#Process.out_type_alternate_code" title="&amp;Process.out_type_alternate_code"><code class="xref py py-attr docutils literal notranslate"><span class="pre">&amp;Process.out_type_alternate_code</span></code></a>, but for all fields of the
concerned output.</p>
</dd></dl>

</section>
<section id="masks">
<span id="section-4-3-7"></span><h2>Masks<a class="headerlink" href="#masks" title="Permalink to this heading">#</a></h2>
<p>Some operators support the specification of an auxiliary field representing
a logical condition, a so-called ‘mask’.</p>
<p>A mask is specified by:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">token</span> <span class="pre">&amp;&amp;</span> <span class="pre">token</span> <span class="pre">&amp;&amp;</span> <span class="pre">...</span></code>    (logical AND)</p></li>
</ul>
<p>or</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">token</span> <span class="pre">||</span> <span class="pre">token</span> <span class="pre">||</span> <span class="pre">...</span></code>    (logical OR)</p></li>
</ul>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">token</span></code> is one of :</dt><dd><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">tag&lt;value</span></code>, <code class="docutils literal notranslate"><span class="pre">tag&lt;=value</span></code>, <code class="docutils literal notranslate"><span class="pre">tag=value</span></code>, <code class="docutils literal notranslate"><span class="pre">tag&gt;value</span></code>, <code class="docutils literal notranslate"><span class="pre">tag&gt;=value</span></code>, <code class="docutils literal notranslate"><span class="pre">tag!value</span></code>,</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;value</span></code>,    <code class="docutils literal notranslate"><span class="pre">&lt;=value</span></code>,    <code class="docutils literal notranslate"><span class="pre">=value</span></code>,    <code class="docutils literal notranslate"><span class="pre">&gt;value</span></code>,    <code class="docutils literal notranslate"><span class="pre">&gt;=value</span></code>,    <code class="docutils literal notranslate"><span class="pre">!value</span></code></div>
</div>
</dd>
</dl>
<ul class="simple">
<li><p>‘!’ stands for the comparison operator ‘not equal’</p></li>
<li><p>tag is the tag or the name of a field available in
the current iteration, which is used to construct
the logical condition;</p></li>
<li><p>the condition refers to the current field when tag
is missing;</p></li>
<li><p>by convention the condition is evaluated to false
where the field is undefined;</p></li>
<li><p>fields on staggered grid are also supported (in this
case, grid points on base grid and on staggered grid
are associated).</p></li>
</ul>
<p>The field used to evaluate a specific condition must either be fully
specified by the value of tag, or by the value of tag and the
characteristics of the currently processed field (level characteristics
and/or eps characteristics).</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../operators.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Operators to compute new fields</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="modelSpec.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;ModelSpecification</span></code></div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Jean-Marie Bettems, Tierry Hörmann
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">&amp;Process</span></code></a><ul>
<li><a class="reference internal" href="#module-Process">Introduction</a></li>
<li><a class="reference internal" href="#input-files">Input files</a><ul>
<li><a class="reference internal" href="#Process.in_file"><code class="docutils literal notranslate"><span class="pre">in_file</span></code></a></li>
<li><a class="reference internal" href="#time-loop">time loop</a><ul>
<li><a class="reference internal" href="#Process.tlist"><code class="docutils literal notranslate"><span class="pre">tlist</span></code></a></li>
<li><a class="reference internal" href="#Process.tstart"><code class="docutils literal notranslate"><span class="pre">tstart</span></code></a></li>
<li><a class="reference internal" href="#Process.tstop"><code class="docutils literal notranslate"><span class="pre">tstop</span></code></a></li>
<li><a class="reference internal" href="#Process.tincr"><code class="docutils literal notranslate"><span class="pre">tincr</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#eps-loop">eps loop</a><ul>
<li><a class="reference internal" href="#Process.epslist"><code class="docutils literal notranslate"><span class="pre">epslist</span></code></a></li>
<li><a class="reference internal" href="#Process.epsstart"><code class="docutils literal notranslate"><span class="pre">epsstart</span></code></a></li>
<li><a class="reference internal" href="#Process.epsstop"><code class="docutils literal notranslate"><span class="pre">epsstop</span></code></a></li>
<li><a class="reference internal" href="#Process.epsincr"><code class="docutils literal notranslate"><span class="pre">epsincr</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-characteristics">other characteristics</a><ul>
<li><a class="reference internal" href="#Process.in_type"><code class="docutils literal notranslate"><span class="pre">in_type</span></code></a></li>
<li><a class="reference internal" href="#Process.in_read_first"><code class="docutils literal notranslate"><span class="pre">in_read_first</span></code></a></li>
<li><a class="reference internal" href="#Process.in_read_order"><code class="docutils literal notranslate"><span class="pre">in_read_order</span></code></a></li>
<li><a class="reference internal" href="#Process.in_dictionary"><code class="docutils literal notranslate"><span class="pre">in_dictionary</span></code></a></li>
<li><a class="reference internal" href="#Process.default_product_category"><code class="docutils literal notranslate"><span class="pre">default_product_category</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#output-files">Output files</a><ul>
<li><a class="reference internal" href="#Process.out_file"><code class="docutils literal notranslate"><span class="pre">out_file</span></code></a></li>
<li><a class="reference internal" href="#time-and-eps-loop">time and eps loop</a><ul>
<li><a class="reference internal" href="#Process.out_tstart"><code class="docutils literal notranslate"><span class="pre">out_tstart</span></code></a></li>
<li><a class="reference internal" href="#Process.out_tstop"><code class="docutils literal notranslate"><span class="pre">out_tstop</span></code></a></li>
<li><a class="reference internal" href="#Process.out_tincr"><code class="docutils literal notranslate"><span class="pre">out_tincr</span></code></a></li>
<li><a class="reference internal" href="#Process.tlag"><code class="docutils literal notranslate"><span class="pre">tlag</span></code></a></li>
<li><a class="reference internal" href="#Process.out_group_eps"><code class="docutils literal notranslate"><span class="pre">out_group_eps</span></code></a></li>
<li><a class="reference internal" href="#Process.out_shuffle_time"><code class="docutils literal notranslate"><span class="pre">out_shuffle_time</span></code></a></li>
<li><a class="reference internal" href="#Process.out_shuffle_eps"><code class="docutils literal notranslate"><span class="pre">out_shuffle_eps</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#in-field-manipulation">in field manipulation</a><ul>
<li><a class="reference internal" href="#Process.in_duplicate_field"><code class="docutils literal notranslate"><span class="pre">in_duplicate_field</span></code></a></li>
<li><a class="reference internal" href="#Process.out_autotag"><code class="docutils literal notranslate"><span class="pre">out_autotag</span></code></a></li>
<li><a class="reference internal" href="#Process.in_size_field"><code class="docutils literal notranslate"><span class="pre">in_size_field</span></code></a></li>
<li><a class="reference internal" href="#Process.in_size_vdate"><code class="docutils literal notranslate"><span class="pre">in_size_vdate</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#controling-load-balance">controling load balance</a><ul>
<li><a class="reference internal" href="#Process.out_cost"><code class="docutils literal notranslate"><span class="pre">out_cost</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#re-gridding">re-gridding</a><ul>
<li><a class="reference internal" href="#Process.in_regrid_target"><code class="docutils literal notranslate"><span class="pre">in_regrid_target</span></code></a></li>
<li><a class="reference internal" href="#Process.in_regrid_method"><code class="docutils literal notranslate"><span class="pre">in_regrid_method</span></code></a></li>
<li><a class="reference internal" href="#Process.in_regrid_all"><code class="docutils literal notranslate"><span class="pre">in_regrid_all</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#ensembles">Ensembles</a><ul>
<li><a class="reference internal" href="#Process.epsgroup"><code class="docutils literal notranslate"><span class="pre">epsgroup</span></code></a></li>
<li><a class="reference internal" href="#Process.epsgroup_size"><code class="docutils literal notranslate"><span class="pre">epsgroup_size</span></code></a></li>
<li><a class="reference internal" href="#Process.epscomposed_size"><code class="docutils literal notranslate"><span class="pre">epscomposed_size</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#global-operations">Global operations</a><ul>
<li><a class="reference internal" href="#Process.out_postproc_module"><code class="docutils literal notranslate"><span class="pre">out_postproc_module</span></code></a></li>
<li><a class="reference internal" href="#Process.out_regrid_target"><code class="docutils literal notranslate"><span class="pre">out_regrid_target</span></code></a></li>
<li><a class="reference internal" href="#Process.out_regrid_method"><code class="docutils literal notranslate"><span class="pre">out_regrid_method</span></code></a></li>
<li><a class="reference internal" href="#Process.out_regrid_method_distance"><code class="docutils literal notranslate"><span class="pre">out_regrid_method_distance</span></code></a></li>
<li><a class="reference internal" href="#Process.out_regrid_topography"><code class="docutils literal notranslate"><span class="pre">out_regrid_topography</span></code></a></li>
<li><a class="reference internal" href="#Process.out_regrid_method_filter"><code class="docutils literal notranslate"><span class="pre">out_regrid_method_filter</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#meta-information">Meta-information</a><ul>
<li><a class="reference internal" href="#Process.out_model_name"><code class="docutils literal notranslate"><span class="pre">out_model_name</span></code></a></li>
<li><a class="reference internal" href="#Process.out_genproc_type"><code class="docutils literal notranslate"><span class="pre">out_genproc_type</span></code></a></li>
<li><a class="reference internal" href="#Process.out_product_category"><code class="docutils literal notranslate"><span class="pre">out_product_category</span></code></a></li>
<li><a class="reference internal" href="#Process.out_vertical_coordinate"><code class="docutils literal notranslate"><span class="pre">out_vertical_coordinate</span></code></a></li>
<li><a class="reference internal" href="#Process.out_auxiliary_metainfo"><code class="docutils literal notranslate"><span class="pre">out_auxiliary_metainfo</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#fields-filtering">Fields filtering</a><ul>
<li><a class="reference internal" href="#Process.out_filter_cst"><code class="docutils literal notranslate"><span class="pre">out_filter_cst</span></code></a></li>
<li><a class="reference internal" href="#Process.out_filter_time"><code class="docutils literal notranslate"><span class="pre">out_filter_time</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#algorithm-supports">Algorithm supports</a><ul>
<li><a class="reference internal" href="#Process.out_mode_mismemb_limit"><code class="docutils literal notranslate"><span class="pre">out_mode_mismemb_limit</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_mismemb_abort"><code class="docutils literal notranslate"><span class="pre">out_mode_mismemb_abort</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_weighted_member"><code class="docutils literal notranslate"><span class="pre">out_mode_weighted_member</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_normalized_stdev"><code class="docutils literal notranslate"><span class="pre">out_mode_normalized_stdev</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_rttov_cloud"><code class="docutils literal notranslate"><span class="pre">out_mode_rttov_cloud</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_ignore_wloading"><code class="docutils literal notranslate"><span class="pre">out_mode_ignore_wloading</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_hcor_dhmin"><code class="docutils literal notranslate"><span class="pre">out_mode_hcor_dhmin</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_dvt_scale"><code class="docutils literal notranslate"><span class="pre">out_mode_dvt_scale</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_rh_clipped"><code class="docutils literal notranslate"><span class="pre">out_mode_rh_clipped</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_hi_adjusted"><code class="docutils literal notranslate"><span class="pre">out_mode_hi_adjusted</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_sun_topo"><code class="docutils literal notranslate"><span class="pre">out_mode_sun_topo</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_h0cl_extrapolate"><code class="docutils literal notranslate"><span class="pre">out_mode_h0cl_extrapolate</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_tw_iterative"><code class="docutils literal notranslate"><span class="pre">out_mode_tw_iterative</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_nbhprob_shape"><code class="docutils literal notranslate"><span class="pre">out_mode_nbhprob_shape</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_nbhprob_rxy"><code class="docutils literal notranslate"><span class="pre">out_mode_nbhprob_rxy</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_nbhprob_rt"><code class="docutils literal notranslate"><span class="pre">out_mode_nbhprob_rt</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_nbhprob_rfade"><code class="docutils literal notranslate"><span class="pre">out_mode_nbhprob_rfade</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_kfcor_na"><code class="docutils literal notranslate"><span class="pre">out_mode_kfcor_na</span></code></a></li>
<li><a class="reference internal" href="#Process.out_mode_moscor_na"><code class="docutils literal notranslate"><span class="pre">out_mode_moscor_na</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#out-type">Out type</a><ul>
<li><a class="reference internal" href="#Process.out_type"><code class="docutils literal notranslate"><span class="pre">out_type</span></code></a></li>
<li><a class="reference internal" href="#out-type-attributes-acting-on-file-production">Out type attributes acting on file production</a><ul>
<li><a class="reference internal" href="#Process.out_type_replace"><code class="docutils literal notranslate"><span class="pre">out_type_replace</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_justontime"><code class="docutils literal notranslate"><span class="pre">out_type_justontime</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_snapshot"><code class="docutils literal notranslate"><span class="pre">out_type_snapshot</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_toc"><code class="docutils literal notranslate"><span class="pre">out_type_toc</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#out-type-attributes-acting-on-data">Out type attributes acting on data</a><ul>
<li><a class="reference internal" href="#Process.out_type_dupcst"><code class="docutils literal notranslate"><span class="pre">out_type_dupcst</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_noundef"><code class="docutils literal notranslate"><span class="pre">out_type_noundef</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_undefcode"><code class="docutils literal notranslate"><span class="pre">out_type_undefcode</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_scanmode"><code class="docutils literal notranslate"><span class="pre">out_type_scanmode</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_packing"><code class="docutils literal notranslate"><span class="pre">out_type_packing</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_ncformat"><code class="docutils literal notranslate"><span class="pre">out_type_ncformat</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_ncunlimitedtime"><code class="docutils literal notranslate"><span class="pre">out_type_ncunlimitedtime</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_ncdeflate"><code class="docutils literal notranslate"><span class="pre">out_type_ncdeflate</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_ncshuffle"><code class="docutils literal notranslate"><span class="pre">out_type_ncshuffle</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_simplenc"><code class="docutils literal notranslate"><span class="pre">out_type_simplenc</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_nodegeneratedim"><code class="docutils literal notranslate"><span class="pre">out_type_nodegeneratedim</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#out-type-attributes-acting-on-meta-data">Out type attributes acting on meta-data</a><ul>
<li><a class="reference internal" href="#Process.out_type_nousetag"><code class="docutils literal notranslate"><span class="pre">out_type_nousetag</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_alternate_name"><code class="docutils literal notranslate"><span class="pre">out_type_alternate_name</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_autoncname"><code class="docutils literal notranslate"><span class="pre">out_type_autoncname</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_alternate_code"><code class="docutils literal notranslate"><span class="pre">out_type_alternate_code</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_transcode"><code class="docutils literal notranslate"><span class="pre">out_type_transcode</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_timebnds"><code class="docutils literal notranslate"><span class="pre">out_type_timebnds</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_prefered_tunits"><code class="docutils literal notranslate"><span class="pre">out_type_prefered_tunits</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_nogridincr"><code class="docutils literal notranslate"><span class="pre">out_type_nogridincr</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_novcoord"><code class="docutils literal notranslate"><span class="pre">out_type_novcoord</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_stdlongitude"><code class="docutils literal notranslate"><span class="pre">out_type_stdlongitude</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_mapcst"><code class="docutils literal notranslate"><span class="pre">out_type_mapcst</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#out-type-attributes-acting-on-data-format">Out type attributes acting on data format</a><ul>
<li><a class="reference internal" href="#Process.out_type_fmt"><code class="docutils literal notranslate"><span class="pre">out_type_fmt</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_template"><code class="docutils literal notranslate"><span class="pre">out_type_template</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_nomatch_action"><code class="docutils literal notranslate"><span class="pre">out_type_nomatch_action</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_file_header"><code class="docutils literal notranslate"><span class="pre">out_type_file_header</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_text1"><code class="docutils literal notranslate"><span class="pre">out_type_text1</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_text2"><code class="docutils literal notranslate"><span class="pre">out_type_text2</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_depreciated"><code class="docutils literal notranslate"><span class="pre">out_type_depreciated</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_verbosity"><code class="docutils literal notranslate"><span class="pre">out_type_verbosity</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_mminfo"><code class="docutils literal notranslate"><span class="pre">out_type_mminfo</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_pdfinfo"><code class="docutils literal notranslate"><span class="pre">out_type_pdfinfo</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_epsminfo"><code class="docutils literal notranslate"><span class="pre">out_type_epsminfo</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_prodinfo"><code class="docutils literal notranslate"><span class="pre">out_type_prodinfo</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_locinfo"><code class="docutils literal notranslate"><span class="pre">out_type_locinfo</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_separator"><code class="docutils literal notranslate"><span class="pre">out_type_separator</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_cheader"><code class="docutils literal notranslate"><span class="pre">out_type_cheader</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_fusedt"><code class="docutils literal notranslate"><span class="pre">out_type_fusedt</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_line_label"><code class="docutils literal notranslate"><span class="pre">out_type_line_label</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_legend"><code class="docutils literal notranslate"><span class="pre">out_type_legend</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#out-type-attributes-for-special-situations">Out type attributes for special situations</a><ul>
<li><a class="reference internal" href="#Process.out_type_lagranto"><code class="docutils literal notranslate"><span class="pre">out_type_lagranto</span></code></a></li>
<li><a class="reference internal" href="#Process.out_type_dwhhack"><code class="docutils literal notranslate"><span class="pre">out_type_dwhhack</span></code></a></li>
<li><a class="reference internal" href="#Process.frame_ngp"><code class="docutils literal notranslate"><span class="pre">frame_ngp</span></code></a></li>
<li><a class="reference internal" href="#Process.imin"><code class="docutils literal notranslate"><span class="pre">imin</span></code></a></li>
<li><a class="reference internal" href="#Process.imax"><code class="docutils literal notranslate"><span class="pre">imax</span></code></a></li>
<li><a class="reference internal" href="#Process.jmin"><code class="docutils literal notranslate"><span class="pre">jmin</span></code></a></li>
<li><a class="reference internal" href="#Process.jmax"><code class="docutils literal notranslate"><span class="pre">jmax</span></code></a></li>
<li><a class="reference internal" href="#Process.iinc"><code class="docutils literal notranslate"><span class="pre">iinc</span></code></a></li>
<li><a class="reference internal" href="#Process.jinc"><code class="docutils literal notranslate"><span class="pre">jinc</span></code></a></li>
<li><a class="reference internal" href="#Process.region_bbox"><code class="docutils literal notranslate"><span class="pre">region_bbox</span></code></a></li>
<li><a class="reference internal" href="#Process.ilist"><code class="docutils literal notranslate"><span class="pre">ilist</span></code></a></li>
<li><a class="reference internal" href="#Process.jlist"><code class="docutils literal notranslate"><span class="pre">jlist</span></code></a></li>
<li><a class="reference internal" href="#Process.locgroup"><code class="docutils literal notranslate"><span class="pre">locgroup</span></code></a></li>
<li><a class="reference internal" href="#Process.loclist"><code class="docutils literal notranslate"><span class="pre">loclist</span></code></a></li>
<li><a class="reference internal" href="#Process.slice"><code class="docutils literal notranslate"><span class="pre">slice</span></code></a></li>
<li><a class="reference internal" href="#Process.in_filter"><code class="docutils literal notranslate"><span class="pre">in_filter</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp1_filter"><code class="docutils literal notranslate"><span class="pre">tmp1_filter</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp2_filter"><code class="docutils literal notranslate"><span class="pre">tmp2_filter</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp3_filter"><code class="docutils literal notranslate"><span class="pre">tmp3_filter</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp4_filter"><code class="docutils literal notranslate"><span class="pre">tmp4_filter</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp5_filter"><code class="docutils literal notranslate"><span class="pre">tmp5_filter</span></code></a></li>
<li><a class="reference internal" href="#Process.out_filter"><code class="docutils literal notranslate"><span class="pre">out_filter</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#extracted-fields">Extracted fields</a><ul>
<li><a class="reference internal" href="#Process.selection_mode"><code class="docutils literal notranslate"><span class="pre">selection_mode</span></code></a></li>
<li><a class="reference internal" href="#Process.in_field"><code class="docutils literal notranslate"><span class="pre">in_field</span></code></a></li>
<li><a class="reference internal" href="#Process.skip_time"><code class="docutils literal notranslate"><span class="pre">skip_time</span></code></a></li>
<li><a class="reference internal" href="#Process.keep_time"><code class="docutils literal notranslate"><span class="pre">keep_time</span></code></a></li>
<li><a class="reference internal" href="#Process.expect_missing_field"><code class="docutils literal notranslate"><span class="pre">expect_missing_field</span></code></a></li>
<li><a class="reference internal" href="#Process.ignore_model_identity"><code class="docutils literal notranslate"><span class="pre">ignore_model_identity</span></code></a></li>
<li><a class="reference internal" href="#Process.ignore_vcoord"><code class="docutils literal notranslate"><span class="pre">ignore_vcoord</span></code></a></li>
<li><a class="reference internal" href="#Process.reference_field"><code class="docutils literal notranslate"><span class="pre">reference_field</span></code></a></li>
<li><a class="reference internal" href="#Process.level_class"><code class="docutils literal notranslate"><span class="pre">level_class</span></code></a></li>
<li><a class="reference internal" href="#levels">Levels</a><ul>
<li><a class="reference internal" href="#Process.levlist"><code class="docutils literal notranslate"><span class="pre">levlist</span></code></a></li>
<li><a class="reference internal" href="#Process.levmin"><code class="docutils literal notranslate"><span class="pre">levmin</span></code></a></li>
<li><a class="reference internal" href="#Process.levmax"><code class="docutils literal notranslate"><span class="pre">levmax</span></code></a></li>
<li><a class="reference internal" href="#Process.levinc"><code class="docutils literal notranslate"><span class="pre">levinc</span></code></a></li>
<li><a class="reference internal" href="#Process.level_units"><code class="docutils literal notranslate"><span class="pre">level_units</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pdf-characteristics">PDF Characteristics</a><ul>
<li><a class="reference internal" href="#Process.prob_interval"><code class="docutils literal notranslate"><span class="pre">prob_interval</span></code></a></li>
<li><a class="reference internal" href="#Process.prob_tlow"><code class="docutils literal notranslate"><span class="pre">prob_tlow</span></code></a></li>
<li><a class="reference internal" href="#Process.prob_thigh"><code class="docutils literal notranslate"><span class="pre">prob_thigh</span></code></a></li>
<li><a class="reference internal" href="#Process.quantile"><code class="docutils literal notranslate"><span class="pre">quantile</span></code></a></li>
<li><a class="reference internal" href="#Process.ref_quantile"><code class="docutils literal notranslate"><span class="pre">ref_quantile</span></code></a></li>
<li><a class="reference internal" href="#Process.efi_order"><code class="docutils literal notranslate"><span class="pre">efi_order</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#misc">Misc</a><ul>
<li><a class="reference internal" href="#Process.tag"><code class="docutils literal notranslate"><span class="pre">tag</span></code></a></li>
<li><a class="reference internal" href="#Process.shared_eps_member"><code class="docutils literal notranslate"><span class="pre">shared_eps_member</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#operations-applied-on-extracted-fields">Operations applied on extracted fields</a><ul>
<li><a class="reference internal" href="#Process.regrid"><code class="docutils literal notranslate"><span class="pre">regrid</span></code></a></li>
<li><a class="reference internal" href="#Process.set_units"><code class="docutils literal notranslate"><span class="pre">set_units</span></code></a></li>
<li><a class="reference internal" href="#Process.set_genproc_type"><code class="docutils literal notranslate"><span class="pre">set_genproc_type</span></code></a></li>
<li><a class="reference internal" href="#Process.set_product_category"><code class="docutils literal notranslate"><span class="pre">set_product_category</span></code></a></li>
<li><a class="reference internal" href="#Process.set_epsmember_identity"><code class="docutils literal notranslate"><span class="pre">set_epsmember_identity</span></code></a></li>
<li><a class="reference internal" href="#Process.set_vcoord"><code class="docutils literal notranslate"><span class="pre">set_vcoord</span></code></a></li>
<li><a class="reference internal" href="#Process.set_level_property"><code class="docutils literal notranslate"><span class="pre">set_level_property</span></code></a></li>
<li><a class="reference internal" href="#Process.set_leadtime"><code class="docutils literal notranslate"><span class="pre">set_leadtime</span></code></a></li>
<li><a class="reference internal" href="#Process.set_time_range"><code class="docutils literal notranslate"><span class="pre">set_time_range</span></code></a></li>
<li><a class="reference internal" href="#Process.set_trange_type"><code class="docutils literal notranslate"><span class="pre">set_trange_type</span></code></a></li>
<li><a class="reference internal" href="#Process.set_reference_date"><code class="docutils literal notranslate"><span class="pre">set_reference_date</span></code></a></li>
<li><a class="reference internal" href="#Process.set_auxiliary_metainfo"><code class="docutils literal notranslate"><span class="pre">set_auxiliary_metainfo</span></code></a></li>
<li><a class="reference internal" href="#Process.merge_with"><code class="docutils literal notranslate"><span class="pre">merge_with</span></code></a></li>
<li><a class="reference internal" href="#Process.merge_mask"><code class="docutils literal notranslate"><span class="pre">merge_mask</span></code></a></li>
<li><a class="reference internal" href="#Process.compare_with"><code class="docutils literal notranslate"><span class="pre">compare_with</span></code></a></li>
<li><a class="reference internal" href="#Process.compare_fct"><code class="docutils literal notranslate"><span class="pre">compare_fct</span></code></a></li>
<li><a class="reference internal" href="#Process.compare_mask"><code class="docutils literal notranslate"><span class="pre">compare_mask</span></code></a></li>
<li><a class="reference internal" href="#horizontal-operators">Horizontal Operators</a><ul>
<li><a class="reference internal" href="#Process.hoper"><code class="docutils literal notranslate"><span class="pre">hoper</span></code></a></li>
<li><a class="reference internal" href="#Process.hoper_mask"><code class="docutils literal notranslate"><span class="pre">hoper_mask</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#linear-transformation">Linear Transformation</a><ul>
<li><a class="reference internal" href="#Process.scale"><code class="docutils literal notranslate"><span class="pre">scale</span></code></a></li>
<li><a class="reference internal" href="#Process.offset"><code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#vertical-operators">Vertical Operators</a><ul>
<li><a class="reference internal" href="#Process.voper"><code class="docutils literal notranslate"><span class="pre">voper</span></code></a></li>
<li><a class="reference internal" href="#Process.voper_lev"><code class="docutils literal notranslate"><span class="pre">voper_lev</span></code></a></li>
<li><a class="reference internal" href="#Process.voper_lev_units"><code class="docutils literal notranslate"><span class="pre">voper_lev_units</span></code></a></li>
<li><a class="reference internal" href="#Process.voper_use_tag"><code class="docutils literal notranslate"><span class="pre">voper_use_tag</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-operators">Time Operators</a><ul>
<li><a class="reference internal" href="#Process.toper"><code class="docutils literal notranslate"><span class="pre">toper</span></code></a></li>
<li><a class="reference internal" href="#Process.toper_mask"><code class="docutils literal notranslate"><span class="pre">toper_mask</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#point-operators">Point Operators</a><ul>
<li><a class="reference internal" href="#Process.poper"><code class="docutils literal notranslate"><span class="pre">poper</span></code></a></li>
<li><a class="reference internal" href="#Process.poper2"><code class="docutils literal notranslate"><span class="pre">poper2</span></code></a></li>
<li><a class="reference internal" href="#Process.poper3"><code class="docutils literal notranslate"><span class="pre">poper3</span></code></a></li>
<li><a class="reference internal" href="#Process.poper4"><code class="docutils literal notranslate"><span class="pre">poper4</span></code></a></li>
<li><a class="reference internal" href="#Process.poper5"><code class="docutils literal notranslate"><span class="pre">poper5</span></code></a></li>
<li><a class="reference internal" href="#Process.new_field_id"><code class="docutils literal notranslate"><span class="pre">new_field_id</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#generated-fields-and-associated-operations">Generated fields and associated operations</a><ul>
<li><a class="reference internal" href="#Process.tmp1_field"><code class="docutils literal notranslate"><span class="pre">tmp1_field</span></code></a></li>
<li><a class="reference internal" href="#Process.use_tag"><code class="docutils literal notranslate"><span class="pre">use_tag</span></code></a></li>
<li><a class="reference internal" href="#Process.use_operator"><code class="docutils literal notranslate"><span class="pre">use_operator</span></code></a></li>
<li><a class="reference internal" href="#id42">Levels</a></li>
<li><a class="reference internal" href="#product-category">Product Category</a><ul>
<li><a class="reference internal" href="#Process.product_category"><code class="docutils literal notranslate"><span class="pre">product_category</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id43">PDF Characteristics</a></li>
<li><a class="reference internal" href="#transformations">Transformations</a></li>
<li><a class="reference internal" href="#further-iterations">Further Iterations</a><ul>
<li><a class="reference internal" href="#Process.tmp2_field"><code class="docutils literal notranslate"><span class="pre">tmp2_field</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp3_field"><code class="docutils literal notranslate"><span class="pre">tmp3_field</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp4_field"><code class="docutils literal notranslate"><span class="pre">tmp4_field</span></code></a></li>
<li><a class="reference internal" href="#Process.tmp5_field"><code class="docutils literal notranslate"><span class="pre">tmp5_field</span></code></a></li>
<li><a class="reference internal" href="#Process.out_field"><code class="docutils literal notranslate"><span class="pre">out_field</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#output-related-field-characteristics">Output related field characteristics</a><ul>
<li><a class="reference internal" href="#Process.set_undefcode"><code class="docutils literal notranslate"><span class="pre">set_undefcode</span></code></a></li>
<li><a class="reference internal" href="#Process.set_packing"><code class="docutils literal notranslate"><span class="pre">set_packing</span></code></a></li>
<li><a class="reference internal" href="#Process.set_description"><code class="docutils literal notranslate"><span class="pre">set_description</span></code></a></li>
<li><a class="reference internal" href="#Process.set_comment"><code class="docutils literal notranslate"><span class="pre">set_comment</span></code></a></li>
<li><a class="reference internal" href="#Process.use_alternate_code"><code class="docutils literal notranslate"><span class="pre">use_alternate_code</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#masks">Masks</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>